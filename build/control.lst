ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"control.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.PID_value,"ax",%progbits
  18              		.align	1
  19              		.global	PID_value
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	PID_value:
  26              	.LFB159:
  27              		.file 1 "Src/control.c"
   1:Src/control.c **** #include "control.h"
   2:Src/control.c **** #include <stdint.h>
   3:Src/control.c **** #include "global.h"
   4:Src/control.c **** #include "tim.h"
   5:Src/control.c **** #include "arm_math.h"
   6:Src/control.c **** #include "main.h"
   7:Src/control.c **** #include "stm32f4xx_hal.h"
   8:Src/control.c **** 
   9:Src/control.c **** /****************************************************************************************
  10:Src/control.c ****  * outline  : PID control
  11:Src/control.c ****  * argument : 
  12:Src/control.c ****  * return   : control value
  13:Src/control.c **** ********************************************************************************************/
  14:Src/control.c **** float PID_value(float target,float measured,float *sum,float*old,float Kp,float Ki,float Kd,int16_t
  28              		.loc 1 14 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  15:Src/control.c ****     float error = 0.00f ;
  16:Src/control.c ****     float p,i,d;
  17:Src/control.c **** 
  18:Src/control.c ****     error = target - measured;
  34              		.loc 1 18 0
  35 0000 30EE600A 		vsub.f32	s0, s0, s1
  36              	.LVL1:
  19:Src/control.c ****     *sum = error * dt;
  37              		.loc 1 19 0
  38 0004 DFED227A 		vldr.32	s15, .L7
  39 0008 60EE277A 		vmul.f32	s15, s0, s15
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 2


  40 000c C0ED007A 		vstr.32	s15, [r0]
  20:Src/control.c ****     p = error * Kp;
  41              		.loc 1 20 0
  42 0010 20EE010A 		vmul.f32	s0, s0, s2
  43              	.LVL2:
  21:Src/control.c ****     i = *sum * Ki;
  44              		.loc 1 21 0
  45 0014 67EEA11A 		vmul.f32	s3, s15, s3
  46              	.LVL3:
  22:Src/control.c ****     d = (measured - *old) * Kp;
  47              		.loc 1 22 0
  48 0018 D1ED007A 		vldr.32	s15, [r1]
  49 001c 70EEE77A 		vsub.f32	s15, s1, s15
  50 0020 27EE811A 		vmul.f32	s2, s15, s2
  51              	.LVL4:
  23:Src/control.c **** 
  24:Src/control.c ****     *old = measured;
  52              		.loc 1 24 0
  53 0024 C1ED000A 		vstr.32	s1, [r1]
  25:Src/control.c **** 
  26:Src/control.c ****     if((p + i + d) > maximum){
  54              		.loc 1 26 0
  55 0028 70EE217A 		vadd.f32	s15, s0, s3
  56 002c 77EE817A 		vadd.f32	s15, s15, s2
  57 0030 07EE102A 		vmov	s14, r2	@ int
  58 0034 F8EEC76A 		vcvt.f32.s32	s13, s14
  59 0038 F4EEE67A 		vcmpe.f32	s15, s13
  60 003c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  61 0040 1DDC     		bgt	.L4
  20:Src/control.c ****     i = *sum * Ki;
  62              		.loc 1 20 0
  63 0042 F0EE406A 		vmov.f32	s13, s0
  64              	.LVL5:
  65              	.L2:
  27:Src/control.c ****         p = maximum;
  28:Src/control.c ****         i = d = 0;
  29:Src/control.c ****     }
  30:Src/control.c ****     if((p+i+d) < -maximum){
  66              		.loc 1 30 0
  67 0046 36EEA17A 		vadd.f32	s14, s13, s3
  68 004a 37EE017A 		vadd.f32	s14, s14, s2
  69 004e 5242     		negs	r2, r2
  70              	.LVL6:
  71 0050 07EE902A 		vmov	s15, r2	@ int
  72 0054 F8EEE77A 		vcvt.f32.s32	s15, s15
  73 0058 B4EEE77A 		vcmpe.f32	s14, s15
  74 005c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  75 0060 12D5     		bpl	.L6
  31:Src/control.c ****         p = -maximum;
  32:Src/control.c ****         i = d = 0;
  76              		.loc 1 32 0
  77 0062 9FED0C1A 		vldr.32	s2, .L7+4
  78              	.LVL7:
  79 0066 F0EE411A 		vmov.f32	s3, s2
  80              	.LVL8:
  81              	.L3:
  33:Src/control.c ****     }
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 3


  34:Src/control.c **** 
  35:Src/control.c ****     return (p + i + d)/batt_Vcc;
  82              		.loc 1 35 0
  83 006a 77EEA17A 		vadd.f32	s15, s15, s3
  84              	.LVL9:
  85 006e 77EE817A 		vadd.f32	s15, s15, s2
  86 0072 094B     		ldr	r3, .L7+8
  87 0074 93ED000A 		vldr.32	s0, [r3]
  36:Src/control.c **** }
  88              		.loc 1 36 0
  89 0078 87EE800A 		vdiv.f32	s0, s15, s0
  90 007c 7047     		bx	lr
  91              	.LVL10:
  92              	.L4:
  28:Src/control.c ****     }
  93              		.loc 1 28 0
  94 007e 9FED051A 		vldr.32	s2, .L7+4
  95              	.LVL11:
  96 0082 F0EE411A 		vmov.f32	s3, s2
  97              	.LVL12:
  98 0086 DEE7     		b	.L2
  99              	.LVL13:
 100              	.L6:
  30:Src/control.c ****         p = -maximum;
 101              		.loc 1 30 0
 102 0088 F0EE667A 		vmov.f32	s15, s13
 103 008c EDE7     		b	.L3
 104              	.L8:
 105 008e 00BF     		.align	2
 106              	.L7:
 107 0090 6F12833A 		.word	981668463
 108 0094 00000000 		.word	0
 109 0098 00000000 		.word	batt_Vcc
 110              		.cfi_endproc
 111              	.LFE159:
 113              		.section	.text.Calc_Palam,"ax",%progbits
 114              		.align	1
 115              		.global	Calc_Palam
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
 119              		.fpu fpv4-sp-d16
 121              	Calc_Palam:
 122              	.LFB160:
  37:Src/control.c **** 
  38:Src/control.c **** /****************************************************************************************
  39:Src/control.c ****  * outline  : calculate parameter
  40:Src/control.c ****  * argument : accel_light,accel_right
  41:Src/control.c ****  * return   : control value
  42:Src/control.c **** ********************************************************************************************/
  43:Src/control.c **** void Calc_Palam(int16_t accel,int16_t *velocity,int16_t *distance){
 123              		.loc 1 43 0
 124              		.cfi_startproc
 125              		@ args = 0, pretend = 0, frame = 0
 126              		@ frame_needed = 0, uses_anonymous_args = 0
 127              		@ link register save eliminated.
 128              	.LVL14:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 4


  44:Src/control.c ****     *distance =+ *velocity * dt;
 129              		.loc 1 44 0
 130 0000 B1F90030 		ldrsh	r3, [r1]
 131 0004 07EE903A 		vmov	s15, r3	@ int
 132 0008 F8EEE77A 		vcvt.f32.s32	s15, s15
 133 000c 9FED0A7A 		vldr.32	s14, .L10
 134 0010 67EE877A 		vmul.f32	s15, s15, s14
 135 0014 FDEEE77A 		vcvt.s32.f32	s15, s15
 136 0018 17EE903A 		vmov	r3, s15	@ int
 137 001c 1380     		strh	r3, [r2]	@ movhi
  45:Src/control.c ****     *velocity =+ accel * dt;
 138              		.loc 1 45 0
 139 001e 07EE900A 		vmov	s15, r0	@ int
 140 0022 F8EEE77A 		vcvt.f32.s32	s15, s15
 141 0026 67EE877A 		vmul.f32	s15, s15, s14
 142 002a FDEEE77A 		vcvt.s32.f32	s15, s15
 143 002e 17EE903A 		vmov	r3, s15	@ int
 144 0032 0B80     		strh	r3, [r1]	@ movhi
  46:Src/control.c **** }
 145              		.loc 1 46 0
 146 0034 7047     		bx	lr
 147              	.L11:
 148 0036 00BF     		.align	2
 149              	.L10:
 150 0038 6F12833A 		.word	981668463
 151              		.cfi_endproc
 152              	.LFE160:
 154              		.section	.text.Straight_Calc_fb,"ax",%progbits
 155              		.align	1
 156              		.global	Straight_Calc_fb
 157              		.syntax unified
 158              		.thumb
 159              		.thumb_func
 160              		.fpu fpv4-sp-d16
 162              	Straight_Calc_fb:
 163              	.LFB161:
  47:Src/control.c **** 
  48:Src/control.c **** 
  49:Src/control.c **** void Straight_Calc_fb(int16_t distant,int16_t v_start,int16_t v_end){
 164              		.loc 1 49 0
 165              		.cfi_startproc
 166              		@ args = 0, pretend = 0, frame = 0
 167              		@ frame_needed = 0, uses_anonymous_args = 0
 168              		@ link register save eliminated.
 169              	.LVL15:
 170 0000 10B4     		push	{r4}
 171              	.LCFI0:
 172              		.cfi_def_cfa_offset 4
 173              		.cfi_offset 4, -4
  50:Src/control.c ****     float t1,t2;
  51:Src/control.c ****     calc.distance = 0;
 174              		.loc 1 51 0
 175 0002 1B4B     		ldr	r3, .L14
 176 0004 0024     		movs	r4, #0
 177 0006 1C80     		strh	r4, [r3]	@ movhi
  52:Src/control.c ****     calc.velocity = v_start;
 178              		.loc 1 52 0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 5


 179 0008 5980     		strh	r1, [r3, #2]	@ movhi
  53:Src/control.c ****     t1 = (float)(MAX_VELOCITY - v_start) / ACCEL;
 180              		.loc 1 53 0
 181 000a C1F59673 		rsb	r3, r1, #300
 182 000e 07EE903A 		vmov	s15, r3	@ int
 183 0012 F8EEE77A 		vcvt.f32.s32	s15, s15
 184 0016 9FED176A 		vldr.32	s12, .L14+4
 185 001a C7EE866A 		vdiv.f32	s13, s15, s12
 186              	.LVL16:
  54:Src/control.c ****     t2 = (float)(MAX_VELOCITY - v_end) / ACCEL;
 187              		.loc 1 54 0
 188 001e C2F59672 		rsb	r2, r2, #300
 189              	.LVL17:
 190 0022 07EE902A 		vmov	s15, r2	@ int
 191 0026 B8EEE77A 		vcvt.f32.s32	s14, s15
 192 002a C7EE065A 		vdiv.f32	s11, s14, s12
 193              	.LVL18:
  55:Src/control.c **** 
  56:Src/control.c ****     accel_L = 0.50f * (MAX_VELOCITY + v_start) * t1;
 194              		.loc 1 56 0
 195 002e 01F59671 		add	r1, r1, #300
 196              	.LVL19:
 197 0032 07EE901A 		vmov	s15, r1	@ int
 198 0036 B8EEE77A 		vcvt.f32.s32	s14, s15
 199 003a F6EE007A 		vmov.f32	s15, #5.0e-1
 200 003e 67EE277A 		vmul.f32	s15, s14, s15
 201 0042 27EEA67A 		vmul.f32	s14, s15, s13
 202 0046 0C4B     		ldr	r3, .L14+8
 203 0048 83ED007A 		vstr.32	s14, [r3]
  57:Src/control.c ****     constant_L = distant - 0.50f * (MAX_VELOCITY + v_start) * t2;
 204              		.loc 1 57 0
 205 004c 07EE100A 		vmov	s14, r0	@ int
 206 0050 B8EEC77A 		vcvt.f32.s32	s14, s14
 207 0054 67EEA57A 		vmul.f32	s15, s15, s11
 208 0058 77EE677A 		vsub.f32	s15, s14, s15
 209 005c 074B     		ldr	r3, .L14+12
 210 005e C3ED007A 		vstr.32	s15, [r3]
  58:Src/control.c ****     decrease_L = distant;
 211              		.loc 1 58 0
 212 0062 074B     		ldr	r3, .L14+16
 213 0064 83ED007A 		vstr.32	s14, [r3]
  59:Src/control.c **** }
 214              		.loc 1 59 0
 215 0068 5DF8044B 		ldr	r4, [sp], #4
 216              	.LCFI1:
 217              		.cfi_restore 4
 218              		.cfi_def_cfa_offset 0
 219 006c 7047     		bx	lr
 220              	.L15:
 221 006e 00BF     		.align	2
 222              	.L14:
 223 0070 00000000 		.word	calc
 224 0074 00007A45 		.word	1165623296
 225 0078 00000000 		.word	accel_L
 226 007c 00000000 		.word	constant_L
 227 0080 00000000 		.word	decrease_L
 228              		.cfi_endproc
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 6


 229              	.LFE161:
 231              		.section	.text.Straight_SysTic_fb,"ax",%progbits
 232              		.align	1
 233              		.global	Straight_SysTic_fb
 234              		.syntax unified
 235              		.thumb
 236              		.thumb_func
 237              		.fpu fpv4-sp-d16
 239              	Straight_SysTic_fb:
 240              	.LFB162:
  60:Src/control.c **** 
  61:Src/control.c **** void Straight_SysTic_fb(void){
 241              		.loc 1 61 0
 242              		.cfi_startproc
 243              		@ args = 0, pretend = 0, frame = 0
 244              		@ frame_needed = 0, uses_anonymous_args = 0
 245 0000 70B5     		push	{r4, r5, r6, lr}
 246              	.LCFI2:
 247              		.cfi_def_cfa_offset 16
 248              		.cfi_offset 4, -16
 249              		.cfi_offset 5, -12
 250              		.cfi_offset 6, -8
 251              		.cfi_offset 14, -4
 252 0002 2DED028B 		vpush.64	{d8}
 253              	.LCFI3:
 254              		.cfi_def_cfa_offset 24
 255              		.cfi_offset 80, -24
 256              		.cfi_offset 81, -20
  62:Src/control.c ****     int16_t straight_pid_l,straight_pid_r;
  63:Src/control.c ****     if(calc.distance < accel_L){
 257              		.loc 1 63 0
 258 0006 3B4B     		ldr	r3, .L32
 259 0008 B3F90030 		ldrsh	r3, [r3]
 260 000c 07EE903A 		vmov	s15, r3	@ int
 261 0010 F8EEE77A 		vcvt.f32.s32	s15, s15
 262 0014 384B     		ldr	r3, .L32+4
 263 0016 93ED007A 		vldr.32	s14, [r3]
 264 001a F4EEC77A 		vcmpe.f32	s15, s14
 265 001e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 266 0022 51D4     		bmi	.L29
  64:Src/control.c ****         Calc_Palam(ACCEL,&calc.velocity,&calc.distance);
  65:Src/control.c ****     }else if(calc.distance < constant_L){
 267              		.loc 1 65 0
 268 0024 354B     		ldr	r3, .L32+8
 269 0026 93ED007A 		vldr.32	s14, [r3]
 270 002a F4EEC77A 		vcmpe.f32	s15, s14
 271 002e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 272 0032 51D4     		bmi	.L30
  66:Src/control.c ****         Calc_Palam(0,&calc.velocity,&calc.distance);
  67:Src/control.c ****     }else if(calc.distance < decrease_L){
 273              		.loc 1 67 0
 274 0034 324B     		ldr	r3, .L32+12
 275 0036 93ED007A 		vldr.32	s14, [r3]
 276 003a F4EEC77A 		vcmpe.f32	s15, s14
 277 003e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 278 0042 50D4     		bmi	.L31
 279              	.L19:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 7


  68:Src/control.c ****         Calc_Palam(-ACCEL,&calc.velocity,&calc.distance);
  69:Src/control.c ****     }
  70:Src/control.c ****     
  71:Src/control.c ****     straight_pid_l = (int16_t)PID_value((float)calc.velocity,enc.velocity_l,&enc.distance_l,&enc.ol
 280              		.loc 1 71 0
 281 0044 2B4E     		ldr	r6, .L32
 282 0046 B6F90230 		ldrsh	r3, [r6, #2]
 283 004a 00EE103A 		vmov	s0, r3	@ int
 284 004e 9FED2D8A 		vldr.32	s16, .L32+16
 285 0052 DFED2D8A 		vldr.32	s17, .L32+20
 286 0056 2D48     		ldr	r0, .L32+24
 287 0058 A0F11804 		sub	r4, r0, #24
 288 005c 4FF44872 		mov	r2, #800
 289 0060 B0EE482A 		vmov.f32	s4, s16
 290 0064 F0EE481A 		vmov.f32	s3, s16
 291 0068 B0EE681A 		vmov.f32	s2, s17
 292 006c 0146     		mov	r1, r0
 293 006e 0838     		subs	r0, r0, #8
 294 0070 D4ED020A 		vldr.32	s1, [r4, #8]
 295 0074 B8EEC00A 		vcvt.f32.s32	s0, s0
 296 0078 FFF7FEFF 		bl	PID_value
 297              	.LVL20:
 298 007c BDEEC00A 		vcvt.s32.f32	s0, s0
 299 0080 10EE103A 		vmov	r3, s0	@ int
 300 0084 1DB2     		sxth	r5, r3
 301              	.LVL21:
  72:Src/control.c ****     straight_pid_r = (int16_t)PID_value((float)calc.velocity,enc.velocity_r,&enc.distance_r,&enc.ol
 302              		.loc 1 72 0
 303 0086 B6F90230 		ldrsh	r3, [r6, #2]
 304 008a 00EE103A 		vmov	s0, r3	@ int
 305 008e 4FF44872 		mov	r2, #800
 306 0092 B0EE482A 		vmov.f32	s4, s16
 307 0096 F0EE481A 		vmov.f32	s3, s16
 308 009a B0EE681A 		vmov.f32	s2, s17
 309 009e 04F11C01 		add	r1, r4, #28
 310 00a2 04F11400 		add	r0, r4, #20
 311 00a6 D4ED030A 		vldr.32	s1, [r4, #12]
 312 00aa B8EEC00A 		vcvt.f32.s32	s0, s0
 313 00ae FFF7FEFF 		bl	PID_value
 314              	.LVL22:
 315 00b2 BDEEC00A 		vcvt.s32.f32	s0, s0
 316              	.LVL23:
  73:Src/control.c ****     Motor_pwm(straight_pid_l,straight_pid_r);
 317              		.loc 1 73 0
 318 00b6 10EE103A 		vmov	r3, s0	@ int
 319 00ba 19B2     		sxth	r1, r3
 320 00bc 2846     		mov	r0, r5
 321 00be FFF7FEFF 		bl	Motor_pwm
 322              	.LVL24:
  74:Src/control.c **** }
 323              		.loc 1 74 0
 324 00c2 BDEC028B 		vldm	sp!, {d8}
 325              	.LCFI4:
 326              		.cfi_remember_state
 327              		.cfi_restore 80
 328              		.cfi_restore 81
 329              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 8


 330 00c6 70BD     		pop	{r4, r5, r6, pc}
 331              	.LVL25:
 332              	.L29:
 333              	.LCFI5:
 334              		.cfi_restore_state
  64:Src/control.c ****     }else if(calc.distance < constant_L){
 335              		.loc 1 64 0
 336 00c8 0A49     		ldr	r1, .L32
 337 00ca 0A46     		mov	r2, r1
 338 00cc 0231     		adds	r1, r1, #2
 339 00ce 4FF47A60 		mov	r0, #4000
 340 00d2 FFF7FEFF 		bl	Calc_Palam
 341              	.LVL26:
 342 00d6 B5E7     		b	.L19
 343              	.L30:
  66:Src/control.c ****     }else if(calc.distance < decrease_L){
 344              		.loc 1 66 0
 345 00d8 0649     		ldr	r1, .L32
 346 00da 0A46     		mov	r2, r1
 347 00dc 0231     		adds	r1, r1, #2
 348 00de 0020     		movs	r0, #0
 349 00e0 FFF7FEFF 		bl	Calc_Palam
 350              	.LVL27:
 351 00e4 AEE7     		b	.L19
 352              	.L31:
  68:Src/control.c ****     }
 353              		.loc 1 68 0
 354 00e6 0349     		ldr	r1, .L32
 355 00e8 0A46     		mov	r2, r1
 356 00ea 0231     		adds	r1, r1, #2
 357 00ec 0848     		ldr	r0, .L32+28
 358 00ee FFF7FEFF 		bl	Calc_Palam
 359              	.LVL28:
 360 00f2 A7E7     		b	.L19
 361              	.L33:
 362              		.align	2
 363              	.L32:
 364 00f4 00000000 		.word	calc
 365 00f8 00000000 		.word	accel_L
 366 00fc 00000000 		.word	constant_L
 367 0100 00000000 		.word	decrease_L
 368 0104 00000000 		.word	0
 369 0108 CDCCCC3D 		.word	1036831949
 370 010c 18000000 		.word	enc+24
 371 0110 60F0FFFF 		.word	-4000
 372              		.cfi_endproc
 373              	.LFE162:
 375              		.section	.text.Yawrate_Calc_fb,"ax",%progbits
 376              		.align	1
 377              		.global	Yawrate_Calc_fb
 378              		.syntax unified
 379              		.thumb
 380              		.thumb_func
 381              		.fpu fpv4-sp-d16
 383              	Yawrate_Calc_fb:
 384              	.LFB163:
  75:Src/control.c **** 
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 9


  76:Src/control.c **** void Yawrate_Calc_fb(int16_t degree,int16_t v_start,int16_t v_end){
 385              		.loc 1 76 0
 386              		.cfi_startproc
 387              		@ args = 0, pretend = 0, frame = 8
 388              		@ frame_needed = 0, uses_anonymous_args = 0
 389              		@ link register save eliminated.
 390              	.LVL29:
 391 0000 10B4     		push	{r4}
 392              	.LCFI6:
 393              		.cfi_def_cfa_offset 4
 394              		.cfi_offset 4, -4
 395 0002 83B0     		sub	sp, sp, #12
 396              	.LCFI7:
 397              		.cfi_def_cfa_offset 16
  77:Src/control.c ****     calc.yawrate_degree = 0;
 398              		.loc 1 77 0
 399 0004 274B     		ldr	r3, .L39
 400 0006 0024     		movs	r4, #0
 401 0008 DC80     		strh	r4, [r3, #6]	@ movhi
  78:Src/control.c ****     calc.yawrate_velocity = v_start;
 402              		.loc 1 78 0
 403 000a 1981     		strh	r1, [r3, #8]	@ movhi
  79:Src/control.c ****     if(degree == 0){
 404              		.loc 1 79 0
 405 000c 0190     		str	r0, [sp, #4]
 406 000e 0028     		cmp	r0, #0
 407 0010 3FD0     		beq	.L38
 408              	.LBB2:
  80:Src/control.c ****         y_accel_L = 0;
  81:Src/control.c ****         y_constant_L = 0;
  82:Src/control.c ****         y_decrease_L = 0;
  83:Src/control.c ****     }
  84:Src/control.c ****     else{
  85:Src/control.c ****         float t1,t2;
  86:Src/control.c **** 
  87:Src/control.c ****         t1 = (Y_MAX_VELOCITY - v_start) / Y_ACCEL;
 409              		.loc 1 87 0
 410 0012 C1F15A00 		rsb	r0, r1, #90
 411              	.LVL30:
 412 0016 244C     		ldr	r4, .L39+4
 413 0018 84FB00C3 		smull	ip, r3, r4, r0
 414 001c C017     		asrs	r0, r0, #31
 415 001e C0EB6310 		rsb	r0, r0, r3, asr #5
 416 0022 07EE900A 		vmov	s15, r0	@ int
 417 0026 B8EEE76A 		vcvt.f32.s32	s12, s15
 418              	.LVL31:
  88:Src/control.c ****         t2 = (Y_MAX_VELOCITY - v_end) / Y_ACCEL;
 419              		.loc 1 88 0
 420 002a C2F15A03 		rsb	r3, r2, #90
 421 002e 84FB0304 		smull	r0, r4, r4, r3
 422 0032 DB17     		asrs	r3, r3, #31
 423 0034 C3EB6413 		rsb	r3, r3, r4, asr #5
 424 0038 07EE903A 		vmov	s15, r3	@ int
 425 003c F8EEE76A 		vcvt.f32.s32	s13, s15
 426              	.LVL32:
  89:Src/control.c **** 
  90:Src/control.c ****         y_accel_L = 0.5f * (v_start + Y_MAX_VELOCITY) * t1;
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 10


 427              		.loc 1 90 0
 428 0040 01F15A03 		add	r3, r1, #90
 429 0044 07EE103A 		vmov	s14, r3	@ int
 430 0048 B8EEC77A 		vcvt.f32.s32	s14, s14
 431 004c F6EE005A 		vmov.f32	s11, #5.0e-1
 432 0050 27EE257A 		vmul.f32	s14, s14, s11
 433 0054 27EE067A 		vmul.f32	s14, s14, s12
 434 0058 144B     		ldr	r3, .L39+8
 435 005a 83ED007A 		vstr.32	s14, [r3]
  91:Src/control.c ****         y_constant_L = degree - 0.5f * (v_end + Y_MAX_VELOCITY) * t2; 
 436              		.loc 1 91 0
 437 005e DDED017A 		vldr.32	s15, [sp, #4]	@ int
 438 0062 B8EEE77A 		vcvt.f32.s32	s14, s15
 439 0066 02F15A03 		add	r3, r2, #90
 440 006a 07EE903A 		vmov	s15, r3	@ int
 441 006e F8EEE77A 		vcvt.f32.s32	s15, s15
 442 0072 67EEA57A 		vmul.f32	s15, s15, s11
 443 0076 67EEA67A 		vmul.f32	s15, s15, s13
 444 007a 77EE677A 		vsub.f32	s15, s14, s15
 445 007e 0C4B     		ldr	r3, .L39+12
 446 0080 C3ED007A 		vstr.32	s15, [r3]
  92:Src/control.c ****         y_decrease_L = degree;
 447              		.loc 1 92 0
 448 0084 0B4B     		ldr	r3, .L39+16
 449 0086 83ED007A 		vstr.32	s14, [r3]
 450              	.LVL33:
 451              	.L34:
 452              	.LBE2:
  93:Src/control.c ****     }
  94:Src/control.c **** }
 453              		.loc 1 94 0
 454 008a 03B0     		add	sp, sp, #12
 455              	.LCFI8:
 456              		.cfi_remember_state
 457              		.cfi_def_cfa_offset 4
 458              		@ sp needed
 459 008c 5DF8044B 		ldr	r4, [sp], #4
 460              	.LCFI9:
 461              		.cfi_restore 4
 462              		.cfi_def_cfa_offset 0
 463 0090 7047     		bx	lr
 464              	.LVL34:
 465              	.L38:
 466              	.LCFI10:
 467              		.cfi_restore_state
  80:Src/control.c ****         y_constant_L = 0;
 468              		.loc 1 80 0
 469 0092 0023     		movs	r3, #0
 470 0094 054A     		ldr	r2, .L39+8
 471              	.LVL35:
 472 0096 1360     		str	r3, [r2]	@ float
  81:Src/control.c ****         y_decrease_L = 0;
 473              		.loc 1 81 0
 474 0098 054A     		ldr	r2, .L39+12
 475 009a 1360     		str	r3, [r2]	@ float
  82:Src/control.c ****     }
 476              		.loc 1 82 0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 11


 477 009c 054A     		ldr	r2, .L39+16
 478 009e 1360     		str	r3, [r2]	@ float
 479 00a0 F3E7     		b	.L34
 480              	.L40:
 481 00a2 00BF     		.align	2
 482              	.L39:
 483 00a4 00000000 		.word	calc
 484 00a8 B5814E1B 		.word	458129845
 485 00ac 00000000 		.word	y_accel_L
 486 00b0 00000000 		.word	y_constant_L
 487 00b4 00000000 		.word	y_decrease_L
 488              		.cfi_endproc
 489              	.LFE163:
 491              		.section	.text.Yawrate_SysTic_fb,"ax",%progbits
 492              		.align	1
 493              		.global	Yawrate_SysTic_fb
 494              		.syntax unified
 495              		.thumb
 496              		.thumb_func
 497              		.fpu fpv4-sp-d16
 499              	Yawrate_SysTic_fb:
 500              	.LFB164:
  95:Src/control.c **** 
  96:Src/control.c **** void Yawrate_SysTic_fb(void){
 501              		.loc 1 96 0
 502              		.cfi_startproc
 503              		@ args = 0, pretend = 0, frame = 0
 504              		@ frame_needed = 0, uses_anonymous_args = 0
 505 0000 08B5     		push	{r3, lr}
 506              	.LCFI11:
 507              		.cfi_def_cfa_offset 8
 508              		.cfi_offset 3, -8
 509              		.cfi_offset 14, -4
  97:Src/control.c ****     int16_t yawrate_pid;
  98:Src/control.c ****     if(calc.yawrate_degree < y_accel_L){
 510              		.loc 1 98 0
 511 0002 2A4B     		ldr	r3, .L57
 512 0004 B3F90630 		ldrsh	r3, [r3, #6]
 513 0008 07EE903A 		vmov	s15, r3	@ int
 514 000c F8EEE77A 		vcvt.f32.s32	s15, s15
 515 0010 274B     		ldr	r3, .L57+4
 516 0012 93ED007A 		vldr.32	s14, [r3]
 517 0016 F4EEC77A 		vcmpe.f32	s15, s14
 518 001a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 519 001e 2FD4     		bmi	.L54
  99:Src/control.c ****         Calc_Palam(Y_ACCEL,&calc.yawrate_velocity,&calc.yawrate_degree);
 100:Src/control.c ****     }else if(calc.yawrate_degree < y_constant_L){
 520              		.loc 1 100 0
 521 0020 244B     		ldr	r3, .L57+8
 522 0022 93ED007A 		vldr.32	s14, [r3]
 523 0026 F4EEC77A 		vcmpe.f32	s15, s14
 524 002a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 525 002e 2FD4     		bmi	.L55
 101:Src/control.c ****         Calc_Palam(0,&calc.yawrate_velocity,&calc.yawrate_degree);
 102:Src/control.c ****     }else if(calc.yawrate_degree < y_decrease_L){
 526              		.loc 1 102 0
 527 0030 214B     		ldr	r3, .L57+12
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 12


 528 0032 93ED007A 		vldr.32	s14, [r3]
 529 0036 F4EEC77A 		vcmpe.f32	s15, s14
 530 003a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 531 003e 2ED4     		bmi	.L56
 532              	.L44:
 103:Src/control.c ****         Calc_Palam(-Y_ACCEL,&calc.yawrate_velocity,&calc.yawrate_degree);
 104:Src/control.c ****     }
 105:Src/control.c ****     yawrate_pid = (int16_t)PID_value((float)calc.yawrate_velocity,gyro.velocity,&gyro.degree,&gyro.
 533              		.loc 1 105 0
 534 0040 1A4B     		ldr	r3, .L57
 535 0042 B3F90830 		ldrsh	r3, [r3, #8]
 536 0046 00EE103A 		vmov	s0, r3	@ int
 537 004a DFED1C1A 		vldr.32	s3, .L57+16
 538 004e 1C4B     		ldr	r3, .L57+20
 539 0050 4FF44872 		mov	r2, #800
 540 0054 B0EE612A 		vmov.f32	s4, s3
 541 0058 B2EE001A 		vmov.f32	s2, #8.0e+0
 542 005c 1946     		mov	r1, r3
 543 005e 181D     		adds	r0, r3, #4
 544 0060 D3ED020A 		vldr.32	s1, [r3, #8]
 545 0064 B8EEC00A 		vcvt.f32.s32	s0, s0
 546 0068 FFF7FEFF 		bl	PID_value
 547              	.LVL36:
 548 006c BDEEC00A 		vcvt.s32.f32	s0, s0
 549 0070 10EE103A 		vmov	r3, s0	@ int
 550 0074 19B2     		sxth	r1, r3
 551              	.LVL37:
 106:Src/control.c ****     Motor_pwm(-yawrate_pid,yawrate_pid);
 552              		.loc 1 106 0
 553 0076 4842     		negs	r0, r1
 554 0078 00B2     		sxth	r0, r0
 555 007a FFF7FEFF 		bl	Motor_pwm
 556              	.LVL38:
 107:Src/control.c **** }
 557              		.loc 1 107 0
 558 007e 08BD     		pop	{r3, pc}
 559              	.L54:
  99:Src/control.c ****     }else if(calc.yawrate_degree < y_constant_L){
 560              		.loc 1 99 0
 561 0080 1049     		ldr	r1, .L57+24
 562 0082 0A46     		mov	r2, r1
 563 0084 0231     		adds	r1, r1, #2
 564 0086 4FF49670 		mov	r0, #300
 565 008a FFF7FEFF 		bl	Calc_Palam
 566              	.LVL39:
 567 008e D7E7     		b	.L44
 568              	.L55:
 101:Src/control.c ****     }else if(calc.yawrate_degree < y_decrease_L){
 569              		.loc 1 101 0
 570 0090 0C49     		ldr	r1, .L57+24
 571 0092 0A46     		mov	r2, r1
 572 0094 0231     		adds	r1, r1, #2
 573 0096 0020     		movs	r0, #0
 574 0098 FFF7FEFF 		bl	Calc_Palam
 575              	.LVL40:
 576 009c D0E7     		b	.L44
 577              	.L56:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 13


 103:Src/control.c ****     }
 578              		.loc 1 103 0
 579 009e 0949     		ldr	r1, .L57+24
 580 00a0 0A46     		mov	r2, r1
 581 00a2 0231     		adds	r1, r1, #2
 582 00a4 0848     		ldr	r0, .L57+28
 583 00a6 FFF7FEFF 		bl	Calc_Palam
 584              	.LVL41:
 585 00aa C9E7     		b	.L44
 586              	.L58:
 587              		.align	2
 588              	.L57:
 589 00ac 00000000 		.word	calc
 590 00b0 00000000 		.word	y_accel_L
 591 00b4 00000000 		.word	y_constant_L
 592 00b8 00000000 		.word	y_decrease_L
 593 00bc 00000000 		.word	0
 594 00c0 08000000 		.word	gyro+8
 595 00c4 06000000 		.word	calc+6
 596 00c8 D4FEFFFF 		.word	-300
 597              		.cfi_endproc
 598              	.LFE164:
 600              		.section	.text.control_accel,"ax",%progbits
 601              		.align	1
 602              		.global	control_accel
 603              		.syntax unified
 604              		.thumb
 605              		.thumb_func
 606              		.fpu fpv4-sp-d16
 608              	control_accel:
 609              	.LFB165:
 108:Src/control.c **** 
 109:Src/control.c **** //argument : accel[mm/s^2]
 110:Src/control.c **** void control_accel(int16_t accel_l,int16_t accel_r){
 610              		.loc 1 110 0
 611              		.cfi_startproc
 612              		@ args = 0, pretend = 0, frame = 0
 613              		@ frame_needed = 0, uses_anonymous_args = 0
 614              		@ link register save eliminated.
 615              	.LVL42:
 111:Src/control.c ****   float pwm_l,pwm_r;
 112:Src/control.c ****   //torque[mNm] = weight[g] * 0.001 * accel[mm/s^2] * 0.001 * tire_radius[mm] / 2 / gear_rate
 113:Src/control.c ****   //pwm =( R * torque[mNM] / KT[mNm/A] + KE[mV/rpm] * rpms * 60) / Vcc
 114:Src/control.c ****   pwm_l = (Resistance * WEIGHT * accel_l * TIRE_RADIUS / 2 / GEAR_RATE / KT + KE * enc.rpms_left * 
 616              		.loc 1 114 0
 617 0000 07EE900A 		vmov	s15, r0	@ int
 618 0004 B8EEE77A 		vcvt.f32.s32	s14, s15
 619 0008 9FED272A 		vldr.32	s4, .L60
 620 000c 27EE027A 		vmul.f32	s14, s14, s4
 621 0010 F2EE082A 		vmov.f32	s5, #1.2e+1
 622 0014 27EE227A 		vmul.f32	s14, s14, s5
 623 0018 B6EE003A 		vmov.f32	s6, #5.0e-1
 624 001c 27EE037A 		vmul.f32	s14, s14, s6
 625 0020 F1EE053A 		vmov.f32	s7, #5.25e+0
 626 0024 C7EE237A 		vdiv.f32	s15, s14, s7
 627 0028 9FED207A 		vldr.32	s14, .L60+4
 628 002c C7EE876A 		vdiv.f32	s13, s15, s14
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 14


 629 0030 1F4B     		ldr	r3, .L60+8
 630 0032 93ED006A 		vldr.32	s12, [r3]
 631 0036 9FED1F4A 		vldr.32	s8, .L60+12
 632 003a 26EE046A 		vmul.f32	s12, s12, s8
 633 003e DFED1E4A 		vldr.32	s9, .L60+16
 634 0042 26EE246A 		vmul.f32	s12, s12, s9
 635 0046 76EE866A 		vadd.f32	s13, s13, s12
 636 004a 9FED1C5A 		vldr.32	s10, .L60+20
 637 004e 66EE856A 		vmul.f32	s13, s13, s10
 638 0052 1B4A     		ldr	r2, .L60+24
 639 0054 D2ED005A 		vldr.32	s11, [r2]
 640 0058 86EEA56A 		vdiv.f32	s12, s13, s11
 641              	.LVL43:
 115:Src/control.c ****   pwm_r = (Resistance * WEIGHT * accel_r * TIRE_RADIUS / 2 / GEAR_RATE / KT + KE * enc.rpms_right *
 642              		.loc 1 115 0
 643 005c 07EE901A 		vmov	s15, r1	@ int
 644 0060 F8EEE77A 		vcvt.f32.s32	s15, s15
 645 0064 67EE827A 		vmul.f32	s15, s15, s4
 646 0068 67EEA27A 		vmul.f32	s15, s15, s5
 647 006c 67EE837A 		vmul.f32	s15, s15, s6
 648 0070 C7EEA36A 		vdiv.f32	s13, s15, s7
 649 0074 C6EE877A 		vdiv.f32	s15, s13, s14
 650 0078 93ED017A 		vldr.32	s14, [r3, #4]
 651 007c 27EE047A 		vmul.f32	s14, s14, s8
 652 0080 27EE247A 		vmul.f32	s14, s14, s9
 653 0084 77EE877A 		vadd.f32	s15, s15, s14
 654 0088 67EE857A 		vmul.f32	s15, s15, s10
 655 008c 87EEA57A 		vdiv.f32	s14, s15, s11
 656              	.LVL44:
 116:Src/control.c **** 
 117:Src/control.c ****   motor.pwm_l = (int16_t)pwm_l;
 657              		.loc 1 117 0
 658 0090 BDEEC66A 		vcvt.s32.f32	s12, s12
 659              	.LVL45:
 660 0094 0B4B     		ldr	r3, .L60+28
 661              	.LVL46:
 662 0096 16EE102A 		vmov	r2, s12	@ int
 663 009a 1A80     		strh	r2, [r3]	@ movhi
 118:Src/control.c ****   motor.pwm_r = (int16_t)pwm_r;
 664              		.loc 1 118 0
 665 009c BDEEC77A 		vcvt.s32.f32	s14, s14
 666              	.LVL47:
 667 00a0 17EE102A 		vmov	r2, s14	@ int
 668 00a4 5A80     		strh	r2, [r3, #2]	@ movhi
 119:Src/control.c **** 
 120:Src/control.c ****   //Motor_pwm(pwm_l,pwm_r);
 121:Src/control.c **** 
 122:Src/control.c **** }
 669              		.loc 1 122 0
 670 00a6 7047     		bx	lr
 671              	.L61:
 672              		.align	2
 673              	.L60:
 674 00a8 0100D642 		.word	1121320961
 675 00ac A470FD3F 		.word	1073574052
 676 00b0 00000000 		.word	enc
 677 00b4 CFF7533E 		.word	1045690319
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 15


 678 00b8 00007042 		.word	1114636288
 679 00bc 00C07944 		.word	1148829696
 680 00c0 00000000 		.word	batt_Vcc
 681 00c4 00000000 		.word	motor
 682              		.cfi_endproc
 683              	.LFE165:
 685              		.section	.text.straight_one_ff,"ax",%progbits
 686              		.align	1
 687              		.global	straight_one_ff
 688              		.syntax unified
 689              		.thumb
 690              		.thumb_func
 691              		.fpu fpv4-sp-d16
 693              	straight_one_ff:
 694              	.LFB166:
 123:Src/control.c **** 
 124:Src/control.c **** /****************************************************************************************
 125:Src/control.c ****  * outline  : straight run one block
 126:Src/control.c ****  * argument : void
 127:Src/control.c ****  * return   : void
 128:Src/control.c **** ********************************************************************************************/
 129:Src/control.c **** void straight_one_ff(void){
 695              		.loc 1 129 0
 696              		.cfi_startproc
 697              		@ args = 0, pretend = 0, frame = 0
 698              		@ frame_needed = 0, uses_anonymous_args = 0
 699 0000 08B5     		push	{r3, lr}
 700              	.LCFI12:
 701              		.cfi_def_cfa_offset 8
 702              		.cfi_offset 3, -8
 703              		.cfi_offset 14, -4
 130:Src/control.c ****     if(flag.accel == OFF){
 704              		.loc 1 130 0
 705 0002 1F4B     		ldr	r3, .L74
 706 0004 B3F90230 		ldrsh	r3, [r3, #2]
 707 0008 1BB3     		cbz	r3, .L70
 131:Src/control.c ****         motor.pwm_l = 0;
 132:Src/control.c ****         motor.pwm_r = 0;
 133:Src/control.c ****     }
 134:Src/control.c ****     else if(flag.accel == ON){
 708              		.loc 1 134 0
 709 000a 012B     		cmp	r3, #1
 710 000c 26D0     		beq	.L71
 135:Src/control.c ****         speed_count = 0;
 136:Src/control.c ****         flag.accel = 2;
 137:Src/control.c ****     }else if(flag.accel == 2){
 711              		.loc 1 137 0
 712 000e 022B     		cmp	r3, #2
 713 0010 23D1     		bne	.L62
 138:Src/control.c ****         if(speed_count < 300){
 714              		.loc 1 138 0
 715 0012 1C4B     		ldr	r3, .L74+4
 716 0014 1B88     		ldrh	r3, [r3]
 717 0016 B3F5967F 		cmp	r3, #300
 718 001a 26D3     		bcc	.L72
 719              	.L66:
 139:Src/control.c ****             control_accel(1000,1000);
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 16


 140:Src/control.c ****         }
 141:Src/control.c **** 
 142:Src/control.c ****         if(speed_count >= 300 && speed_count < 600){
 720              		.loc 1 142 0
 721 001c 194B     		ldr	r3, .L74+4
 722 001e 1B88     		ldrh	r3, [r3]
 723 0020 A3F59672 		sub	r2, r3, #300
 724 0024 92B2     		uxth	r2, r2
 725 0026 B2F5967F 		cmp	r2, #300
 726 002a 03D2     		bcs	.L67
 143:Src/control.c ****             motor.pwm_l = 0;
 727              		.loc 1 143 0
 728 002c 164A     		ldr	r2, .L74+8
 729 002e 0021     		movs	r1, #0
 730 0030 1180     		strh	r1, [r2]	@ movhi
 144:Src/control.c ****             motor.pwm_r = 0;
 731              		.loc 1 144 0
 732 0032 5180     		strh	r1, [r2, #2]	@ movhi
 733              	.L67:
 145:Src/control.c ****         }
 146:Src/control.c **** 
 147:Src/control.c ****         if(speed_count >= 600 && speed_count < 900){
 734              		.loc 1 147 0
 735 0034 A3F51673 		sub	r3, r3, #600
 736 0038 9BB2     		uxth	r3, r3
 737 003a B3F5967F 		cmp	r3, #300
 738 003e 1AD3     		bcc	.L73
 739              	.L68:
 148:Src/control.c ****             control_accel(-1000,-1000);
 149:Src/control.c ****         }
 150:Src/control.c ****         if(speed_count >= 900){
 740              		.loc 1 150 0
 741 0040 104B     		ldr	r3, .L74+4
 742 0042 1B88     		ldrh	r3, [r3]
 743 0044 B3F5617F 		cmp	r3, #900
 744 0048 07D3     		bcc	.L62
 151:Src/control.c ****             flag.accel = OFF;
 745              		.loc 1 151 0
 746 004a 0D4B     		ldr	r3, .L74
 747 004c 0022     		movs	r2, #0
 748 004e 5A80     		strh	r2, [r3, #2]	@ movhi
 152:Src/control.c ****         }
 153:Src/control.c ****     }
 154:Src/control.c **** }
 749              		.loc 1 154 0
 750 0050 03E0     		b	.L62
 751              	.L70:
 131:Src/control.c ****         motor.pwm_r = 0;
 752              		.loc 1 131 0
 753 0052 0D4B     		ldr	r3, .L74+8
 754 0054 0022     		movs	r2, #0
 755 0056 1A80     		strh	r2, [r3]	@ movhi
 132:Src/control.c ****     }
 756              		.loc 1 132 0
 757 0058 5A80     		strh	r2, [r3, #2]	@ movhi
 758              	.L62:
 759              		.loc 1 154 0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 17


 760 005a 08BD     		pop	{r3, pc}
 761              	.L71:
 135:Src/control.c ****         flag.accel = 2;
 762              		.loc 1 135 0
 763 005c 094B     		ldr	r3, .L74+4
 764 005e 0022     		movs	r2, #0
 765 0060 1A80     		strh	r2, [r3]	@ movhi
 136:Src/control.c ****     }else if(flag.accel == 2){
 766              		.loc 1 136 0
 767 0062 074B     		ldr	r3, .L74
 768 0064 0222     		movs	r2, #2
 769 0066 5A80     		strh	r2, [r3, #2]	@ movhi
 770 0068 F7E7     		b	.L62
 771              	.L72:
 139:Src/control.c ****         }
 772              		.loc 1 139 0
 773 006a 4FF47A71 		mov	r1, #1000
 774 006e 0846     		mov	r0, r1
 775 0070 FFF7FEFF 		bl	control_accel
 776              	.LVL48:
 777 0074 D2E7     		b	.L66
 778              	.L73:
 148:Src/control.c ****         }
 779              		.loc 1 148 0
 780 0076 0548     		ldr	r0, .L74+12
 781 0078 0146     		mov	r1, r0
 782 007a FFF7FEFF 		bl	control_accel
 783              	.LVL49:
 784 007e DFE7     		b	.L68
 785              	.L75:
 786              		.align	2
 787              	.L74:
 788 0080 00000000 		.word	flag
 789 0084 00000000 		.word	speed_count
 790 0088 00000000 		.word	motor
 791 008c 18FCFFFF 		.word	-1000
 792              		.cfi_endproc
 793              	.LFE166:
 795              		.section	.text.Sensor_Check,"ax",%progbits
 796              		.align	1
 797              		.global	Sensor_Check
 798              		.syntax unified
 799              		.thumb
 800              		.thumb_func
 801              		.fpu fpv4-sp-d16
 803              	Sensor_Check:
 804              	.LFB167:
 155:Src/control.c **** 
 156:Src/control.c **** void Sensor_Check(void){
 805              		.loc 1 156 0
 806              		.cfi_startproc
 807              		@ args = 0, pretend = 0, frame = 0
 808              		@ frame_needed = 0, uses_anonymous_args = 0
 809 0000 08B5     		push	{r3, lr}
 810              	.LCFI13:
 811              		.cfi_def_cfa_offset 8
 812              		.cfi_offset 3, -8
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 18


 813              		.cfi_offset 14, -4
 157:Src/control.c ****     if(sensor.wall[0]==true){
 814              		.loc 1 157 0
 815 0002 214B     		ldr	r3, .L90
 816 0004 1B7E     		ldrb	r3, [r3, #24]	@ zero_extendqisi2
 817 0006 012B     		cmp	r3, #1
 818 0008 23D0     		beq	.L86
 158:Src/control.c ****         HAL_GPIO_WritePin(led0_GPIO_Port,led0_Pin,GPIO_PIN_RESET);
 159:Src/control.c ****     }else{
 160:Src/control.c ****         HAL_GPIO_WritePin(led0_GPIO_Port,led0_Pin,GPIO_PIN_SET);
 819              		.loc 1 160 0
 820 000a 0122     		movs	r2, #1
 821 000c 4FF40051 		mov	r1, #8192
 822 0010 1E48     		ldr	r0, .L90+4
 823 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 824              	.LVL50:
 825              	.L78:
 161:Src/control.c ****     }
 162:Src/control.c ****     if(sensor.wall[1]==true){
 826              		.loc 1 162 0
 827 0016 1C4B     		ldr	r3, .L90
 828 0018 5B7E     		ldrb	r3, [r3, #25]	@ zero_extendqisi2
 829 001a 012B     		cmp	r3, #1
 830 001c 20D0     		beq	.L87
 163:Src/control.c ****         HAL_GPIO_WritePin(led3_GPIO_Port,led3_Pin,GPIO_PIN_RESET);
 164:Src/control.c ****     }else{
 165:Src/control.c ****         HAL_GPIO_WritePin(led3_GPIO_Port,led3_Pin,GPIO_PIN_SET);
 831              		.loc 1 165 0
 832 001e 0122     		movs	r2, #1
 833 0020 4FF48071 		mov	r1, #256
 834 0024 1948     		ldr	r0, .L90+4
 835 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 836              	.LVL51:
 837              	.L80:
 166:Src/control.c ****     }
 167:Src/control.c ****     if(sensor.wall[2]==true){
 838              		.loc 1 167 0
 839 002a 174B     		ldr	r3, .L90
 840 002c 9B7E     		ldrb	r3, [r3, #26]	@ zero_extendqisi2
 841 002e 012B     		cmp	r3, #1
 842 0030 1DD0     		beq	.L88
 168:Src/control.c ****         HAL_GPIO_WritePin(led2_GPIO_Port,led2_Pin,GPIO_PIN_RESET);
 169:Src/control.c ****     }else{
 170:Src/control.c ****         HAL_GPIO_WritePin(led2_GPIO_Port,led2_Pin,GPIO_PIN_SET);
 843              		.loc 1 170 0
 844 0032 0122     		movs	r2, #1
 845 0034 8021     		movs	r1, #128
 846 0036 1548     		ldr	r0, .L90+4
 847 0038 FFF7FEFF 		bl	HAL_GPIO_WritePin
 848              	.LVL52:
 849              	.L82:
 171:Src/control.c ****     }
 172:Src/control.c ****     if(sensor.wall[3]==true){
 850              		.loc 1 172 0
 851 003c 124B     		ldr	r3, .L90
 852 003e DB7E     		ldrb	r3, [r3, #27]	@ zero_extendqisi2
 853 0040 012B     		cmp	r3, #1
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 19


 854 0042 1AD0     		beq	.L89
 173:Src/control.c ****         HAL_GPIO_WritePin(led1_GPIO_Port,led1_Pin,GPIO_PIN_RESET);
 174:Src/control.c ****     }else{
 175:Src/control.c ****         HAL_GPIO_WritePin(led1_GPIO_Port,led1_Pin,GPIO_PIN_SET);
 855              		.loc 1 175 0
 856 0044 0122     		movs	r2, #1
 857 0046 4FF48041 		mov	r1, #16384
 858 004a 1048     		ldr	r0, .L90+4
 859 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 860              	.LVL53:
 861              	.L76:
 176:Src/control.c ****     } 
 177:Src/control.c **** }
 862              		.loc 1 177 0
 863 0050 08BD     		pop	{r3, pc}
 864              	.L86:
 158:Src/control.c ****     }else{
 865              		.loc 1 158 0
 866 0052 0022     		movs	r2, #0
 867 0054 4FF40051 		mov	r1, #8192
 868 0058 0C48     		ldr	r0, .L90+4
 869 005a FFF7FEFF 		bl	HAL_GPIO_WritePin
 870              	.LVL54:
 871 005e DAE7     		b	.L78
 872              	.L87:
 163:Src/control.c ****     }else{
 873              		.loc 1 163 0
 874 0060 0022     		movs	r2, #0
 875 0062 4FF48071 		mov	r1, #256
 876 0066 0948     		ldr	r0, .L90+4
 877 0068 FFF7FEFF 		bl	HAL_GPIO_WritePin
 878              	.LVL55:
 879 006c DDE7     		b	.L80
 880              	.L88:
 168:Src/control.c ****     }else{
 881              		.loc 1 168 0
 882 006e 0022     		movs	r2, #0
 883 0070 8021     		movs	r1, #128
 884 0072 0648     		ldr	r0, .L90+4
 885 0074 FFF7FEFF 		bl	HAL_GPIO_WritePin
 886              	.LVL56:
 887 0078 E0E7     		b	.L82
 888              	.L89:
 173:Src/control.c ****     }else{
 889              		.loc 1 173 0
 890 007a 0022     		movs	r2, #0
 891 007c 4FF48041 		mov	r1, #16384
 892 0080 0248     		ldr	r0, .L90+4
 893 0082 FFF7FEFF 		bl	HAL_GPIO_WritePin
 894              	.LVL57:
 895 0086 E3E7     		b	.L76
 896              	.L91:
 897              		.align	2
 898              	.L90:
 899 0088 00000000 		.word	sensor
 900 008c 00080240 		.word	1073874944
 901              		.cfi_endproc
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 20


 902              	.LFE167:
 904              		.text
 905              	.Letext0:
 906              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 907              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 908              		.file 4 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 909              		.file 5 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 910              		.file 6 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\lib\\gcc\\arm-none-eabi
 911              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 912              		.file 8 "Inc/global.h"
 913              		.file 9 "Drivers/CMSIS/Include/core_cm4.h"
 914              		.file 10 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 915              		.file 11 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 916              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 917              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 918              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 919              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 920              		.file 16 "Inc/tim.h"
 921              		.file 17 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s 			page 21


DEFINED SYMBOLS
                            *ABS*:00000000 control.c
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:18     .text.PID_value:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:25     .text.PID_value:00000000 PID_value
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:107    .text.PID_value:00000090 $d
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:114    .text.Calc_Palam:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:121    .text.Calc_Palam:00000000 Calc_Palam
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:150    .text.Calc_Palam:00000038 $d
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:155    .text.Straight_Calc_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:162    .text.Straight_Calc_fb:00000000 Straight_Calc_fb
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:223    .text.Straight_Calc_fb:00000070 $d
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:232    .text.Straight_SysTic_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:239    .text.Straight_SysTic_fb:00000000 Straight_SysTic_fb
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:364    .text.Straight_SysTic_fb:000000f4 $d
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:376    .text.Yawrate_Calc_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:383    .text.Yawrate_Calc_fb:00000000 Yawrate_Calc_fb
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:483    .text.Yawrate_Calc_fb:000000a4 $d
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:492    .text.Yawrate_SysTic_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:499    .text.Yawrate_SysTic_fb:00000000 Yawrate_SysTic_fb
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:589    .text.Yawrate_SysTic_fb:000000ac $d
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:601    .text.control_accel:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:608    .text.control_accel:00000000 control_accel
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:674    .text.control_accel:000000a8 $d
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:686    .text.straight_one_ff:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:693    .text.straight_one_ff:00000000 straight_one_ff
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:788    .text.straight_one_ff:00000080 $d
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:796    .text.Sensor_Check:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:803    .text.Sensor_Check:00000000 Sensor_Check
C:\Users\kotaro\AppData\Local\Temp\ccOvgylN.s:899    .text.Sensor_Check:00000088 $d

UNDEFINED SYMBOLS
batt_Vcc
calc
accel_L
constant_L
decrease_L
Motor_pwm
enc
y_accel_L
y_constant_L
y_decrease_L
gyro
motor
flag
speed_count
HAL_GPIO_WritePin
sensor
