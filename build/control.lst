ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"control.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.PID_value,"ax",%progbits
  18              		.align	1
  19              		.global	PID_value
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	PID_value:
  26              	.LFB159:
  27              		.file 1 "Src/control.c"
   1:Src/control.c **** #include "control.h"
   2:Src/control.c **** #include <stdint.h>
   3:Src/control.c **** #include "global.h"
   4:Src/control.c **** #include "tim.h"
   5:Src/control.c **** #include "arm_math.h"
   6:Src/control.c **** #include "main.h"
   7:Src/control.c **** #include "stm32f4xx_hal.h"
   8:Src/control.c **** 
   9:Src/control.c **** float encoder_Kp = 0;
  10:Src/control.c **** float encoder_Ki = 0;
  11:Src/control.c **** float encoder_Kd = 0;
  12:Src/control.c **** 
  13:Src/control.c **** 
  14:Src/control.c **** /****************************************************************************************
  15:Src/control.c ****  * outline  : PID control
  16:Src/control.c ****  * argument : 
  17:Src/control.c ****  * return   : control value
  18:Src/control.c **** ********************************************************************************************/
  19:Src/control.c **** float PID_value(float target,float measured,float *sum,float *old,float Kp,float Ki,float Kd){
  28              		.loc 1 19 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  20:Src/control.c ****     float error;
  21:Src/control.c ****     float p,i,d;
  22:Src/control.c **** 
  23:Src/control.c ****     error = target - measured;
  34              		.loc 1 23 0
  35 0000 70EE600A 		vsub.f32	s1, s0, s1
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 2


  36              	.LVL1:
  24:Src/control.c ****     p = Kp*error;
  37              		.loc 1 24 0
  38 0004 20EE811A 		vmul.f32	s2, s1, s2
  39              	.LVL2:
  25:Src/control.c **** 
  26:Src/control.c ****     *sum += error * dt;
  40              		.loc 1 26 0
  41 0008 DFED0C7A 		vldr.32	s15, .L2
  42 000c 60EEA77A 		vmul.f32	s15, s1, s15
  43 0010 90ED000A 		vldr.32	s0, [r0]
  44              	.LVL3:
  45 0014 77EE807A 		vadd.f32	s15, s15, s0
  46 0018 C0ED007A 		vstr.32	s15, [r0]
  27:Src/control.c ****     i = *sum * Ki;
  47              		.loc 1 27 0
  48 001c 67EEA11A 		vmul.f32	s3, s15, s3
  49              	.LVL4:
  28:Src/control.c **** 
  29:Src/control.c ****     d = Kd * (error - *old);
  50              		.loc 1 29 0
  51 0020 91ED007A 		vldr.32	s14, [r1]
  52 0024 30EEC77A 		vsub.f32	s14, s1, s14
  53 0028 27EE022A 		vmul.f32	s4, s14, s4
  54              	.LVL5:
  30:Src/control.c ****     *old = error;
  55              		.loc 1 30 0
  56 002c C1ED000A 		vstr.32	s1, [r1]
  31:Src/control.c **** 
  32:Src/control.c ****     return (p+i+d);
  57              		.loc 1 32 0
  58 0030 71EE211A 		vadd.f32	s3, s2, s3
  59              	.LVL6:
  33:Src/control.c **** }
  60              		.loc 1 33 0
  61 0034 31EE820A 		vadd.f32	s0, s3, s4
  62 0038 7047     		bx	lr
  63              	.L3:
  64 003a 00BF     		.align	2
  65              	.L2:
  66 003c 6F12833A 		.word	981668463
  67              		.cfi_endproc
  68              	.LFE159:
  70              		.section	.text.Integral_value,"ax",%progbits
  71              		.align	1
  72              		.global	Integral_value
  73              		.syntax unified
  74              		.thumb
  75              		.thumb_func
  76              		.fpu fpv4-sp-d16
  78              	Integral_value:
  79              	.LFB160:
  34:Src/control.c **** 
  35:Src/control.c **** float Integral_value(float error,float *sum,float Kii){
  80              		.loc 1 35 0
  81              		.cfi_startproc
  82              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 3


  83              		@ frame_needed = 0, uses_anonymous_args = 0
  84              		@ link register save eliminated.
  85              	.LVL7:
  36:Src/control.c ****     float ii;
  37:Src/control.c ****     *sum += error * dt;
  86              		.loc 1 37 0
  87 0000 DFED067A 		vldr.32	s15, .L5
  88 0004 20EE270A 		vmul.f32	s0, s0, s15
  89              	.LVL8:
  90 0008 D0ED007A 		vldr.32	s15, [r0]
  91 000c 30EE270A 		vadd.f32	s0, s0, s15
  92 0010 80ED000A 		vstr.32	s0, [r0]
  93              	.LVL9:
  38:Src/control.c ****     ii = *sum * Kii;
  39:Src/control.c ****     return ii;
  40:Src/control.c **** }
  94              		.loc 1 40 0
  95 0014 20EE200A 		vmul.f32	s0, s0, s1
  96              	.LVL10:
  97 0018 7047     		bx	lr
  98              	.L6:
  99 001a 00BF     		.align	2
 100              	.L5:
 101 001c 6F12833A 		.word	981668463
 102              		.cfi_endproc
 103              	.LFE160:
 105              		.section	.text.Calc_Palam,"ax",%progbits
 106              		.align	1
 107              		.global	Calc_Palam
 108              		.syntax unified
 109              		.thumb
 110              		.thumb_func
 111              		.fpu fpv4-sp-d16
 113              	Calc_Palam:
 114              	.LFB161:
  41:Src/control.c **** 
  42:Src/control.c **** /****************************************************************************************
  43:Src/control.c ****  * outline  : calculate parameter
  44:Src/control.c ****  * argument : accel,*velocity,*distance
  45:Src/control.c ****  * return   : void
  46:Src/control.c **** ********************************************************************************************/
  47:Src/control.c **** void Calc_Palam(int16_t accel,int16_t *velocity,uint16_t *calc_tim){
 115              		.loc 1 47 0
 116              		.cfi_startproc
 117              		@ args = 0, pretend = 0, frame = 0
 118              		@ frame_needed = 0, uses_anonymous_args = 0
 119              		@ link register save eliminated.
 120              	.LVL11:
  48:Src/control.c ****     *calc_tim += 1;
 121              		.loc 1 48 0
 122 0000 1388     		ldrh	r3, [r2]
 123 0002 0133     		adds	r3, r3, #1
 124 0004 1380     		strh	r3, [r2]	@ movhi
  49:Src/control.c ****     *velocity += accel * dt;
 125              		.loc 1 49 0
 126 0006 07EE900A 		vmov	s15, r0	@ int
 127 000a F8EEE77A 		vcvt.f32.s32	s15, s15
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 4


 128 000e 9FED097A 		vldr.32	s14, .L8
 129 0012 27EE877A 		vmul.f32	s14, s15, s14
 130 0016 B1F90030 		ldrsh	r3, [r1]
 131 001a 07EE903A 		vmov	s15, r3	@ int
 132 001e F8EEE77A 		vcvt.f32.s32	s15, s15
 133 0022 77EE877A 		vadd.f32	s15, s15, s14
 134 0026 FDEEE77A 		vcvt.s32.f32	s15, s15
 135 002a 17EE903A 		vmov	r3, s15	@ int
 136 002e 0B80     		strh	r3, [r1]	@ movhi
  50:Src/control.c **** }
 137              		.loc 1 50 0
 138 0030 7047     		bx	lr
 139              	.L9:
 140 0032 00BF     		.align	2
 141              	.L8:
 142 0034 6F12833A 		.word	981668463
 143              		.cfi_endproc
 144              	.LFE161:
 146              		.section	.text.Straight_Calc_fb,"ax",%progbits
 147              		.align	1
 148              		.global	Straight_Calc_fb
 149              		.syntax unified
 150              		.thumb
 151              		.thumb_func
 152              		.fpu fpv4-sp-d16
 154              	Straight_Calc_fb:
 155              	.LFB162:
  51:Src/control.c **** 
  52:Src/control.c **** 
  53:Src/control.c **** /****************************************************************************************
  54:Src/control.c ****  * outline  : calcurate accele distance
  55:Src/control.c ****  * argument : distance[mm],v_start[mm/s],v_end[mm/s]
  56:Src/control.c ****  * return   : void
  57:Src/control.c **** ********************************************************************************************/
  58:Src/control.c **** void Straight_Calc_fb(int16_t distant,int16_t v_start,int16_t v_end){
 156              		.loc 1 58 0
 157              		.cfi_startproc
 158              		@ args = 0, pretend = 0, frame = 0
 159              		@ frame_needed = 0, uses_anonymous_args = 0
 160              		@ link register save eliminated.
 161              	.LVL12:
 162 0000 10B4     		push	{r4}
 163              	.LCFI0:
 164              		.cfi_def_cfa_offset 4
 165              		.cfi_offset 4, -4
  59:Src/control.c ****     float t1,t2,t3;
  60:Src/control.c ****     float constant_L;
  61:Src/control.c **** 
  62:Src/control.c ****     calc.velocity = v_start;
 166              		.loc 1 62 0
 167 0002 354B     		ldr	r3, .L15
 168 0004 9980     		strh	r1, [r3, #4]	@ movhi
  63:Src/control.c ****     enc.old_l = 0;
 169              		.loc 1 63 0
 170 0006 354C     		ldr	r4, .L15+4
 171 0008 0023     		movs	r3, #0
 172 000a 6362     		str	r3, [r4, #36]	@ float
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 5


  64:Src/control.c ****     enc.old_r = 0;
 173              		.loc 1 64 0
 174 000c A362     		str	r3, [r4, #40]	@ float
  65:Src/control.c ****     s_sum_l = 0;
 175              		.loc 1 65 0
 176 000e 344C     		ldr	r4, .L15+8
 177 0010 2360     		str	r3, [r4]	@ float
  66:Src/control.c ****     s_sum_l = 0;
  67:Src/control.c ****     flag.straight_zero = OFF;
 178              		.loc 1 67 0
 179 0012 344B     		ldr	r3, .L15+12
 180 0014 0024     		movs	r4, #0
 181 0016 DC70     		strb	r4, [r3, #3]
  68:Src/control.c **** 
  69:Src/control.c ****     if(distant<0){
 182              		.loc 1 69 0
 183 0018 0028     		cmp	r0, #0
 184              	.LVL13:
 185 001a 57DB     		blt	.L14
  70:Src/control.c ****         distant = -1*distant;
  71:Src/control.c ****         straight_dir=-1;
  72:Src/control.c ****     }else{
  73:Src/control.c ****         straight_dir=1;
 186              		.loc 1 73 0
 187 001c 324B     		ldr	r3, .L15+16
 188 001e 0124     		movs	r4, #1
 189 0020 1C70     		strb	r4, [r3]
 190              	.LVL14:
 191              	.L12:
  74:Src/control.c ****     }
  75:Src/control.c **** 
  76:Src/control.c ****     t1 = (float)(MAX_VELOCITY - v_start) / ACCEL;
 192              		.loc 1 76 0
 193 0022 C1F59673 		rsb	r3, r1, #300
 194 0026 07EE903A 		vmov	s15, r3	@ int
 195 002a F8EEE77A 		vcvt.f32.s32	s15, s15
 196 002e 9FED2F7A 		vldr.32	s14, .L15+20
 197 0032 87EE876A 		vdiv.f32	s12, s15, s14
 198              	.LVL15:
  77:Src/control.c ****     t3 = (float)(MAX_VELOCITY - v_end) / ACCEL;
 199              		.loc 1 77 0
 200 0036 C2F59672 		rsb	r2, r2, #300
 201              	.LVL16:
 202 003a 07EE902A 		vmov	s15, r2	@ int
 203 003e F8EEE77A 		vcvt.f32.s32	s15, s15
 204 0042 C7EE876A 		vdiv.f32	s13, s15, s14
 205              	.LVL17:
  78:Src/control.c **** 
  79:Src/control.c ****     constant_L = (float)distant - (MAX_VELOCITY + v_start) * t1 / 2 - (MAX_VELOCITY + v_start) * t3
 206              		.loc 1 79 0
 207 0046 07EE900A 		vmov	s15, r0	@ int
 208 004a B8EEE77A 		vcvt.f32.s32	s14, s15
 209 004e 01F59671 		add	r1, r1, #300
 210              	.LVL18:
 211 0052 07EE901A 		vmov	s15, r1	@ int
 212 0056 F8EEE77A 		vcvt.f32.s32	s15, s15
 213 005a 67EE865A 		vmul.f32	s11, s15, s12
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 6


 214 005e B6EE005A 		vmov.f32	s10, #5.0e-1
 215 0062 65EE855A 		vmul.f32	s11, s11, s10
 216 0066 37EE657A 		vsub.f32	s14, s14, s11
 217 006a 67EEA67A 		vmul.f32	s15, s15, s13
 218 006e 67EE857A 		vmul.f32	s15, s15, s10
 219 0072 77EE677A 		vsub.f32	s15, s14, s15
 220              	.LVL19:
  80:Src/control.c **** 
  81:Src/control.c ****     t2 = constant_L / MAX_VELOCITY;
 221              		.loc 1 81 0
 222 0076 DFED1E5A 		vldr.32	s11, .L15+24
 223 007a 87EEA57A 		vdiv.f32	s14, s15, s11
 224              	.LVL20:
  82:Src/control.c **** 
  83:Src/control.c ****     t1 *= 1000;
 225              		.loc 1 83 0
 226 007e DFED1D5A 		vldr.32	s11, .L15+28
 227 0082 26EE256A 		vmul.f32	s12, s12, s11
 228              	.LVL21:
  84:Src/control.c ****     t2 *= 1000;
 229              		.loc 1 84 0
 230 0086 67EE257A 		vmul.f32	s15, s14, s11
 231              	.LVL22:
  85:Src/control.c ****     t3 *= 1000;
 232              		.loc 1 85 0
 233 008a 66EEA56A 		vmul.f32	s13, s13, s11
 234              	.LVL23:
  86:Src/control.c **** 
  87:Src/control.c ****     accel_T = t1;
 235              		.loc 1 87 0
 236 008e BCEEC66A 		vcvt.u32.f32	s12, s12
 237              	.LVL24:
 238 0092 194B     		ldr	r3, .L15+32
 239              	.LVL25:
 240 0094 16EE102A 		vmov	r2, s12	@ int
 241              	.LVL26:
 242 0098 1A80     		strh	r2, [r3]	@ movhi
  88:Src/control.c ****     constant_T = t2;
 243              		.loc 1 88 0
 244 009a FCEEE77A 		vcvt.u32.f32	s15, s15
 245              	.LVL27:
 246 009e 174B     		ldr	r3, .L15+36
 247 00a0 17EE902A 		vmov	r2, s15	@ int
 248 00a4 1A80     		strh	r2, [r3]	@ movhi
  89:Src/control.c ****     decrease_T = t3;
 249              		.loc 1 89 0
 250 00a6 FCEEE66A 		vcvt.u32.f32	s13, s13
 251              	.LVL28:
 252 00aa 154B     		ldr	r3, .L15+40
 253 00ac 16EE902A 		vmov	r2, s13	@ int
 254 00b0 1A80     		strh	r2, [r3]	@ movhi
  90:Src/control.c **** 
  91:Src/control.c ****     encoder_Kp = 4.0f;
 255              		.loc 1 91 0
 256 00b2 144B     		ldr	r3, .L15+44
 257 00b4 4FF08142 		mov	r2, #1082130432
 258 00b8 1A60     		str	r2, [r3]	@ float
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 7


  92:Src/control.c ****     encoder_Ki = 10.0f;
 259              		.loc 1 92 0
 260 00ba 134B     		ldr	r3, .L15+48
 261 00bc 134A     		ldr	r2, .L15+52
 262 00be 1A60     		str	r2, [r3]	@ float
  93:Src/control.c ****     encoder_Kd = 0;
 263              		.loc 1 93 0
 264 00c0 134B     		ldr	r3, .L15+56
 265 00c2 0022     		movs	r2, #0
 266 00c4 1A60     		str	r2, [r3]	@ float
  94:Src/control.c **** }
 267              		.loc 1 94 0
 268 00c6 5DF8044B 		ldr	r4, [sp], #4
 269              	.LCFI1:
 270              		.cfi_remember_state
 271              		.cfi_restore 4
 272              		.cfi_def_cfa_offset 0
 273 00ca 7047     		bx	lr
 274              	.LVL29:
 275              	.L14:
 276              	.LCFI2:
 277              		.cfi_restore_state
  70:Src/control.c ****         straight_dir=-1;
 278              		.loc 1 70 0
 279 00cc 4042     		negs	r0, r0
 280 00ce 00B2     		sxth	r0, r0
 281              	.LVL30:
  71:Src/control.c ****     }else{
 282              		.loc 1 71 0
 283 00d0 054B     		ldr	r3, .L15+16
 284 00d2 FF24     		movs	r4, #255
 285 00d4 1C70     		strb	r4, [r3]
 286 00d6 A4E7     		b	.L12
 287              	.L16:
 288              		.align	2
 289              	.L15:
 290 00d8 00000000 		.word	calc
 291 00dc 00000000 		.word	enc
 292 00e0 00000000 		.word	s_sum_l
 293 00e4 00000000 		.word	flag
 294 00e8 00000000 		.word	straight_dir
 295 00ec 00007A45 		.word	1165623296
 296 00f0 00009643 		.word	1133903872
 297 00f4 00007A44 		.word	1148846080
 298 00f8 00000000 		.word	accel_T
 299 00fc 00000000 		.word	constant_T
 300 0100 00000000 		.word	decrease_T
 301 0104 00000000 		.word	.LANCHOR0
 302 0108 00000000 		.word	.LANCHOR1
 303 010c 00002041 		.word	1092616192
 304 0110 00000000 		.word	.LANCHOR2
 305              		.cfi_endproc
 306              	.LFE162:
 308              		.section	.text.Straight_Calc_Zero,"ax",%progbits
 309              		.align	1
 310              		.global	Straight_Calc_Zero
 311              		.syntax unified
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 8


 312              		.thumb
 313              		.thumb_func
 314              		.fpu fpv4-sp-d16
 316              	Straight_Calc_Zero:
 317              	.LFB163:
  95:Src/control.c **** 
  96:Src/control.c **** void Straight_Calc_Zero(void){
 318              		.loc 1 96 0
 319              		.cfi_startproc
 320              		@ args = 0, pretend = 0, frame = 0
 321              		@ frame_needed = 0, uses_anonymous_args = 0
 322              		@ link register save eliminated.
  97:Src/control.c ****     flag.straight_zero=ON;
 323              		.loc 1 97 0
 324 0000 064B     		ldr	r3, .L18
 325 0002 0122     		movs	r2, #1
 326 0004 DA70     		strb	r2, [r3, #3]
  98:Src/control.c ****     encoder_Kp = 4.0;  //4.0
 327              		.loc 1 98 0
 328 0006 064B     		ldr	r3, .L18+4
 329 0008 4FF08142 		mov	r2, #1082130432
 330 000c 1A60     		str	r2, [r3]	@ float
  99:Src/control.c ****     encoder_Ki = 10.0;
 331              		.loc 1 99 0
 332 000e 054B     		ldr	r3, .L18+8
 333 0010 054A     		ldr	r2, .L18+12
 334 0012 1A60     		str	r2, [r3]	@ float
 100:Src/control.c ****     encoder_Kd = 0;
 335              		.loc 1 100 0
 336 0014 054B     		ldr	r3, .L18+16
 337 0016 0022     		movs	r2, #0
 338 0018 1A60     		str	r2, [r3]	@ float
 101:Src/control.c **** }
 339              		.loc 1 101 0
 340 001a 7047     		bx	lr
 341              	.L19:
 342              		.align	2
 343              	.L18:
 344 001c 00000000 		.word	flag
 345 0020 00000000 		.word	.LANCHOR0
 346 0024 00000000 		.word	.LANCHOR1
 347 0028 00002041 		.word	1092616192
 348 002c 00000000 		.word	.LANCHOR2
 349              		.cfi_endproc
 350              	.LFE163:
 352              		.section	.text.Straight_SysTic_fb,"ax",%progbits
 353              		.align	1
 354              		.global	Straight_SysTic_fb
 355              		.syntax unified
 356              		.thumb
 357              		.thumb_func
 358              		.fpu fpv4-sp-d16
 360              	Straight_SysTic_fb:
 361              	.LFB164:
 102:Src/control.c **** 
 103:Src/control.c **** /****************************************************************************************
 104:Src/control.c ****  * outline  : output pwm for trapezoid accele straight by feadbuck control
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 9


 105:Src/control.c ****  * argument : void
 106:Src/control.c ****  * return   : void
 107:Src/control.c **** ********************************************************************************************/
 108:Src/control.c **** void Straight_SysTic_fb(void){
 362              		.loc 1 108 0
 363              		.cfi_startproc
 364              		@ args = 0, pretend = 0, frame = 0
 365              		@ frame_needed = 0, uses_anonymous_args = 0
 366 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 367              	.LCFI3:
 368              		.cfi_def_cfa_offset 24
 369              		.cfi_offset 3, -24
 370              		.cfi_offset 4, -20
 371              		.cfi_offset 5, -16
 372              		.cfi_offset 6, -12
 373              		.cfi_offset 7, -8
 374              		.cfi_offset 14, -4
 375 0002 2DED048B 		vpush.64	{d8, d9}
 376              	.LCFI4:
 377              		.cfi_def_cfa_offset 40
 378              		.cfi_offset 80, -40
 379              		.cfi_offset 81, -36
 380              		.cfi_offset 82, -32
 381              		.cfi_offset 83, -28
 382              	.LVL31:
 109:Src/control.c ****     float encoder_l,encoder_r;
 110:Src/control.c ****     float target = 1;
 111:Src/control.c ****     if(flag.straight_zero == ON){
 383              		.loc 1 111 0
 384 0006 474B     		ldr	r3, .L31
 385 0008 DB78     		ldrb	r3, [r3, #3]	@ zero_extendqisi2
 386 000a DBB2     		uxtb	r3, r3
 387 000c 012B     		cmp	r3, #1
 388 000e 23D0     		beq	.L27
 112:Src/control.c ****         encoder_l = enc.velocity_c;
 113:Src/control.c ****         encoder_r = enc.velocity_c;
 114:Src/control.c ****         calc.velocity = 0;
 115:Src/control.c ****     }
 116:Src/control.c ****     else if(straight_cnt < accel_T){
 389              		.loc 1 116 0
 390 0010 454B     		ldr	r3, .L31+4
 391 0012 1A88     		ldrh	r2, [r3]
 392 0014 454B     		ldr	r3, .L31+8
 393 0016 1B88     		ldrh	r3, [r3]
 394 0018 9A42     		cmp	r2, r3
 395 001a 60D3     		bcc	.L28
 117:Src/control.c ****         encoder_l = enc.velocity_l;
 118:Src/control.c ****         encoder_r = enc.velocity_r;
 119:Src/control.c ****         Calc_Palam(ACCEL,&calc.velocity,&straight_cnt);
 120:Src/control.c ****     }
 121:Src/control.c ****     else if(straight_cnt < constant_T + accel_T){
 396              		.loc 1 121 0
 397 001c 4449     		ldr	r1, .L31+12
 398 001e 0888     		ldrh	r0, [r1]
 399 0020 C118     		adds	r1, r0, r3
 400 0022 8A42     		cmp	r2, r1
 401 0024 67DB     		blt	.L29
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 10


 122:Src/control.c ****         encoder_l = enc.velocity_l;
 123:Src/control.c ****         encoder_r = enc.velocity_r;
 124:Src/control.c ****         Calc_Palam(0,&calc.velocity,&straight_cnt);
 125:Src/control.c ****     }
 126:Src/control.c ****     else if(straight_cnt < decrease_T + constant_T + accel_T){
 402              		.loc 1 126 0
 403 0026 4349     		ldr	r1, .L31+16
 404 0028 0988     		ldrh	r1, [r1]
 405 002a 0144     		add	r1, r1, r0
 406 002c 0B44     		add	r3, r3, r1
 407 002e 9A42     		cmp	r2, r3
 408 0030 6CDB     		blt	.L30
 127:Src/control.c ****         encoder_l = enc.velocity_l;
 128:Src/control.c ****         encoder_r = enc.velocity_r;
 129:Src/control.c ****         Calc_Palam(-ACCEL,&calc.velocity,&straight_cnt);
 130:Src/control.c ****     }else{
 131:Src/control.c ****         encoder_l = enc.velocity_l;
 409              		.loc 1 131 0
 410 0032 414B     		ldr	r3, .L31+20
 411 0034 D3ED048A 		vldr.32	s17, [r3, #16]
 412              	.LVL32:
 132:Src/control.c ****         encoder_r = enc.velocity_r;
 413              		.loc 1 132 0
 414 0038 93ED059A 		vldr.32	s18, [r3, #20]
 415              	.LVL33:
 133:Src/control.c ****         calc.velocity = 0;
 416              		.loc 1 133 0
 417 003c 3F4A     		ldr	r2, .L31+24
 418 003e 0021     		movs	r1, #0
 419 0040 9180     		strh	r1, [r2, #4]	@ movhi
 134:Src/control.c ****         if(enc.velocity_c==0){
 420              		.loc 1 134 0
 421 0042 D3ED067A 		vldr.32	s15, [r3, #24]
 422 0046 F5EE407A 		vcmp.f32	s15, #0
 423 004a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 424 004e 0BD1     		bne	.L22
 135:Src/control.c ****             flag.straight = OFF;
 425              		.loc 1 135 0
 426 0050 344B     		ldr	r3, .L31
 427 0052 5970     		strb	r1, [r3, #1]
 136:Src/control.c ****             flag.yawrate = OFF;
 428              		.loc 1 136 0
 429 0054 9970     		strb	r1, [r3, #2]
 430 0056 07E0     		b	.L22
 431              	.LVL34:
 432              	.L27:
 112:Src/control.c ****         encoder_r = enc.velocity_c;
 433              		.loc 1 112 0
 434 0058 374B     		ldr	r3, .L31+20
 435 005a D3ED068A 		vldr.32	s17, [r3, #24]
 436              	.LVL35:
 114:Src/control.c ****     }
 437              		.loc 1 114 0
 438 005e 374B     		ldr	r3, .L31+24
 439 0060 0022     		movs	r2, #0
 440 0062 9A80     		strh	r2, [r3, #4]	@ movhi
 113:Src/control.c ****         calc.velocity = 0;
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 11


 441              		.loc 1 113 0
 442 0064 B0EE689A 		vmov.f32	s18, s17
 443              	.LVL36:
 444              	.L22:
 137:Src/control.c ****         }
 138:Src/control.c ****         //flag.wall = OFF;
 139:Src/control.c ****     }
 140:Src/control.c **** 
 141:Src/control.c ****     target = straight_dir * calc.velocity;
 445              		.loc 1 141 0
 446 0068 344B     		ldr	r3, .L31+24
 447 006a B3F90430 		ldrsh	r3, [r3, #4]
 448 006e 344A     		ldr	r2, .L31+28
 449 0070 92F90020 		ldrsb	r2, [r2]
 450 0074 03FB02F3 		mul	r3, r3, r2
 451 0078 07EE903A 		vmov	s15, r3	@ int
 452 007c B8EEE78A 		vcvt.f32.s32	s16, s15
 453              	.LVL37:
 142:Src/control.c ****     
 143:Src/control.c ****     straight_pid_l = (int16_t)PID_value(target,encoder_l,&s_sum_l,&enc.old_l,encoder_Kp,encoder_Ki,
 454              		.loc 1 143 0
 455 0080 304F     		ldr	r7, .L31+32
 456 0082 314E     		ldr	r6, .L31+36
 457 0084 314D     		ldr	r5, .L31+40
 458 0086 324C     		ldr	r4, .L31+44
 459 0088 97ED002A 		vldr.32	s4, [r7]
 460 008c D6ED001A 		vldr.32	s3, [r6]
 461 0090 95ED001A 		vldr.32	s2, [r5]
 462 0094 2146     		mov	r1, r4
 463 0096 2F48     		ldr	r0, .L31+48
 464 0098 F0EE680A 		vmov.f32	s1, s17
 465 009c B0EE480A 		vmov.f32	s0, s16
 466 00a0 FFF7FEFF 		bl	PID_value
 467              	.LVL38:
 468 00a4 BDEEC00A 		vcvt.s32.f32	s0, s0
 469 00a8 2B4B     		ldr	r3, .L31+52
 470 00aa 10EE102A 		vmov	r2, s0	@ int
 471 00ae 1A80     		strh	r2, [r3]	@ movhi
 144:Src/control.c ****     straight_pid_r = (int16_t)PID_value(target,encoder_r,&s_sum_r,&enc.old_r,encoder_Kp,encoder_Ki,
 472              		.loc 1 144 0
 473 00b0 97ED002A 		vldr.32	s4, [r7]
 474 00b4 D6ED001A 		vldr.32	s3, [r6]
 475 00b8 95ED001A 		vldr.32	s2, [r5]
 476 00bc 211D     		adds	r1, r4, #4
 477 00be 2748     		ldr	r0, .L31+56
 478 00c0 F0EE490A 		vmov.f32	s1, s18
 479 00c4 B0EE480A 		vmov.f32	s0, s16
 480 00c8 FFF7FEFF 		bl	PID_value
 481              	.LVL39:
 482 00cc BDEEC00A 		vcvt.s32.f32	s0, s0
 483 00d0 234B     		ldr	r3, .L31+60
 484 00d2 10EE102A 		vmov	r2, s0	@ int
 485 00d6 1A80     		strh	r2, [r3]	@ movhi
 145:Src/control.c **** }
 486              		.loc 1 145 0
 487 00d8 BDEC048B 		vldm	sp!, {d8-d9}
 488              	.LCFI5:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 12


 489              		.cfi_remember_state
 490              		.cfi_restore 82
 491              		.cfi_restore 83
 492              		.cfi_restore 80
 493              		.cfi_restore 81
 494              		.cfi_def_cfa_offset 24
 495              	.LVL40:
 496 00dc F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 497              	.LVL41:
 498              	.L28:
 499              	.LCFI6:
 500              		.cfi_restore_state
 117:Src/control.c ****         encoder_r = enc.velocity_r;
 501              		.loc 1 117 0
 502 00de 164B     		ldr	r3, .L31+20
 503 00e0 D3ED048A 		vldr.32	s17, [r3, #16]
 504              	.LVL42:
 118:Src/control.c ****         Calc_Palam(ACCEL,&calc.velocity,&straight_cnt);
 505              		.loc 1 118 0
 506 00e4 93ED059A 		vldr.32	s18, [r3, #20]
 507              	.LVL43:
 119:Src/control.c ****     }
 508              		.loc 1 119 0
 509 00e8 0F4A     		ldr	r2, .L31+4
 510 00ea 1E49     		ldr	r1, .L31+64
 511 00ec 4FF47A60 		mov	r0, #4000
 512 00f0 FFF7FEFF 		bl	Calc_Palam
 513              	.LVL44:
 514 00f4 B8E7     		b	.L22
 515              	.LVL45:
 516              	.L29:
 122:Src/control.c ****         encoder_r = enc.velocity_r;
 517              		.loc 1 122 0
 518 00f6 104B     		ldr	r3, .L31+20
 519 00f8 D3ED048A 		vldr.32	s17, [r3, #16]
 520              	.LVL46:
 123:Src/control.c ****         Calc_Palam(0,&calc.velocity,&straight_cnt);
 521              		.loc 1 123 0
 522 00fc 93ED059A 		vldr.32	s18, [r3, #20]
 523              	.LVL47:
 124:Src/control.c ****     }
 524              		.loc 1 124 0
 525 0100 094A     		ldr	r2, .L31+4
 526 0102 1849     		ldr	r1, .L31+64
 527 0104 0020     		movs	r0, #0
 528 0106 FFF7FEFF 		bl	Calc_Palam
 529              	.LVL48:
 530 010a ADE7     		b	.L22
 531              	.LVL49:
 532              	.L30:
 127:Src/control.c ****         encoder_r = enc.velocity_r;
 533              		.loc 1 127 0
 534 010c 0A4B     		ldr	r3, .L31+20
 535 010e D3ED048A 		vldr.32	s17, [r3, #16]
 536              	.LVL50:
 128:Src/control.c ****         Calc_Palam(-ACCEL,&calc.velocity,&straight_cnt);
 537              		.loc 1 128 0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 13


 538 0112 93ED059A 		vldr.32	s18, [r3, #20]
 539              	.LVL51:
 129:Src/control.c ****     }else{
 540              		.loc 1 129 0
 541 0116 044A     		ldr	r2, .L31+4
 542 0118 1249     		ldr	r1, .L31+64
 543 011a 1348     		ldr	r0, .L31+68
 544 011c FFF7FEFF 		bl	Calc_Palam
 545              	.LVL52:
 546 0120 A2E7     		b	.L22
 547              	.L32:
 548 0122 00BF     		.align	2
 549              	.L31:
 550 0124 00000000 		.word	flag
 551 0128 00000000 		.word	straight_cnt
 552 012c 00000000 		.word	accel_T
 553 0130 00000000 		.word	constant_T
 554 0134 00000000 		.word	decrease_T
 555 0138 00000000 		.word	enc
 556 013c 00000000 		.word	calc
 557 0140 00000000 		.word	straight_dir
 558 0144 00000000 		.word	.LANCHOR2
 559 0148 00000000 		.word	.LANCHOR1
 560 014c 00000000 		.word	.LANCHOR0
 561 0150 24000000 		.word	enc+36
 562 0154 00000000 		.word	s_sum_l
 563 0158 00000000 		.word	straight_pid_l
 564 015c 00000000 		.word	s_sum_r
 565 0160 00000000 		.word	straight_pid_r
 566 0164 04000000 		.word	calc+4
 567 0168 60F0FFFF 		.word	-4000
 568              		.cfi_endproc
 569              	.LFE164:
 571              		.section	.text.Yawrate_Calc_fb,"ax",%progbits
 572              		.align	1
 573              		.global	Yawrate_Calc_fb
 574              		.syntax unified
 575              		.thumb
 576              		.thumb_func
 577              		.fpu fpv4-sp-d16
 579              	Yawrate_Calc_fb:
 580              	.LFB165:
 146:Src/control.c **** 
 147:Src/control.c **** 
 148:Src/control.c **** /****************************************************************************************
 149:Src/control.c ****  * outline  : calcurate trapezoid accel
 150:Src/control.c ****  * argument : degree[degree],v_start[degree/s],v_end[degree/s]
 151:Src/control.c ****  * return   : void
 152:Src/control.c **** ********************************************************************************************/
 153:Src/control.c **** void Yawrate_Calc_fb(int16_t degree,int16_t v_start,int16_t v_end){
 581              		.loc 1 153 0
 582              		.cfi_startproc
 583              		@ args = 0, pretend = 0, frame = 0
 584              		@ frame_needed = 0, uses_anonymous_args = 0
 585              		@ link register save eliminated.
 586              	.LVL53:
 587 0000 10B4     		push	{r4}
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 14


 588              	.LCFI7:
 589              		.cfi_def_cfa_offset 4
 590              		.cfi_offset 4, -4
 154:Src/control.c ****     calc.yawrate_velocity = v_start;
 591              		.loc 1 154 0
 592 0002 2D4B     		ldr	r3, .L35
 593 0004 9981     		strh	r1, [r3, #12]	@ movhi
 155:Src/control.c ****     y_sum = 0;
 594              		.loc 1 155 0
 595 0006 0023     		movs	r3, #0
 596 0008 2C4C     		ldr	r4, .L35+4
 597 000a 2360     		str	r3, [r4]	@ float
 156:Src/control.c ****     gyro.befor = 0;
 598              		.loc 1 156 0
 599 000c 2C4C     		ldr	r4, .L35+8
 600 000e A360     		str	r3, [r4, #8]	@ float
 157:Src/control.c ****     flag.yawrate_zero = OFF;
 601              		.loc 1 157 0
 602 0010 2C4B     		ldr	r3, .L35+12
 603 0012 0024     		movs	r4, #0
 604 0014 1C71     		strb	r4, [r3, #4]
 605              	.LVL54:
 158:Src/control.c **** 
 159:Src/control.c ****     float t1=0,t2=0,t3=0;
 160:Src/control.c ****     float constant_L;
 161:Src/control.c **** 
 162:Src/control.c ****     t1 = (float)(Y_MAX_VELOCITY - v_start) / Y_ACCEL;
 606              		.loc 1 162 0
 607 0016 C1F5BE73 		rsb	r3, r1, #380
 608 001a 07EE903A 		vmov	s15, r3	@ int
 609 001e F8EEE77A 		vcvt.f32.s32	s15, s15
 610 0022 9FED297A 		vldr.32	s14, .L35+16
 611 0026 87EE876A 		vdiv.f32	s12, s15, s14
 612              	.LVL55:
 163:Src/control.c ****     t3 = (float)(Y_MAX_VELOCITY - v_end) / Y_ACCEL;
 613              		.loc 1 163 0
 614 002a C2F5BE73 		rsb	r3, r2, #380
 615 002e 07EE903A 		vmov	s15, r3	@ int
 616 0032 F8EEE77A 		vcvt.f32.s32	s15, s15
 617 0036 C7EE876A 		vdiv.f32	s13, s15, s14
 618              	.LVL56:
 164:Src/control.c **** 
 165:Src/control.c ****     constant_L = (float)degree - (Y_MAX_VELOCITY + v_start) * t1 / 2 - (Y_MAX_VELOCITY + v_end) * t
 619              		.loc 1 165 0
 620 003a 07EE900A 		vmov	s15, r0	@ int
 621 003e B8EEE77A 		vcvt.f32.s32	s14, s15
 622 0042 01F5BE73 		add	r3, r1, #380
 623 0046 07EE903A 		vmov	s15, r3	@ int
 624 004a F8EEE77A 		vcvt.f32.s32	s15, s15
 625 004e 67EE867A 		vmul.f32	s15, s15, s12
 626 0052 F6EE005A 		vmov.f32	s11, #5.0e-1
 627 0056 67EEA57A 		vmul.f32	s15, s15, s11
 628 005a 77EE677A 		vsub.f32	s15, s14, s15
 629 005e 02F5BE73 		add	r3, r2, #380
 630 0062 07EE103A 		vmov	s14, r3	@ int
 631 0066 B8EEC77A 		vcvt.f32.s32	s14, s14
 632 006a 27EE267A 		vmul.f32	s14, s14, s13
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 15


 633 006e 27EE257A 		vmul.f32	s14, s14, s11
 634 0072 37EEC77A 		vsub.f32	s14, s15, s14
 635              	.LVL57:
 166:Src/control.c ****     
 167:Src/control.c ****     t2 = constant_L / Y_MAX_VELOCITY;
 636              		.loc 1 167 0
 637 0076 DFED155A 		vldr.32	s11, .L35+20
 638 007a C7EE257A 		vdiv.f32	s15, s14, s11
 639              	.LVL58:
 168:Src/control.c **** 
 169:Src/control.c ****     t1 *= 1000;
 640              		.loc 1 169 0
 641 007e 9FED147A 		vldr.32	s14, .L35+24
 642              	.LVL59:
 643 0082 26EE076A 		vmul.f32	s12, s12, s14
 644              	.LVL60:
 170:Src/control.c ****     t2 *= 1000;
 645              		.loc 1 170 0
 646 0086 67EE877A 		vmul.f32	s15, s15, s14
 647              	.LVL61:
 171:Src/control.c ****     t3 *= 1000;
 648              		.loc 1 171 0
 649 008a 66EE876A 		vmul.f32	s13, s13, s14
 650              	.LVL62:
 172:Src/control.c **** 
 173:Src/control.c ****     y_accel_T = t1;
 651              		.loc 1 173 0
 652 008e BCEEC66A 		vcvt.u32.f32	s12, s12
 653              	.LVL63:
 654 0092 104B     		ldr	r3, .L35+28
 655              	.LVL64:
 656 0094 16EE102A 		vmov	r2, s12	@ int
 657              	.LVL65:
 658 0098 1A80     		strh	r2, [r3]	@ movhi
 174:Src/control.c ****     y_constant_T = t2;
 659              		.loc 1 174 0
 660 009a FCEEE77A 		vcvt.u32.f32	s15, s15
 661              	.LVL66:
 662 009e 0E4B     		ldr	r3, .L35+32
 663 00a0 17EE902A 		vmov	r2, s15	@ int
 664 00a4 1A80     		strh	r2, [r3]	@ movhi
 175:Src/control.c ****     y_decrease_T = t3;
 665              		.loc 1 175 0
 666 00a6 FCEEE66A 		vcvt.u32.f32	s13, s13
 667              	.LVL67:
 668 00aa 0C4B     		ldr	r3, .L35+36
 669 00ac 16EE902A 		vmov	r2, s13	@ int
 670 00b0 1A80     		strh	r2, [r3]	@ movhi
 176:Src/control.c **** }
 671              		.loc 1 176 0
 672 00b2 5DF8044B 		ldr	r4, [sp], #4
 673              	.LCFI8:
 674              		.cfi_restore 4
 675              		.cfi_def_cfa_offset 0
 676 00b6 7047     		bx	lr
 677              	.L36:
 678              		.align	2
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 16


 679              	.L35:
 680 00b8 00000000 		.word	calc
 681 00bc 00000000 		.word	y_sum
 682 00c0 00000000 		.word	gyro
 683 00c4 00000000 		.word	flag
 684 00c8 0000FA44 		.word	1157234688
 685 00cc 0000BE43 		.word	1136525312
 686 00d0 00007A44 		.word	1148846080
 687 00d4 00000000 		.word	y_accel_T
 688 00d8 00000000 		.word	y_constant_T
 689 00dc 00000000 		.word	y_decrease_T
 690              		.cfi_endproc
 691              	.LFE165:
 693              		.section	.text.Yawrate_Calc_Zero,"ax",%progbits
 694              		.align	1
 695              		.global	Yawrate_Calc_Zero
 696              		.syntax unified
 697              		.thumb
 698              		.thumb_func
 699              		.fpu fpv4-sp-d16
 701              	Yawrate_Calc_Zero:
 702              	.LFB166:
 177:Src/control.c **** 
 178:Src/control.c **** void Yawrate_Calc_Zero(void){
 703              		.loc 1 178 0
 704              		.cfi_startproc
 705              		@ args = 0, pretend = 0, frame = 0
 706              		@ frame_needed = 0, uses_anonymous_args = 0
 707              		@ link register save eliminated.
 179:Src/control.c ****     flag.yawrate_zero=ON;
 708              		.loc 1 179 0
 709 0000 014B     		ldr	r3, .L38
 710 0002 0122     		movs	r2, #1
 711 0004 1A71     		strb	r2, [r3, #4]
 180:Src/control.c **** }
 712              		.loc 1 180 0
 713 0006 7047     		bx	lr
 714              	.L39:
 715              		.align	2
 716              	.L38:
 717 0008 00000000 		.word	flag
 718              		.cfi_endproc
 719              	.LFE166:
 721              		.section	.text.Yawrate_SysTic_fb,"ax",%progbits
 722              		.align	1
 723              		.global	Yawrate_SysTic_fb
 724              		.syntax unified
 725              		.thumb
 726              		.thumb_func
 727              		.fpu fpv4-sp-d16
 729              	Yawrate_SysTic_fb:
 730              	.LFB167:
 181:Src/control.c **** 
 182:Src/control.c **** /****************************************************************************************
 183:Src/control.c ****  * outline  : call 1ms (control yawrate by feadbuck)
 184:Src/control.c ****  * argument : void
 185:Src/control.c ****  * return   : void
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 17


 186:Src/control.c **** ********************************************************************************************/
 187:Src/control.c **** void Yawrate_SysTic_fb(void){
 731              		.loc 1 187 0
 732              		.cfi_startproc
 733              		@ args = 0, pretend = 0, frame = 0
 734              		@ frame_needed = 0, uses_anonymous_args = 0
 735 0000 08B5     		push	{r3, lr}
 736              	.LCFI9:
 737              		.cfi_def_cfa_offset 8
 738              		.cfi_offset 3, -8
 739              		.cfi_offset 14, -4
 188:Src/control.c ****     if(flag.yawrate_zero==ON){
 740              		.loc 1 188 0
 741 0002 2B4B     		ldr	r3, .L51
 742 0004 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 743 0006 DBB2     		uxtb	r3, r3
 744 0008 012B     		cmp	r3, #1
 745 000a 17D0     		beq	.L47
 189:Src/control.c ****         calc.yawrate_velocity = 0;
 190:Src/control.c ****     }
 191:Src/control.c ****     else if(yawrate_cnt < y_accel_T){
 746              		.loc 1 191 0
 747 000c 294B     		ldr	r3, .L51+4
 748 000e 1A88     		ldrh	r2, [r3]
 749 0010 294B     		ldr	r3, .L51+8
 750 0012 1B88     		ldrh	r3, [r3]
 751 0014 9A42     		cmp	r2, r3
 752 0016 38D3     		bcc	.L48
 192:Src/control.c ****         Calc_Palam(Y_ACCEL,&calc.yawrate_velocity,&yawrate_cnt);
 193:Src/control.c ****     }else if(yawrate_cnt < y_constant_T + y_accel_T){
 753              		.loc 1 193 0
 754 0018 2849     		ldr	r1, .L51+12
 755 001a 0888     		ldrh	r0, [r1]
 756 001c C118     		adds	r1, r0, r3
 757 001e 8A42     		cmp	r2, r1
 758 0020 3ADB     		blt	.L49
 194:Src/control.c ****         Calc_Palam(0,&calc.yawrate_velocity,&yawrate_cnt);
 195:Src/control.c ****     }else if(yawrate_cnt < y_decrease_T + y_constant_T + y_accel_T){
 759              		.loc 1 195 0
 760 0022 2749     		ldr	r1, .L51+16
 761 0024 0988     		ldrh	r1, [r1]
 762 0026 0144     		add	r1, r1, r0
 763 0028 0B44     		add	r3, r3, r1
 764 002a 9A42     		cmp	r2, r3
 765 002c 3ADB     		blt	.L50
 196:Src/control.c ****         Calc_Palam(-Y_ACCEL,&calc.yawrate_velocity,&yawrate_cnt);
 197:Src/control.c ****     }else{
 198:Src/control.c ****         calc.yawrate_velocity = 0;
 766              		.loc 1 198 0
 767 002e 0023     		movs	r3, #0
 768 0030 244A     		ldr	r2, .L51+20
 769 0032 9381     		strh	r3, [r2, #12]	@ movhi
 199:Src/control.c ****         //if(gyro.velocity==0){
 200:Src/control.c ****             flag.yawrate = OFF;
 770              		.loc 1 200 0
 771 0034 1E4A     		ldr	r2, .L51
 772 0036 9370     		strb	r3, [r2, #2]
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 18


 201:Src/control.c ****             flag.straight = OFF;
 773              		.loc 1 201 0
 774 0038 5370     		strb	r3, [r2, #1]
 775 003a 02E0     		b	.L42
 776              	.L47:
 189:Src/control.c ****     }
 777              		.loc 1 189 0
 778 003c 214B     		ldr	r3, .L51+20
 779 003e 0022     		movs	r2, #0
 780 0040 9A81     		strh	r2, [r3, #12]	@ movhi
 781              	.L42:
 202:Src/control.c ****         //}
 203:Src/control.c ****     }
 204:Src/control.c ****     yawrate_pid = (int16_t)PID_value((float)flag.dir * calc.yawrate_velocity,gyro.velocity,&y_sum,&
 782              		.loc 1 204 0
 783 0042 1B4B     		ldr	r3, .L51
 784 0044 1B89     		ldrh	r3, [r3, #8]
 785 0046 1BB2     		sxth	r3, r3
 786 0048 07EE903A 		vmov	s15, r3	@ int
 787 004c F8EEE77A 		vcvt.f32.s32	s15, s15
 788 0050 1C4B     		ldr	r3, .L51+20
 789 0052 B3F90C30 		ldrsh	r3, [r3, #12]
 790 0056 00EE103A 		vmov	s0, r3	@ int
 791 005a 1B4B     		ldr	r3, .L51+24
 792 005c B8EEC00A 		vcvt.f32.s32	s0, s0
 793 0060 B1EE002A 		vmov.f32	s4, #4.0e+0
 794 0064 F2EE021A 		vmov.f32	s3, #9.0e+0
 795 0068 9FED181A 		vldr.32	s2, .L51+28
 796 006c 1946     		mov	r1, r3
 797 006e 1848     		ldr	r0, .L51+32
 798 0070 D3ED020A 		vldr.32	s1, [r3, #8]
 799 0074 20EE270A 		vmul.f32	s0, s0, s15
 800 0078 FFF7FEFF 		bl	PID_value
 801              	.LVL68:
 802 007c BDEEC00A 		vcvt.s32.f32	s0, s0
 803 0080 144B     		ldr	r3, .L51+36
 804 0082 10EE102A 		vmov	r2, s0	@ int
 805 0086 1A80     		strh	r2, [r3]	@ movhi
 205:Src/control.c **** }
 806              		.loc 1 205 0
 807 0088 08BD     		pop	{r3, pc}
 808              	.L48:
 192:Src/control.c ****     }else if(yawrate_cnt < y_constant_T + y_accel_T){
 809              		.loc 1 192 0
 810 008a 0A4A     		ldr	r2, .L51+4
 811 008c 1249     		ldr	r1, .L51+40
 812 008e 4FF4FA60 		mov	r0, #2000
 813 0092 FFF7FEFF 		bl	Calc_Palam
 814              	.LVL69:
 815 0096 D4E7     		b	.L42
 816              	.L49:
 194:Src/control.c ****     }else if(yawrate_cnt < y_decrease_T + y_constant_T + y_accel_T){
 817              		.loc 1 194 0
 818 0098 064A     		ldr	r2, .L51+4
 819 009a 0F49     		ldr	r1, .L51+40
 820 009c 0020     		movs	r0, #0
 821 009e FFF7FEFF 		bl	Calc_Palam
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 19


 822              	.LVL70:
 823 00a2 CEE7     		b	.L42
 824              	.L50:
 196:Src/control.c ****     }else{
 825              		.loc 1 196 0
 826 00a4 034A     		ldr	r2, .L51+4
 827 00a6 0C49     		ldr	r1, .L51+40
 828 00a8 0C48     		ldr	r0, .L51+44
 829 00aa FFF7FEFF 		bl	Calc_Palam
 830              	.LVL71:
 831 00ae C8E7     		b	.L42
 832              	.L52:
 833              		.align	2
 834              	.L51:
 835 00b0 00000000 		.word	flag
 836 00b4 00000000 		.word	yawrate_cnt
 837 00b8 00000000 		.word	y_accel_T
 838 00bc 00000000 		.word	y_constant_T
 839 00c0 00000000 		.word	y_decrease_T
 840 00c4 00000000 		.word	calc
 841 00c8 08000000 		.word	gyro+8
 842 00cc 1F856B3F 		.word	1064011039
 843 00d0 00000000 		.word	y_sum
 844 00d4 00000000 		.word	yawrate_pid
 845 00d8 0C000000 		.word	calc+12
 846 00dc 30F8FFFF 		.word	-2000
 847              		.cfi_endproc
 848              	.LFE167:
 850              		.section	.text.Control_Wall,"ax",%progbits
 851              		.align	1
 852              		.global	Control_Wall
 853              		.syntax unified
 854              		.thumb
 855              		.thumb_func
 856              		.fpu fpv4-sp-d16
 858              	Control_Wall:
 859              	.LFB168:
 206:Src/control.c **** void Control_Wall(void){
 860              		.loc 1 206 0
 861              		.cfi_startproc
 862              		@ args = 0, pretend = 0, frame = 0
 863              		@ frame_needed = 0, uses_anonymous_args = 0
 864              		@ link register save eliminated.
 865              	.LVL72:
 207:Src/control.c ****     int16_t wall_dif=0;
 208:Src/control.c ****     int16_t ref_l=2658;
 209:Src/control.c ****     int16_t ref_r=2789;
 210:Src/control.c ****     
 211:Src/control.c ****     /*
 212:Src/control.c ****     if(sensor.dif_l<-20 || sensor.dif_l>20){
 213:Src/control.c ****         ref_l += sensor.dif_l;
 214:Src/control.c ****     }
 215:Src/control.c ****     if(sensor.dif_r<-20 || sensor.dif_r >20){
 216:Src/control.c ****         ref_r += sensor.dif_r;
 217:Src/control.c ****     }
 218:Src/control.c ****     */
 219:Src/control.c **** 
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 20


 220:Src/control.c ****     wall_dif = (sensor.adc[2] - ref_l) - (sensor.adc[1] - ref_r);
 866              		.loc 1 220 0
 867 0000 1D49     		ldr	r1, .L60
 868 0002 8B8A     		ldrh	r3, [r1, #20]
 869 0004 A3F66222 		subw	r2, r3, #2658
 870 0008 4B8A     		ldrh	r3, [r1, #18]
 871 000a C3F52E63 		rsb	r3, r3, #2784
 872 000e 0533     		adds	r3, r3, #5
 873 0010 9BB2     		uxth	r3, r3
 874 0012 13FA82F3 		uxtah	r3, r3, r2
 875 0016 1BB2     		sxth	r3, r3
 876              	.LVL73:
 221:Src/control.c ****     if(sensor.wall[2]==true && sensor.wall[1]==true){
 877              		.loc 1 221 0
 878 0018 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 879 001a 012A     		cmp	r2, #1
 880 001c 10D0     		beq	.L59
 881              	.L54:
 222:Src/control.c ****         if(sensor.dif_l>-20 && sensor.dif_r>-20){
 223:Src/control.c ****             wall_pid = 0.2f * wall_dif;
 224:Src/control.c ****         }
 225:Src/control.c ****     }/*else if(sensor.wall[2]==true && sensor.wall[1]==false){
 226:Src/control.c ****         if(sensor.dif_l>-20 && sensor.dif_l<20 ){
 227:Src/control.c ****             wall_pid = 2*(sensor.adc[2] - ref_l);
 228:Src/control.c ****         }
 229:Src/control.c ****     }else if(sensor.wall[2]==false && sensor.wall[1]==true){
 230:Src/control.c ****         if(sensor.dif_r>-20){
 231:Src/control.c ****             wall_pid = -2 * (sensor.adc[1] - ref_r);
 232:Src/control.c ****         }
 233:Src/control.c ****     }*/else{
 234:Src/control.c ****         wall_pid=0;
 882              		.loc 1 234 0
 883 001e 174B     		ldr	r3, .L60+4
 884              	.LVL74:
 885 0020 0022     		movs	r2, #0
 886 0022 1A80     		strh	r2, [r3]	@ movhi
 887              	.L55:
 235:Src/control.c ****     }
 236:Src/control.c **** 
 237:Src/control.c ****     if(enc.velocity_c < 250.0f){
 888              		.loc 1 237 0
 889 0024 164B     		ldr	r3, .L60+8
 890 0026 93ED067A 		vldr.32	s14, [r3, #24]
 891 002a DFED167A 		vldr.32	s15, .L60+12
 892 002e B4EEE77A 		vcmpe.f32	s14, s15
 893 0032 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 894 0036 02D5     		bpl	.L53
 238:Src/control.c ****         wall_pid=0;
 895              		.loc 1 238 0
 896 0038 104B     		ldr	r3, .L60+4
 897 003a 0022     		movs	r2, #0
 898 003c 1A80     		strh	r2, [r3]	@ movhi
 899              	.L53:
 239:Src/control.c ****     }
 240:Src/control.c **** 
 241:Src/control.c **** }
 900              		.loc 1 241 0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 21


 901 003e 7047     		bx	lr
 902              	.LVL75:
 903              	.L59:
 221:Src/control.c ****         if(sensor.dif_l>-20 && sensor.dif_r>-20){
 904              		.loc 1 221 0 discriminator 1
 905 0040 CA7E     		ldrb	r2, [r1, #27]	@ zero_extendqisi2
 906 0042 012A     		cmp	r2, #1
 907 0044 EBD1     		bne	.L54
 222:Src/control.c ****             wall_pid = 0.2f * wall_dif;
 908              		.loc 1 222 0
 909 0046 B1F92C20 		ldrsh	r2, [r1, #44]
 910 004a 12F1130F 		cmn	r2, #19
 911 004e E9DB     		blt	.L55
 222:Src/control.c ****             wall_pid = 0.2f * wall_dif;
 912              		.loc 1 222 0 is_stmt 0 discriminator 1
 913 0050 B1F92E20 		ldrsh	r2, [r1, #46]
 914 0054 12F1130F 		cmn	r2, #19
 915 0058 E4DB     		blt	.L55
 223:Src/control.c ****         }
 916              		.loc 1 223 0 is_stmt 1
 917 005a 07EE903A 		vmov	s15, r3	@ int
 918 005e F8EEE77A 		vcvt.f32.s32	s15, s15
 919 0062 9FED097A 		vldr.32	s14, .L60+16
 920 0066 67EE877A 		vmul.f32	s15, s15, s14
 921 006a FDEEE77A 		vcvt.s32.f32	s15, s15
 922 006e 034B     		ldr	r3, .L60+4
 923              	.LVL76:
 924 0070 17EE902A 		vmov	r2, s15	@ int
 925 0074 1A80     		strh	r2, [r3]	@ movhi
 926 0076 D5E7     		b	.L55
 927              	.L61:
 928              		.align	2
 929              	.L60:
 930 0078 00000000 		.word	sensor
 931 007c 00000000 		.word	wall_pid
 932 0080 00000000 		.word	enc
 933 0084 00007A43 		.word	1132068864
 934 0088 CDCC4C3E 		.word	1045220557
 935              		.cfi_endproc
 936              	.LFE168:
 938              		.global	__aeabi_i2d
 939              		.global	__aeabi_dmul
 940              		.global	__aeabi_d2iz
 941              		.section	.text.Front_Wall_Control,"ax",%progbits
 942              		.align	1
 943              		.global	Front_Wall_Control
 944              		.syntax unified
 945              		.thumb
 946              		.thumb_func
 947              		.fpu fpv4-sp-d16
 949              	Front_Wall_Control:
 950              	.LFB169:
 242:Src/control.c **** 
 243:Src/control.c **** void Front_Wall_Control(void){
 951              		.loc 1 243 0
 952              		.cfi_startproc
 953              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 22


 954              		@ frame_needed = 0, uses_anonymous_args = 0
 955 0000 10B5     		push	{r4, lr}
 956              	.LCFI10:
 957              		.cfi_def_cfa_offset 8
 958              		.cfi_offset 4, -8
 959              		.cfi_offset 14, -4
 960              	.LVL77:
 244:Src/control.c ****     int16_t wall_dif_r=0;
 245:Src/control.c ****     int16_t wall_dif_l=0;
 246:Src/control.c ****     int16_t ref_fl=3065;
 247:Src/control.c ****     int16_t ref_fr=3011;
 248:Src/control.c **** 
 249:Src/control.c ****     wall_dif_r = sensor.adc[0] - ref_fl;
 961              		.loc 1 249 0
 962 0002 144B     		ldr	r3, .L67
 963 0004 188A     		ldrh	r0, [r3, #16]
 964 0006 A0F6F930 		subw	r0, r0, #3065
 965 000a 04B2     		sxth	r4, r0
 966              	.LVL78:
 250:Src/control.c ****     wall_dif_l = sensor.adc[3] - ref_fr; 
 967              		.loc 1 250 0
 968 000c D88A     		ldrh	r0, [r3, #22]
 969              	.LVL79:
 251:Src/control.c **** 
 252:Src/control.c ****     if(sensor.wall[4]==true){
 970              		.loc 1 252 0
 971 000e 9B7F     		ldrb	r3, [r3, #30]	@ zero_extendqisi2
 972 0010 012B     		cmp	r3, #1
 973 0012 05D0     		beq	.L66
 253:Src/control.c ****         fr_wall_pid_l= -0.5 * wall_dif_l;
 254:Src/control.c ****         fr_wall_pid_r= -0.5 * wall_dif_r;
 255:Src/control.c ****     }else{
 256:Src/control.c ****         fr_wall_pid_l=0;
 974              		.loc 1 256 0
 975 0014 0023     		movs	r3, #0
 976 0016 104A     		ldr	r2, .L67+4
 977 0018 1380     		strh	r3, [r2]	@ movhi
 257:Src/control.c ****         fr_wall_pid_r=0;
 978              		.loc 1 257 0
 979 001a 104A     		ldr	r2, .L67+8
 980 001c 1380     		strh	r3, [r2]	@ movhi
 981              	.LVL80:
 982              	.L62:
 258:Src/control.c ****     }
 259:Src/control.c **** }
 983              		.loc 1 259 0
 984 001e 10BD     		pop	{r4, pc}
 985              	.LVL81:
 986              	.L66:
 987 0020 A0F6C330 		subw	r0, r0, #3011
 988              	.LVL82:
 989 0024 00B2     		sxth	r0, r0
 990              	.LVL83:
 253:Src/control.c ****         fr_wall_pid_r= -0.5 * wall_dif_r;
 991              		.loc 1 253 0
 992 0026 FFF7FEFF 		bl	__aeabi_i2d
 993              	.LVL84:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 23


 994 002a 0022     		movs	r2, #0
 995 002c 0C4B     		ldr	r3, .L67+12
 996 002e FFF7FEFF 		bl	__aeabi_dmul
 997              	.LVL85:
 998 0032 FFF7FEFF 		bl	__aeabi_d2iz
 999              	.LVL86:
 1000 0036 084B     		ldr	r3, .L67+4
 1001 0038 1880     		strh	r0, [r3]	@ movhi
 254:Src/control.c ****     }else{
 1002              		.loc 1 254 0
 1003 003a 2046     		mov	r0, r4
 1004 003c FFF7FEFF 		bl	__aeabi_i2d
 1005              	.LVL87:
 1006 0040 0022     		movs	r2, #0
 1007 0042 074B     		ldr	r3, .L67+12
 1008 0044 FFF7FEFF 		bl	__aeabi_dmul
 1009              	.LVL88:
 1010 0048 FFF7FEFF 		bl	__aeabi_d2iz
 1011              	.LVL89:
 1012 004c 034B     		ldr	r3, .L67+8
 1013 004e 1880     		strh	r0, [r3]	@ movhi
 1014 0050 E5E7     		b	.L62
 1015              	.L68:
 1016 0052 00BF     		.align	2
 1017              	.L67:
 1018 0054 00000000 		.word	sensor
 1019 0058 00000000 		.word	fr_wall_pid_l
 1020 005c 00000000 		.word	fr_wall_pid_r
 1021 0060 0000E0BF 		.word	-1075838976
 1022              		.cfi_endproc
 1023              	.LFE169:
 1025              		.section	.text.Control_pwm,"ax",%progbits
 1026              		.align	1
 1027              		.global	Control_pwm
 1028              		.syntax unified
 1029              		.thumb
 1030              		.thumb_func
 1031              		.fpu fpv4-sp-d16
 1033              	Control_pwm:
 1034              	.LFB170:
 260:Src/control.c **** 
 261:Src/control.c **** void Control_pwm(void){
 1035              		.loc 1 261 0
 1036              		.cfi_startproc
 1037              		@ args = 0, pretend = 0, frame = 0
 1038              		@ frame_needed = 0, uses_anonymous_args = 0
 1039 0000 08B5     		push	{r3, lr}
 1040              	.LCFI11:
 1041              		.cfi_def_cfa_offset 8
 1042              		.cfi_offset 3, -8
 1043              		.cfi_offset 14, -4
 1044              	.LVL90:
 262:Src/control.c ****     int16_t pwm_l=0,pwm_r=0;
 263:Src/control.c **** 
 264:Src/control.c ****     if(flag.wall==ON){
 1045              		.loc 1 264 0
 1046 0002 1C4B     		ldr	r3, .L80
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 24


 1047 0004 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 1048 0006 DBB2     		uxtb	r3, r3
 1049 0008 012B     		cmp	r3, #1
 1050 000a 13D0     		beq	.L76
 262:Src/control.c ****     int16_t pwm_l=0,pwm_r=0;
 1051              		.loc 1 262 0
 1052 000c 0021     		movs	r1, #0
 1053 000e 0846     		mov	r0, r1
 1054              	.LVL91:
 1055              	.L70:
 265:Src/control.c ****         pwm_l += wall_pid;
 266:Src/control.c ****         pwm_r -= wall_pid;
 267:Src/control.c ****     }
 268:Src/control.c **** 
 269:Src/control.c ****     if(flag.fr_wall==ON){
 1056              		.loc 1 269 0
 1057 0010 184B     		ldr	r3, .L80
 1058 0012 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1059 0014 DBB2     		uxtb	r3, r3
 1060 0016 012B     		cmp	r3, #1
 1061 0018 13D0     		beq	.L77
 1062              	.L71:
 270:Src/control.c ****         pwm_l += fr_wall_pid_l;
 271:Src/control.c ****         pwm_r += fr_wall_pid_r;
 272:Src/control.c ****     }
 273:Src/control.c **** 
 274:Src/control.c ****     if(flag.straight==ON){
 1063              		.loc 1 274 0
 1064 001a 164B     		ldr	r3, .L80
 1065 001c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1066 001e DBB2     		uxtb	r3, r3
 1067 0020 012B     		cmp	r3, #1
 1068 0022 17D0     		beq	.L78
 1069              	.L72:
 275:Src/control.c ****         pwm_l += straight_pid_l;
 276:Src/control.c ****         pwm_r += straight_pid_r;
 277:Src/control.c ****     }
 278:Src/control.c ****     if(flag.yawrate==ON){
 1070              		.loc 1 278 0
 1071 0024 134B     		ldr	r3, .L80
 1072 0026 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 1073 0028 DBB2     		uxtb	r3, r3
 1074 002a 012B     		cmp	r3, #1
 1075 002c 1BD0     		beq	.L79
 1076              	.L73:
 279:Src/control.c ****         pwm_l -= yawrate_pid;
 280:Src/control.c ****         pwm_r += yawrate_pid;
 281:Src/control.c ****     }
 282:Src/control.c ****     Motor_pwm(pwm_l,pwm_r);
 1077              		.loc 1 282 0
 1078 002e FFF7FEFF 		bl	Motor_pwm
 1079              	.LVL92:
 283:Src/control.c **** }
 1080              		.loc 1 283 0
 1081 0032 08BD     		pop	{r3, pc}
 1082              	.LVL93:
 1083              	.L76:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 25


 265:Src/control.c ****         pwm_r -= wall_pid;
 1084              		.loc 1 265 0
 1085 0034 104B     		ldr	r3, .L80+4
 1086 0036 B3F90000 		ldrsh	r0, [r3]
 1087 003a 81B2     		uxth	r1, r0
 1088              	.LVL94:
 266:Src/control.c ****     }
 1089              		.loc 1 266 0
 1090 003c 4942     		negs	r1, r1
 1091 003e 09B2     		sxth	r1, r1
 1092              	.LVL95:
 1093 0040 E6E7     		b	.L70
 1094              	.L77:
 270:Src/control.c ****         pwm_r += fr_wall_pid_r;
 1095              		.loc 1 270 0
 1096 0042 0E4B     		ldr	r3, .L80+8
 1097 0044 1B88     		ldrh	r3, [r3]
 1098 0046 1844     		add	r0, r0, r3
 1099              	.LVL96:
 1100 0048 00B2     		sxth	r0, r0
 1101              	.LVL97:
 271:Src/control.c ****     }
 1102              		.loc 1 271 0
 1103 004a 0D4B     		ldr	r3, .L80+12
 1104 004c 1B88     		ldrh	r3, [r3]
 1105 004e 1944     		add	r1, r1, r3
 1106              	.LVL98:
 1107 0050 09B2     		sxth	r1, r1
 1108              	.LVL99:
 1109 0052 E2E7     		b	.L71
 1110              	.L78:
 275:Src/control.c ****         pwm_r += straight_pid_r;
 1111              		.loc 1 275 0
 1112 0054 0B4B     		ldr	r3, .L80+16
 1113 0056 1B88     		ldrh	r3, [r3]
 1114 0058 1844     		add	r0, r0, r3
 1115              	.LVL100:
 1116 005a 00B2     		sxth	r0, r0
 1117              	.LVL101:
 276:Src/control.c ****     }
 1118              		.loc 1 276 0
 1119 005c 0A4B     		ldr	r3, .L80+20
 1120 005e 1B88     		ldrh	r3, [r3]
 1121 0060 1944     		add	r1, r1, r3
 1122              	.LVL102:
 1123 0062 09B2     		sxth	r1, r1
 1124              	.LVL103:
 1125 0064 DEE7     		b	.L72
 1126              	.L79:
 279:Src/control.c ****         pwm_r += yawrate_pid;
 1127              		.loc 1 279 0
 1128 0066 094B     		ldr	r3, .L80+24
 1129 0068 1B88     		ldrh	r3, [r3]
 1130 006a C01A     		subs	r0, r0, r3
 1131              	.LVL104:
 1132 006c 00B2     		sxth	r0, r0
 1133              	.LVL105:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 26


 280:Src/control.c ****     }
 1134              		.loc 1 280 0
 1135 006e 1944     		add	r1, r1, r3
 1136              	.LVL106:
 1137 0070 09B2     		sxth	r1, r1
 1138              	.LVL107:
 1139 0072 DCE7     		b	.L73
 1140              	.L81:
 1141              		.align	2
 1142              	.L80:
 1143 0074 00000000 		.word	flag
 1144 0078 00000000 		.word	wall_pid
 1145 007c 00000000 		.word	fr_wall_pid_l
 1146 0080 00000000 		.word	fr_wall_pid_r
 1147 0084 00000000 		.word	straight_pid_l
 1148 0088 00000000 		.word	straight_pid_r
 1149 008c 00000000 		.word	yawrate_pid
 1150              		.cfi_endproc
 1151              	.LFE170:
 1153              		.section	.text.Output_Buzzer,"ax",%progbits
 1154              		.align	1
 1155              		.global	Output_Buzzer
 1156              		.syntax unified
 1157              		.thumb
 1158              		.thumb_func
 1159              		.fpu fpv4-sp-d16
 1161              	Output_Buzzer:
 1162              	.LFB171:
 284:Src/control.c **** /****************************************************************************************
 285:Src/control.c ****  * outline  : turn on buzzer 0.3sec
 286:Src/control.c ****  * argument : Hz
 287:Src/control.c ****  * return   : void
 288:Src/control.c **** ********************************************************************************************/
 289:Src/control.c **** void Output_Buzzer(uint8_t Hz){
 1163              		.loc 1 289 0
 1164              		.cfi_startproc
 1165              		@ args = 0, pretend = 0, frame = 0
 1166              		@ frame_needed = 0, uses_anonymous_args = 0
 1167              	.LVL108:
 1168 0000 08B5     		push	{r3, lr}
 1169              	.LCFI12:
 1170              		.cfi_def_cfa_offset 8
 1171              		.cfi_offset 3, -8
 1172              		.cfi_offset 14, -4
 290:Src/control.c ****     Buzzer_pwm(Hz,300);
 1173              		.loc 1 290 0
 1174 0002 4FF49671 		mov	r1, #300
 1175 0006 FFF7FEFF 		bl	Buzzer_pwm
 1176              	.LVL109:
 291:Src/control.c ****     HAL_Delay(100);
 1177              		.loc 1 291 0
 1178 000a 6420     		movs	r0, #100
 1179 000c FFF7FEFF 		bl	HAL_Delay
 1180              	.LVL110:
 292:Src/control.c ****     Buzzer_pwm(HZ_NORMAL,0);
 1181              		.loc 1 292 0
 1182 0010 0021     		movs	r1, #0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 27


 1183 0012 0A20     		movs	r0, #10
 1184 0014 FFF7FEFF 		bl	Buzzer_pwm
 1185              	.LVL111:
 293:Src/control.c **** }
 1186              		.loc 1 293 0
 1187 0018 08BD     		pop	{r3, pc}
 1188              		.cfi_endproc
 1189              	.LFE171:
 1191              		.section	.text.Sensor_Check,"ax",%progbits
 1192              		.align	1
 1193              		.global	Sensor_Check
 1194              		.syntax unified
 1195              		.thumb
 1196              		.thumb_func
 1197              		.fpu fpv4-sp-d16
 1199              	Sensor_Check:
 1200              	.LFB172:
 294:Src/control.c **** 
 295:Src/control.c **** 
 296:Src/control.c **** /****************************************************************************************
 297:Src/control.c ****  * outline  : sensor check
 298:Src/control.c ****  * argument : void
 299:Src/control.c ****  * return   : void
 300:Src/control.c **** ********************************************************************************************/
 301:Src/control.c **** void Sensor_Check(void){
 1201              		.loc 1 301 0
 1202              		.cfi_startproc
 1203              		@ args = 0, pretend = 0, frame = 0
 1204              		@ frame_needed = 0, uses_anonymous_args = 0
 1205 0000 10B5     		push	{r4, lr}
 1206              	.LCFI13:
 1207              		.cfi_def_cfa_offset 8
 1208              		.cfi_offset 4, -8
 1209              		.cfi_offset 14, -4
 302:Src/control.c ****     if(sensor.wall[1]==true){
 1210              		.loc 1 302 0
 1211 0002 204B     		ldr	r3, .L95
 1212 0004 DB7E     		ldrb	r3, [r3, #27]	@ zero_extendqisi2
 1213 0006 012B     		cmp	r3, #1
 1214 0008 20D0     		beq	.L92
 303:Src/control.c ****         HAL_GPIO_WritePin(led0_GPIO_Port,led0_Pin,GPIO_PIN_RESET);
 304:Src/control.c ****     }else{
 305:Src/control.c ****         HAL_GPIO_WritePin(led0_GPIO_Port,led0_Pin,GPIO_PIN_SET);
 1215              		.loc 1 305 0
 1216 000a 0122     		movs	r2, #1
 1217 000c 4FF40051 		mov	r1, #8192
 1218 0010 1D48     		ldr	r0, .L95+4
 1219 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1220              	.LVL112:
 1221              	.L86:
 306:Src/control.c ****     }
 307:Src/control.c ****     if(sensor.wall[2]==true){
 1222              		.loc 1 307 0
 1223 0016 1B4B     		ldr	r3, .L95
 1224 0018 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 1225 001a 012B     		cmp	r3, #1
 1226 001c 1DD0     		beq	.L93
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 28


 308:Src/control.c ****         HAL_GPIO_WritePin(led1_GPIO_Port,led1_Pin,GPIO_PIN_RESET);
 309:Src/control.c ****     }else{
 310:Src/control.c ****         HAL_GPIO_WritePin(led1_GPIO_Port,led1_Pin,GPIO_PIN_SET);
 1227              		.loc 1 310 0
 1228 001e 0122     		movs	r2, #1
 1229 0020 4FF48041 		mov	r1, #16384
 1230 0024 1848     		ldr	r0, .L95+4
 1231 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1232              	.LVL113:
 1233              	.L88:
 311:Src/control.c ****     }
 312:Src/control.c ****     if(sensor.wall[5]==true){
 1234              		.loc 1 312 0
 1235 002a 164B     		ldr	r3, .L95
 1236 002c DB7F     		ldrb	r3, [r3, #31]	@ zero_extendqisi2
 1237 002e 012B     		cmp	r3, #1
 1238 0030 1AD0     		beq	.L94
 313:Src/control.c ****         HAL_GPIO_WritePin(led3_GPIO_Port,led3_Pin,GPIO_PIN_RESET);
 314:Src/control.c ****         HAL_GPIO_WritePin(led2_GPIO_Port,led2_Pin,GPIO_PIN_RESET);
 315:Src/control.c ****     }else{
 316:Src/control.c ****         HAL_GPIO_WritePin(led3_GPIO_Port,led3_Pin,GPIO_PIN_SET);
 1239              		.loc 1 316 0
 1240 0032 154C     		ldr	r4, .L95+4
 1241 0034 0122     		movs	r2, #1
 1242 0036 4FF48071 		mov	r1, #256
 1243 003a 2046     		mov	r0, r4
 1244 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1245              	.LVL114:
 317:Src/control.c ****         HAL_GPIO_WritePin(led2_GPIO_Port,led2_Pin,GPIO_PIN_SET);
 1246              		.loc 1 317 0
 1247 0040 0122     		movs	r2, #1
 1248 0042 8021     		movs	r1, #128
 1249 0044 2046     		mov	r0, r4
 1250 0046 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1251              	.LVL115:
 1252              	.L84:
 318:Src/control.c ****     } 
 319:Src/control.c **** }
 1253              		.loc 1 319 0
 1254 004a 10BD     		pop	{r4, pc}
 1255              	.L92:
 303:Src/control.c ****     }else{
 1256              		.loc 1 303 0
 1257 004c 0022     		movs	r2, #0
 1258 004e 4FF40051 		mov	r1, #8192
 1259 0052 0D48     		ldr	r0, .L95+4
 1260 0054 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1261              	.LVL116:
 1262 0058 DDE7     		b	.L86
 1263              	.L93:
 308:Src/control.c ****     }else{
 1264              		.loc 1 308 0
 1265 005a 0022     		movs	r2, #0
 1266 005c 4FF48041 		mov	r1, #16384
 1267 0060 0948     		ldr	r0, .L95+4
 1268 0062 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1269              	.LVL117:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 29


 1270 0066 E0E7     		b	.L88
 1271              	.L94:
 313:Src/control.c ****         HAL_GPIO_WritePin(led2_GPIO_Port,led2_Pin,GPIO_PIN_RESET);
 1272              		.loc 1 313 0
 1273 0068 074C     		ldr	r4, .L95+4
 1274 006a 0022     		movs	r2, #0
 1275 006c 4FF48071 		mov	r1, #256
 1276 0070 2046     		mov	r0, r4
 1277 0072 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1278              	.LVL118:
 314:Src/control.c ****     }else{
 1279              		.loc 1 314 0
 1280 0076 0022     		movs	r2, #0
 1281 0078 8021     		movs	r1, #128
 1282 007a 2046     		mov	r0, r4
 1283 007c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1284              	.LVL119:
 1285 0080 E3E7     		b	.L84
 1286              	.L96:
 1287 0082 00BF     		.align	2
 1288              	.L95:
 1289 0084 00000000 		.word	sensor
 1290 0088 00080240 		.word	1073874944
 1291              		.cfi_endproc
 1292              	.LFE172:
 1294              		.global	encoder_Kd
 1295              		.global	encoder_Ki
 1296              		.global	encoder_Kp
 1297              		.comm	straight_dir,1,1
 1298              		.comm	fr_wall_pid_r,2,2
 1299              		.comm	fr_wall_pid_l,2,2
 1300              		.comm	wall_pid,2,2
 1301              		.comm	yawrate_pid,2,2
 1302              		.comm	straight_pid_r,2,2
 1303              		.comm	straight_pid_l,2,2
 1304              		.comm	w_befor,4,4
 1305              		.comm	w_sum,4,4
 1306              		.comm	y_sumsum,4,4
 1307              		.comm	y_sum,4,4
 1308              		.comm	s_sum_r,4,4
 1309              		.comm	s_sum_l,4,4
 1310              		.section	.bss.encoder_Kd,"aw",%nobits
 1311              		.align	2
 1312              		.set	.LANCHOR2,. + 0
 1315              	encoder_Kd:
 1316 0000 00000000 		.space	4
 1317              		.section	.bss.encoder_Ki,"aw",%nobits
 1318              		.align	2
 1319              		.set	.LANCHOR1,. + 0
 1322              	encoder_Ki:
 1323 0000 00000000 		.space	4
 1324              		.section	.bss.encoder_Kp,"aw",%nobits
 1325              		.align	2
 1326              		.set	.LANCHOR0,. + 0
 1329              	encoder_Kp:
 1330 0000 00000000 		.space	4
 1331              		.text
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 30


 1332              	.Letext0:
 1333              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 1334              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 1335              		.file 4 "Inc/control.h"
 1336              		.file 5 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 1337              		.file 6 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 1338              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\lib\\gcc\\arm-none-eabi
 1339              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 1340              		.file 9 "Inc/global.h"
 1341              		.file 10 "Drivers/CMSIS/Include/core_cm4.h"
 1342              		.file 11 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1343              		.file 12 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 1344              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1345              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 1346              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1347              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 1348              		.file 17 "Inc/tim.h"
 1349              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 1350              		.file 19 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 31


DEFINED SYMBOLS
                            *ABS*:00000000 control.c
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:18     .text.PID_value:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:25     .text.PID_value:00000000 PID_value
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:66     .text.PID_value:0000003c $d
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:71     .text.Integral_value:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:78     .text.Integral_value:00000000 Integral_value
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:101    .text.Integral_value:0000001c $d
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:106    .text.Calc_Palam:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:113    .text.Calc_Palam:00000000 Calc_Palam
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:142    .text.Calc_Palam:00000034 $d
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:147    .text.Straight_Calc_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:154    .text.Straight_Calc_fb:00000000 Straight_Calc_fb
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:290    .text.Straight_Calc_fb:000000d8 $d
                            *COM*:00000004 s_sum_l
                            *COM*:00000001 straight_dir
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:309    .text.Straight_Calc_Zero:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:316    .text.Straight_Calc_Zero:00000000 Straight_Calc_Zero
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:344    .text.Straight_Calc_Zero:0000001c $d
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:353    .text.Straight_SysTic_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:360    .text.Straight_SysTic_fb:00000000 Straight_SysTic_fb
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:550    .text.Straight_SysTic_fb:00000124 $d
                            *COM*:00000002 straight_pid_l
                            *COM*:00000004 s_sum_r
                            *COM*:00000002 straight_pid_r
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:572    .text.Yawrate_Calc_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:579    .text.Yawrate_Calc_fb:00000000 Yawrate_Calc_fb
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:680    .text.Yawrate_Calc_fb:000000b8 $d
                            *COM*:00000004 y_sum
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:694    .text.Yawrate_Calc_Zero:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:701    .text.Yawrate_Calc_Zero:00000000 Yawrate_Calc_Zero
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:717    .text.Yawrate_Calc_Zero:00000008 $d
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:722    .text.Yawrate_SysTic_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:729    .text.Yawrate_SysTic_fb:00000000 Yawrate_SysTic_fb
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:835    .text.Yawrate_SysTic_fb:000000b0 $d
                            *COM*:00000002 yawrate_pid
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:851    .text.Control_Wall:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:858    .text.Control_Wall:00000000 Control_Wall
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:930    .text.Control_Wall:00000078 $d
                            *COM*:00000002 wall_pid
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:942    .text.Front_Wall_Control:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:949    .text.Front_Wall_Control:00000000 Front_Wall_Control
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1018   .text.Front_Wall_Control:00000054 $d
                            *COM*:00000002 fr_wall_pid_l
                            *COM*:00000002 fr_wall_pid_r
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1026   .text.Control_pwm:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1033   .text.Control_pwm:00000000 Control_pwm
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1143   .text.Control_pwm:00000074 $d
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1154   .text.Output_Buzzer:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1161   .text.Output_Buzzer:00000000 Output_Buzzer
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1192   .text.Sensor_Check:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1199   .text.Sensor_Check:00000000 Sensor_Check
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1289   .text.Sensor_Check:00000084 $d
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1315   .bss.encoder_Kd:00000000 encoder_Kd
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1322   .bss.encoder_Ki:00000000 encoder_Ki
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1329   .bss.encoder_Kp:00000000 encoder_Kp
                            *COM*:00000004 w_befor
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s 			page 32


                            *COM*:00000004 w_sum
                            *COM*:00000004 y_sumsum
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1311   .bss.encoder_Kd:00000000 $d
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1318   .bss.encoder_Ki:00000000 $d
C:\Users\kotaro\AppData\Local\Temp\ccUQJL2r.s:1325   .bss.encoder_Kp:00000000 $d

UNDEFINED SYMBOLS
calc
enc
flag
accel_T
constant_T
decrease_T
straight_cnt
gyro
y_accel_T
y_constant_T
y_decrease_T
yawrate_cnt
sensor
__aeabi_i2d
__aeabi_dmul
__aeabi_d2iz
Motor_pwm
Buzzer_pwm
HAL_Delay
HAL_GPIO_WritePin
