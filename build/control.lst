ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"control.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.PID_value,"ax",%progbits
  18              		.align	1
  19              		.global	PID_value
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	PID_value:
  26              	.LFB159:
  27              		.file 1 "Src/control.c"
   1:Src/control.c **** #include "control.h"
   2:Src/control.c **** #include <stdint.h>
   3:Src/control.c **** #include "global.h"
   4:Src/control.c **** #include "tim.h"
   5:Src/control.c **** #include "arm_math.h"
   6:Src/control.c **** #include "main.h"
   7:Src/control.c **** #include "stm32f4xx_hal.h"
   8:Src/control.c **** 
   9:Src/control.c **** 
  10:Src/control.c **** 
  11:Src/control.c **** 
  12:Src/control.c **** /****************************************************************************************
  13:Src/control.c ****  * outline  : PID control
  14:Src/control.c ****  * argument : 
  15:Src/control.c ****  * return   : control value
  16:Src/control.c **** ********************************************************************************************/
  17:Src/control.c **** float PID_value(float target,float measured,float *sum,float*old,float Kp,float Ki,float Kd){
  28              		.loc 1 17 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  18:Src/control.c ****     float error;
  19:Src/control.c ****     float p,i,d;
  20:Src/control.c **** 
  21:Src/control.c ****     error = target - measured;
  34              		.loc 1 21 0
  35 0000 30EE600A 		vsub.f32	s0, s0, s1
  36              	.LVL1:
  22:Src/control.c ****     p = Kp*error;
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 2


  37              		.loc 1 22 0
  38 0004 20EE011A 		vmul.f32	s2, s0, s2
  39              	.LVL2:
  23:Src/control.c **** 
  24:Src/control.c ****     *sum += error * dt;
  40              		.loc 1 24 0
  41 0008 DFED0D7A 		vldr.32	s15, .L2
  42 000c 20EE270A 		vmul.f32	s0, s0, s15
  43              	.LVL3:
  44 0010 D0ED007A 		vldr.32	s15, [r0]
  45 0014 30EE270A 		vadd.f32	s0, s0, s15
  46 0018 80ED000A 		vstr.32	s0, [r0]
  25:Src/control.c ****     i = Ki * *sum;
  47              		.loc 1 25 0
  48 001c 20EE210A 		vmul.f32	s0, s0, s3
  49              	.LVL4:
  26:Src/control.c **** 
  27:Src/control.c ****     *old = measured;
  50              		.loc 1 27 0
  51 0020 C1ED000A 		vstr.32	s1, [r1]
  28:Src/control.c ****     d = Kd * (measured - *old);
  52              		.loc 1 28 0
  53 0024 70EEE00A 		vsub.f32	s1, s1, s1
  54              	.LVL5:
  55 0028 60EE820A 		vmul.f32	s1, s1, s4
  56              	.LVL6:
  29:Src/control.c **** 
  30:Src/control.c ****     return (p+i+d)/batt_Vcc;
  57              		.loc 1 30 0
  58 002c 31EE000A 		vadd.f32	s0, s2, s0
  59              	.LVL7:
  60 0030 70EE200A 		vadd.f32	s1, s0, s1
  61              	.LVL8:
  62 0034 034B     		ldr	r3, .L2+4
  63 0036 93ED000A 		vldr.32	s0, [r3]
  31:Src/control.c **** }
  64              		.loc 1 31 0
  65 003a 80EE800A 		vdiv.f32	s0, s1, s0
  66 003e 7047     		bx	lr
  67              	.L3:
  68              		.align	2
  69              	.L2:
  70 0040 6F12833A 		.word	981668463
  71 0044 00000000 		.word	batt_Vcc
  72              		.cfi_endproc
  73              	.LFE159:
  75              		.section	.text.Calc_Palam,"ax",%progbits
  76              		.align	1
  77              		.global	Calc_Palam
  78              		.syntax unified
  79              		.thumb
  80              		.thumb_func
  81              		.fpu fpv4-sp-d16
  83              	Calc_Palam:
  84              	.LFB160:
  32:Src/control.c **** 
  33:Src/control.c **** /****************************************************************************************
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 3


  34:Src/control.c ****  * outline  : calculate parameter
  35:Src/control.c ****  * argument : accel,*velocity,*distance
  36:Src/control.c ****  * return   : void
  37:Src/control.c **** ********************************************************************************************/
  38:Src/control.c **** void Calc_Palam(int16_t accel,int16_t *velocity,uint16_t *calc_tim){
  85              		.loc 1 38 0
  86              		.cfi_startproc
  87              		@ args = 0, pretend = 0, frame = 0
  88              		@ frame_needed = 0, uses_anonymous_args = 0
  89              		@ link register save eliminated.
  90              	.LVL9:
  39:Src/control.c ****     *calc_tim += 1;
  91              		.loc 1 39 0
  92 0000 1388     		ldrh	r3, [r2]
  93 0002 0133     		adds	r3, r3, #1
  94 0004 1380     		strh	r3, [r2]	@ movhi
  40:Src/control.c ****     *velocity += accel * dt;
  95              		.loc 1 40 0
  96 0006 07EE900A 		vmov	s15, r0	@ int
  97 000a F8EEE77A 		vcvt.f32.s32	s15, s15
  98 000e 9FED097A 		vldr.32	s14, .L5
  99 0012 27EE877A 		vmul.f32	s14, s15, s14
 100 0016 B1F90030 		ldrsh	r3, [r1]
 101 001a 07EE903A 		vmov	s15, r3	@ int
 102 001e F8EEE77A 		vcvt.f32.s32	s15, s15
 103 0022 77EE877A 		vadd.f32	s15, s15, s14
 104 0026 FDEEE77A 		vcvt.s32.f32	s15, s15
 105 002a 17EE903A 		vmov	r3, s15	@ int
 106 002e 0B80     		strh	r3, [r1]	@ movhi
  41:Src/control.c **** }
 107              		.loc 1 41 0
 108 0030 7047     		bx	lr
 109              	.L6:
 110 0032 00BF     		.align	2
 111              	.L5:
 112 0034 6F12833A 		.word	981668463
 113              		.cfi_endproc
 114              	.LFE160:
 116              		.global	__aeabi_f2d
 117              		.section	.text.Straight_Calc_fb,"ax",%progbits
 118              		.align	1
 119              		.global	Straight_Calc_fb
 120              		.syntax unified
 121              		.thumb
 122              		.thumb_func
 123              		.fpu fpv4-sp-d16
 125              	Straight_Calc_fb:
 126              	.LFB161:
  42:Src/control.c **** 
  43:Src/control.c **** 
  44:Src/control.c **** /****************************************************************************************
  45:Src/control.c ****  * outline  : calcurate accele distance
  46:Src/control.c ****  * argument : distance[mm],v_start[mm/s],v_end[mm/s]
  47:Src/control.c ****  * return   : void
  48:Src/control.c **** ********************************************************************************************/
  49:Src/control.c **** void Straight_Calc_fb(int16_t distant,int16_t v_start,int16_t v_end){
 127              		.loc 1 49 0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 4


 128              		.cfi_startproc
 129              		@ args = 0, pretend = 0, frame = 0
 130              		@ frame_needed = 0, uses_anonymous_args = 0
 131              	.LVL10:
 132 0000 30B5     		push	{r4, r5, lr}
 133              	.LCFI0:
 134              		.cfi_def_cfa_offset 12
 135              		.cfi_offset 4, -12
 136              		.cfi_offset 5, -8
 137              		.cfi_offset 14, -4
 138 0002 2DED048B 		vpush.64	{d8, d9}
 139              	.LCFI1:
 140              		.cfi_def_cfa_offset 28
 141              		.cfi_offset 80, -28
 142              		.cfi_offset 81, -24
 143              		.cfi_offset 82, -20
 144              		.cfi_offset 83, -16
 145 0006 85B0     		sub	sp, sp, #20
 146              	.LCFI2:
 147              		.cfi_def_cfa_offset 48
  50:Src/control.c ****     float t1,t2,t3;
  51:Src/control.c ****     float constant_L;
  52:Src/control.c ****     calc.velocity = v_start;
 148              		.loc 1 52 0
 149 0008 324B     		ldr	r3, .L9
 150 000a 9980     		strh	r1, [r3, #4]	@ movhi
  53:Src/control.c ****     t1 = (float)(MAX_VELOCITY - v_start) / ACCEL;
 151              		.loc 1 53 0
 152 000c C1F59673 		rsb	r3, r1, #300
 153 0010 07EE903A 		vmov	s15, r3	@ int
 154 0014 F8EEE77A 		vcvt.f32.s32	s15, s15
 155 0018 9FED2F7A 		vldr.32	s14, .L9+4
 156 001c C7EE878A 		vdiv.f32	s17, s15, s14
 157              	.LVL11:
  54:Src/control.c ****     t3 = (float)(MAX_VELOCITY - v_end) / ACCEL;
 158              		.loc 1 54 0
 159 0020 C2F59672 		rsb	r2, r2, #300
 160              	.LVL12:
 161 0024 07EE902A 		vmov	s15, r2	@ int
 162 0028 F8EEE77A 		vcvt.f32.s32	s15, s15
 163 002c 87EE878A 		vdiv.f32	s16, s15, s14
 164              	.LVL13:
  55:Src/control.c **** 
  56:Src/control.c ****     constant_L = (float)distant - (MAX_VELOCITY + v_start) * t1 / 2 - (MAX_VELOCITY + v_start) * t3
 165              		.loc 1 56 0
 166 0030 07EE900A 		vmov	s15, r0	@ int
 167 0034 B8EEE77A 		vcvt.f32.s32	s14, s15
 168 0038 01F59671 		add	r1, r1, #300
 169              	.LVL14:
 170 003c 07EE901A 		vmov	s15, r1	@ int
 171 0040 F8EEE77A 		vcvt.f32.s32	s15, s15
 172 0044 67EEA86A 		vmul.f32	s13, s15, s17
 173 0048 B6EE006A 		vmov.f32	s12, #5.0e-1
 174 004c 66EE866A 		vmul.f32	s13, s13, s12
 175 0050 37EE667A 		vsub.f32	s14, s14, s13
 176 0054 67EE887A 		vmul.f32	s15, s15, s16
 177 0058 67EE867A 		vmul.f32	s15, s15, s12
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 5


 178 005c 77EE677A 		vsub.f32	s15, s14, s15
 179              	.LVL15:
  57:Src/control.c **** 
  58:Src/control.c ****     t2 = constant_L / MAX_VELOCITY;
 180              		.loc 1 58 0
 181 0060 9FED1E7A 		vldr.32	s14, .L9+8
 182 0064 87EE879A 		vdiv.f32	s18, s15, s14
 183              	.LVL16:
  59:Src/control.c ****     printf("\nt1:%f,t2:%f,t3%f\r\n",t1,t2,t3);
 184              		.loc 1 59 0
 185 0068 18EE900A 		vmov	r0, s17
 186              	.LVL17:
 187 006c FFF7FEFF 		bl	__aeabi_f2d
 188              	.LVL18:
 189 0070 0446     		mov	r4, r0
 190 0072 0D46     		mov	r5, r1
 191 0074 18EE100A 		vmov	r0, s16
 192 0078 FFF7FEFF 		bl	__aeabi_f2d
 193              	.LVL19:
 194 007c CDE90201 		strd	r0, [sp, #8]
 195 0080 19EE100A 		vmov	r0, s18
 196 0084 FFF7FEFF 		bl	__aeabi_f2d
 197              	.LVL20:
 198 0088 CDE90001 		strd	r0, [sp]
 199 008c 2246     		mov	r2, r4
 200 008e 2B46     		mov	r3, r5
 201 0090 1348     		ldr	r0, .L9+12
 202 0092 FFF7FEFF 		bl	printf
 203              	.LVL21:
  60:Src/control.c **** 
  61:Src/control.c ****     t1 *= 1000;
 204              		.loc 1 61 0
 205 0096 DFED137A 		vldr.32	s15, .L9+16
 206 009a 68EEA78A 		vmul.f32	s17, s17, s15
 207              	.LVL22:
  62:Src/control.c ****     t2 *= 1000;
 208              		.loc 1 62 0
 209 009e 29EE279A 		vmul.f32	s18, s18, s15
 210              	.LVL23:
  63:Src/control.c ****     t3 *= 1000;
 211              		.loc 1 63 0
 212 00a2 28EE278A 		vmul.f32	s16, s16, s15
 213              	.LVL24:
  64:Src/control.c **** 
  65:Src/control.c ****     accel_T = t1;
 214              		.loc 1 65 0
 215 00a6 FCEEE88A 		vcvt.u32.f32	s17, s17
 216              	.LVL25:
 217 00aa 0F4B     		ldr	r3, .L9+20
 218 00ac 18EE902A 		vmov	r2, s17	@ int
 219 00b0 1A80     		strh	r2, [r3]	@ movhi
  66:Src/control.c ****     constant_T = t2;
 220              		.loc 1 66 0
 221 00b2 BCEEC99A 		vcvt.u32.f32	s18, s18
 222              	.LVL26:
 223 00b6 0D4B     		ldr	r3, .L9+24
 224 00b8 19EE102A 		vmov	r2, s18	@ int
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 6


 225 00bc 1A80     		strh	r2, [r3]	@ movhi
  67:Src/control.c ****     decrease_T = t3;
 226              		.loc 1 67 0
 227 00be BCEEC88A 		vcvt.u32.f32	s16, s16
 228              	.LVL27:
 229 00c2 0B4B     		ldr	r3, .L9+28
 230 00c4 18EE102A 		vmov	r2, s16	@ int
 231 00c8 1A80     		strh	r2, [r3]	@ movhi
  68:Src/control.c **** }
 232              		.loc 1 68 0
 233 00ca 05B0     		add	sp, sp, #20
 234              	.LCFI3:
 235              		.cfi_def_cfa_offset 28
 236              		@ sp needed
 237 00cc BDEC048B 		vldm	sp!, {d8-d9}
 238              	.LCFI4:
 239              		.cfi_restore 82
 240              		.cfi_restore 83
 241              		.cfi_restore 80
 242              		.cfi_restore 81
 243              		.cfi_def_cfa_offset 12
 244 00d0 30BD     		pop	{r4, r5, pc}
 245              	.L10:
 246 00d2 00BF     		.align	2
 247              	.L9:
 248 00d4 00000000 		.word	calc
 249 00d8 00007A45 		.word	1165623296
 250 00dc 00009643 		.word	1133903872
 251 00e0 00000000 		.word	.LC0
 252 00e4 00007A44 		.word	1148846080
 253 00e8 00000000 		.word	accel_T
 254 00ec 00000000 		.word	constant_T
 255 00f0 00000000 		.word	decrease_T
 256              		.cfi_endproc
 257              	.LFE161:
 259              		.section	.text.Straight_SysTic_fb,"ax",%progbits
 260              		.align	1
 261              		.global	Straight_SysTic_fb
 262              		.syntax unified
 263              		.thumb
 264              		.thumb_func
 265              		.fpu fpv4-sp-d16
 267              	Straight_SysTic_fb:
 268              	.LFB162:
  69:Src/control.c **** 
  70:Src/control.c **** 
  71:Src/control.c **** /****************************************************************************************
  72:Src/control.c ****  * outline  : output pwm for trapezoid accele straight by feadbuck control
  73:Src/control.c ****  * argument : void
  74:Src/control.c ****  * return   : void
  75:Src/control.c **** ********************************************************************************************/
  76:Src/control.c **** void Straight_SysTic_fb(void){
 269              		.loc 1 76 0
 270              		.cfi_startproc
 271              		@ args = 0, pretend = 0, frame = 0
 272              		@ frame_needed = 0, uses_anonymous_args = 0
 273 0000 38B5     		push	{r3, r4, r5, lr}
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 7


 274              	.LCFI5:
 275              		.cfi_def_cfa_offset 16
 276              		.cfi_offset 3, -16
 277              		.cfi_offset 4, -12
 278              		.cfi_offset 5, -8
 279              		.cfi_offset 14, -4
 280 0002 2DED028B 		vpush.64	{d8}
 281              	.LCFI6:
 282              		.cfi_def_cfa_offset 24
 283              		.cfi_offset 80, -24
 284              		.cfi_offset 81, -20
  77:Src/control.c ****     if(straight_cnt < accel_T){
 285              		.loc 1 77 0
 286 0006 324B     		ldr	r3, .L20
 287 0008 1A88     		ldrh	r2, [r3]
 288 000a 324B     		ldr	r3, .L20+4
 289 000c 1B88     		ldrh	r3, [r3]
 290 000e 9A42     		cmp	r2, r3
 291 0010 4AD3     		bcc	.L17
  78:Src/control.c ****         Calc_Palam(ACCEL,&calc.velocity,&straight_cnt);
  79:Src/control.c ****     }
  80:Src/control.c ****     else if(straight_cnt < constant_T + accel_T){
 292              		.loc 1 80 0
 293 0012 3149     		ldr	r1, .L20+8
 294 0014 0888     		ldrh	r0, [r1]
 295 0016 C118     		adds	r1, r0, r3
 296 0018 8A42     		cmp	r2, r1
 297 001a 4CDB     		blt	.L18
  81:Src/control.c ****         Calc_Palam(0,&calc.velocity,&straight_cnt);
  82:Src/control.c ****     }
  83:Src/control.c ****     else if(straight_cnt < decrease_T + constant_T + accel_T){
 298              		.loc 1 83 0
 299 001c 2F49     		ldr	r1, .L20+12
 300 001e 0988     		ldrh	r1, [r1]
 301 0020 0144     		add	r1, r1, r0
 302 0022 0B44     		add	r3, r3, r1
 303 0024 9A42     		cmp	r2, r3
 304 0026 4CDB     		blt	.L19
  84:Src/control.c ****         Calc_Palam(-ACCEL,&calc.velocity,&straight_cnt);
  85:Src/control.c ****     }else{
  86:Src/control.c ****         calc.velocity = 0;
 305              		.loc 1 86 0
 306 0028 0023     		movs	r3, #0
 307 002a 2D4A     		ldr	r2, .L20+16
 308 002c 9380     		strh	r3, [r2, #4]	@ movhi
  87:Src/control.c ****         flag.straight = OFF;
 309              		.loc 1 87 0
 310 002e 2D4A     		ldr	r2, .L20+20
 311 0030 5380     		strh	r3, [r2, #2]	@ movhi
 312              	.L13:
  88:Src/control.c ****     }
  89:Src/control.c ****     
  90:Src/control.c ****     straight_pid_l = (int16_t)PID_value(calc.velocity,enc.velocity_l,&s_sum_l,&enc.old_l,20.0f,90.0
 313              		.loc 1 90 0
 314 0032 2B4D     		ldr	r5, .L20+16
 315 0034 B5F90430 		ldrsh	r3, [r5, #4]
 316 0038 00EE103A 		vmov	s0, r3	@ int
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 8


 317 003c DFED2A8A 		vldr.32	s17, .L20+24
 318 0040 9FED2A8A 		vldr.32	s16, .L20+28
 319 0044 2A49     		ldr	r1, .L20+32
 320 0046 A1F12004 		sub	r4, r1, #32
 321 004a B0EE682A 		vmov.f32	s4, s17
 322 004e F0EE481A 		vmov.f32	s3, s16
 323 0052 B3EE041A 		vmov.f32	s2, #2.0e+1
 324 0056 2748     		ldr	r0, .L20+36
 325 0058 51ED040A 		vldr.32	s1, [r1, #-16]
 326 005c B8EEC00A 		vcvt.f32.s32	s0, s0
 327 0060 FFF7FEFF 		bl	PID_value
 328              	.LVL28:
 329 0064 BDEEC00A 		vcvt.s32.f32	s0, s0
 330 0068 234B     		ldr	r3, .L20+40
 331 006a 10EE102A 		vmov	r2, s0	@ int
 332 006e 1A80     		strh	r2, [r3]	@ movhi
  91:Src/control.c ****     straight_pid_r = (int16_t)PID_value(calc.velocity,enc.velocity_r,&s_sum_r,&enc.old_r,20.0f,90.0
 333              		.loc 1 91 0
 334 0070 B5F90430 		ldrsh	r3, [r5, #4]
 335 0074 00EE103A 		vmov	s0, r3	@ int
 336 0078 B0EE682A 		vmov.f32	s4, s17
 337 007c F0EE481A 		vmov.f32	s3, s16
 338 0080 B3EE041A 		vmov.f32	s2, #2.0e+1
 339 0084 04F12401 		add	r1, r4, #36
 340 0088 1C48     		ldr	r0, .L20+44
 341 008a D4ED050A 		vldr.32	s1, [r4, #20]
 342 008e B8EEC00A 		vcvt.f32.s32	s0, s0
 343 0092 FFF7FEFF 		bl	PID_value
 344              	.LVL29:
 345 0096 BDEEC00A 		vcvt.s32.f32	s0, s0
 346 009a 194B     		ldr	r3, .L20+48
 347 009c 10EE102A 		vmov	r2, s0	@ int
 348 00a0 1A80     		strh	r2, [r3]	@ movhi
  92:Src/control.c **** }
 349              		.loc 1 92 0
 350 00a2 BDEC028B 		vldm	sp!, {d8}
 351              	.LCFI7:
 352              		.cfi_remember_state
 353              		.cfi_restore 80
 354              		.cfi_restore 81
 355              		.cfi_def_cfa_offset 16
 356 00a6 38BD     		pop	{r3, r4, r5, pc}
 357              	.L17:
 358              	.LCFI8:
 359              		.cfi_restore_state
  78:Src/control.c ****     }
 360              		.loc 1 78 0
 361 00a8 094A     		ldr	r2, .L20
 362 00aa 1649     		ldr	r1, .L20+52
 363 00ac 4FF47A60 		mov	r0, #4000
 364 00b0 FFF7FEFF 		bl	Calc_Palam
 365              	.LVL30:
 366 00b4 BDE7     		b	.L13
 367              	.L18:
  81:Src/control.c ****     }
 368              		.loc 1 81 0
 369 00b6 064A     		ldr	r2, .L20
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 9


 370 00b8 1249     		ldr	r1, .L20+52
 371 00ba 0020     		movs	r0, #0
 372 00bc FFF7FEFF 		bl	Calc_Palam
 373              	.LVL31:
 374 00c0 B7E7     		b	.L13
 375              	.L19:
  84:Src/control.c ****     }else{
 376              		.loc 1 84 0
 377 00c2 034A     		ldr	r2, .L20
 378 00c4 0F49     		ldr	r1, .L20+52
 379 00c6 1048     		ldr	r0, .L20+56
 380 00c8 FFF7FEFF 		bl	Calc_Palam
 381              	.LVL32:
 382 00cc B1E7     		b	.L13
 383              	.L21:
 384 00ce 00BF     		.align	2
 385              	.L20:
 386 00d0 00000000 		.word	straight_cnt
 387 00d4 00000000 		.word	accel_T
 388 00d8 00000000 		.word	constant_T
 389 00dc 00000000 		.word	decrease_T
 390 00e0 00000000 		.word	calc
 391 00e4 00000000 		.word	flag
 392 00e8 00000000 		.word	0
 393 00ec 0000B442 		.word	1119092736
 394 00f0 20000000 		.word	enc+32
 395 00f4 00000000 		.word	s_sum_l
 396 00f8 00000000 		.word	straight_pid_l
 397 00fc 00000000 		.word	s_sum_r
 398 0100 00000000 		.word	straight_pid_r
 399 0104 04000000 		.word	calc+4
 400 0108 60F0FFFF 		.word	-4000
 401              		.cfi_endproc
 402              	.LFE162:
 404              		.section	.text.Yawrate_Calc_fb,"ax",%progbits
 405              		.align	1
 406              		.global	Yawrate_Calc_fb
 407              		.syntax unified
 408              		.thumb
 409              		.thumb_func
 410              		.fpu fpv4-sp-d16
 412              	Yawrate_Calc_fb:
 413              	.LFB163:
  93:Src/control.c **** 
  94:Src/control.c **** 
  95:Src/control.c **** /****************************************************************************************
  96:Src/control.c ****  * outline  : calcurate trapezoid accel
  97:Src/control.c ****  * argument : degree[degree],v_start[degree/s],v_end[degree/s]
  98:Src/control.c ****  * return   : void
  99:Src/control.c **** ********************************************************************************************/
 100:Src/control.c **** void Yawrate_Calc_fb(int16_t degree,int16_t v_start,int16_t v_end){
 414              		.loc 1 100 0
 415              		.cfi_startproc
 416              		@ args = 0, pretend = 0, frame = 0
 417              		@ frame_needed = 0, uses_anonymous_args = 0
 418              	.LVL33:
 419 0000 30B5     		push	{r4, r5, lr}
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 10


 420              	.LCFI9:
 421              		.cfi_def_cfa_offset 12
 422              		.cfi_offset 4, -12
 423              		.cfi_offset 5, -8
 424              		.cfi_offset 14, -4
 425 0002 2DED048B 		vpush.64	{d8, d9}
 426              	.LCFI10:
 427              		.cfi_def_cfa_offset 28
 428              		.cfi_offset 80, -28
 429              		.cfi_offset 81, -24
 430              		.cfi_offset 82, -20
 431              		.cfi_offset 83, -16
 432 0006 85B0     		sub	sp, sp, #20
 433              	.LCFI11:
 434              		.cfi_def_cfa_offset 48
 101:Src/control.c ****     calc.yawrate_velocity = v_start;
 435              		.loc 1 101 0
 436 0008 354B     		ldr	r3, .L24
 437 000a 9981     		strh	r1, [r3, #12]	@ movhi
 438              	.LVL34:
 102:Src/control.c **** 
 103:Src/control.c ****     float t1=0,t2=0,t3=0;
 104:Src/control.c ****     float constant_L;
 105:Src/control.c **** 
 106:Src/control.c ****     t1 = (float)(Y_MAX_VELOCITY - v_start) / Y_ACCEL;
 439              		.loc 1 106 0
 440 000c C1F59673 		rsb	r3, r1, #300
 441 0010 07EE903A 		vmov	s15, r3	@ int
 442 0014 F8EEE77A 		vcvt.f32.s32	s15, s15
 443 0018 9FED327A 		vldr.32	s14, .L24+4
 444 001c C7EE878A 		vdiv.f32	s17, s15, s14
 445              	.LVL35:
 107:Src/control.c ****     t3 = (float)(Y_MAX_VELOCITY - v_end) / Y_ACCEL;
 446              		.loc 1 107 0
 447 0020 C2F59673 		rsb	r3, r2, #300
 448 0024 07EE903A 		vmov	s15, r3	@ int
 449 0028 F8EEE77A 		vcvt.f32.s32	s15, s15
 450 002c 87EE878A 		vdiv.f32	s16, s15, s14
 451              	.LVL36:
 108:Src/control.c **** 
 109:Src/control.c ****     constant_L = (float)degree - (Y_MAX_VELOCITY + v_start) * t1 / 2 - (Y_MAX_VELOCITY + v_end) * t
 452              		.loc 1 109 0
 453 0030 07EE900A 		vmov	s15, r0	@ int
 454 0034 B8EEE77A 		vcvt.f32.s32	s14, s15
 455 0038 01F59673 		add	r3, r1, #300
 456 003c 07EE903A 		vmov	s15, r3	@ int
 457 0040 F8EEE77A 		vcvt.f32.s32	s15, s15
 458 0044 67EEA87A 		vmul.f32	s15, s15, s17
 459 0048 F6EE006A 		vmov.f32	s13, #5.0e-1
 460 004c 67EEA67A 		vmul.f32	s15, s15, s13
 461 0050 77EE677A 		vsub.f32	s15, s14, s15
 462 0054 02F59673 		add	r3, r2, #300
 463 0058 07EE103A 		vmov	s14, r3	@ int
 464 005c B8EEC77A 		vcvt.f32.s32	s14, s14
 465 0060 27EE087A 		vmul.f32	s14, s14, s16
 466 0064 27EE267A 		vmul.f32	s14, s14, s13
 467 0068 37EEC77A 		vsub.f32	s14, s15, s14
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 11


 468              	.LVL37:
 110:Src/control.c ****     
 111:Src/control.c ****     t2 = constant_L / Y_MAX_VELOCITY;
 469              		.loc 1 111 0
 470 006c DFED1E7A 		vldr.32	s15, .L24+8
 471 0070 87EE279A 		vdiv.f32	s18, s14, s15
 472              	.LVL38:
 112:Src/control.c ****     printf("\nt1:%f,t2:%f,t3%f\r\n",t1,t2,t3);
 473              		.loc 1 112 0
 474 0074 18EE900A 		vmov	r0, s17
 475              	.LVL39:
 476 0078 FFF7FEFF 		bl	__aeabi_f2d
 477              	.LVL40:
 478 007c 0446     		mov	r4, r0
 479 007e 0D46     		mov	r5, r1
 480 0080 18EE100A 		vmov	r0, s16
 481 0084 FFF7FEFF 		bl	__aeabi_f2d
 482              	.LVL41:
 483 0088 CDE90201 		strd	r0, [sp, #8]
 484 008c 19EE100A 		vmov	r0, s18
 485 0090 FFF7FEFF 		bl	__aeabi_f2d
 486              	.LVL42:
 487 0094 CDE90001 		strd	r0, [sp]
 488 0098 2246     		mov	r2, r4
 489 009a 2B46     		mov	r3, r5
 490 009c 1348     		ldr	r0, .L24+12
 491 009e FFF7FEFF 		bl	printf
 492              	.LVL43:
 113:Src/control.c **** 
 114:Src/control.c ****     t1 *= 1000;
 493              		.loc 1 114 0
 494 00a2 DFED137A 		vldr.32	s15, .L24+16
 495 00a6 68EEA78A 		vmul.f32	s17, s17, s15
 496              	.LVL44:
 115:Src/control.c ****     t2 *= 1000;
 497              		.loc 1 115 0
 498 00aa 29EE279A 		vmul.f32	s18, s18, s15
 499              	.LVL45:
 116:Src/control.c ****     t3 *= 1000;
 500              		.loc 1 116 0
 501 00ae 28EE278A 		vmul.f32	s16, s16, s15
 502              	.LVL46:
 117:Src/control.c **** 
 118:Src/control.c ****     y_accel_T = t1;
 503              		.loc 1 118 0
 504 00b2 FCEEE88A 		vcvt.u32.f32	s17, s17
 505              	.LVL47:
 506 00b6 0F4B     		ldr	r3, .L24+20
 507 00b8 18EE902A 		vmov	r2, s17	@ int
 508 00bc 1A80     		strh	r2, [r3]	@ movhi
 119:Src/control.c ****     y_constant_T = t2;
 509              		.loc 1 119 0
 510 00be BCEEC99A 		vcvt.u32.f32	s18, s18
 511              	.LVL48:
 512 00c2 0D4B     		ldr	r3, .L24+24
 513 00c4 19EE102A 		vmov	r2, s18	@ int
 514 00c8 1A80     		strh	r2, [r3]	@ movhi
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 12


 120:Src/control.c ****     y_decrease_T = t3;
 515              		.loc 1 120 0
 516 00ca BCEEC88A 		vcvt.u32.f32	s16, s16
 517              	.LVL49:
 518 00ce 0B4B     		ldr	r3, .L24+28
 519 00d0 18EE102A 		vmov	r2, s16	@ int
 520 00d4 1A80     		strh	r2, [r3]	@ movhi
 121:Src/control.c **** }
 521              		.loc 1 121 0
 522 00d6 05B0     		add	sp, sp, #20
 523              	.LCFI12:
 524              		.cfi_def_cfa_offset 28
 525              		@ sp needed
 526 00d8 BDEC048B 		vldm	sp!, {d8-d9}
 527              	.LCFI13:
 528              		.cfi_restore 82
 529              		.cfi_restore 83
 530              		.cfi_restore 80
 531              		.cfi_restore 81
 532              		.cfi_def_cfa_offset 12
 533 00dc 30BD     		pop	{r4, r5, pc}
 534              	.L25:
 535 00de 00BF     		.align	2
 536              	.L24:
 537 00e0 00000000 		.word	calc
 538 00e4 0000FA44 		.word	1157234688
 539 00e8 00009643 		.word	1133903872
 540 00ec 00000000 		.word	.LC0
 541 00f0 00007A44 		.word	1148846080
 542 00f4 00000000 		.word	y_accel_T
 543 00f8 00000000 		.word	y_constant_T
 544 00fc 00000000 		.word	y_decrease_T
 545              		.cfi_endproc
 546              	.LFE163:
 548              		.section	.text.Yawrate_SysTic_fb,"ax",%progbits
 549              		.align	1
 550              		.global	Yawrate_SysTic_fb
 551              		.syntax unified
 552              		.thumb
 553              		.thumb_func
 554              		.fpu fpv4-sp-d16
 556              	Yawrate_SysTic_fb:
 557              	.LFB164:
 122:Src/control.c **** 
 123:Src/control.c **** 
 124:Src/control.c **** /****************************************************************************************
 125:Src/control.c ****  * outline  : call 1ms (roll by feadbuck control)
 126:Src/control.c ****  * argument : void
 127:Src/control.c ****  * return   : void
 128:Src/control.c **** ********************************************************************************************/
 129:Src/control.c **** void Yawrate_SysTic_fb(void){
 558              		.loc 1 129 0
 559              		.cfi_startproc
 560              		@ args = 0, pretend = 0, frame = 0
 561              		@ frame_needed = 0, uses_anonymous_args = 0
 562 0000 08B5     		push	{r3, lr}
 563              	.LCFI14:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 13


 564              		.cfi_def_cfa_offset 8
 565              		.cfi_offset 3, -8
 566              		.cfi_offset 14, -4
 130:Src/control.c ****     if(yawrate_cnt < y_accel_T){
 567              		.loc 1 130 0
 568 0002 224B     		ldr	r3, .L35
 569 0004 1A88     		ldrh	r2, [r3]
 570 0006 224B     		ldr	r3, .L35+4
 571 0008 1B88     		ldrh	r3, [r3]
 572 000a 9A42     		cmp	r2, r3
 573 000c 2AD3     		bcc	.L32
 131:Src/control.c ****         Calc_Palam(Y_ACCEL,&calc.yawrate_velocity,&yawrate_cnt);
 132:Src/control.c ****     }else if(yawrate_cnt < y_constant_T + y_accel_T){
 574              		.loc 1 132 0
 575 000e 2149     		ldr	r1, .L35+8
 576 0010 0888     		ldrh	r0, [r1]
 577 0012 C118     		adds	r1, r0, r3
 578 0014 8A42     		cmp	r2, r1
 579 0016 2CDB     		blt	.L33
 133:Src/control.c ****         Calc_Palam(0,&calc.yawrate_velocity,&yawrate_cnt);
 134:Src/control.c ****     }else if(yawrate_cnt < y_decrease_T + y_constant_T + y_accel_T){
 580              		.loc 1 134 0
 581 0018 1F49     		ldr	r1, .L35+12
 582 001a 0988     		ldrh	r1, [r1]
 583 001c 0144     		add	r1, r1, r0
 584 001e 0B44     		add	r3, r3, r1
 585 0020 9A42     		cmp	r2, r3
 586 0022 2CDB     		blt	.L34
 135:Src/control.c ****         Calc_Palam(-Y_ACCEL,&calc.yawrate_velocity,&yawrate_cnt);
 136:Src/control.c ****     }else{
 137:Src/control.c ****         calc.yawrate_velocity = 0;
 587              		.loc 1 137 0
 588 0024 0023     		movs	r3, #0
 589 0026 1D4A     		ldr	r2, .L35+16
 590 0028 9381     		strh	r3, [r2, #12]	@ movhi
 138:Src/control.c ****         flag.yawrate = OFF;
 591              		.loc 1 138 0
 592 002a 1D4A     		ldr	r2, .L35+20
 593 002c 9380     		strh	r3, [r2, #4]	@ movhi
 594              	.L28:
 139:Src/control.c ****     }
 140:Src/control.c ****     yawrate_pid = (int16_t)PID_value((float)calc.yawrate_velocity,gyro.velocity,&gyro.degree,&gyro.
 595              		.loc 1 140 0
 596 002e 1B4B     		ldr	r3, .L35+16
 597 0030 B3F90C30 		ldrsh	r3, [r3, #12]
 598 0034 00EE103A 		vmov	s0, r3	@ int
 599 0038 1A4B     		ldr	r3, .L35+24
 600 003a 9FED1B2A 		vldr.32	s4, .L35+28
 601 003e F0EE081A 		vmov.f32	s3, #3.0e+0
 602 0042 B2EE0C1A 		vmov.f32	s2, #1.4e+1
 603 0046 1946     		mov	r1, r3
 604 0048 181D     		adds	r0, r3, #4
 605 004a D3ED020A 		vldr.32	s1, [r3, #8]
 606 004e B8EEC00A 		vcvt.f32.s32	s0, s0
 607 0052 FFF7FEFF 		bl	PID_value
 608              	.LVL50:
 609 0056 BDEEC00A 		vcvt.s32.f32	s0, s0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 14


 610 005a 144B     		ldr	r3, .L35+32
 611 005c 10EE102A 		vmov	r2, s0	@ int
 612 0060 1A80     		strh	r2, [r3]	@ movhi
 141:Src/control.c **** }
 613              		.loc 1 141 0
 614 0062 08BD     		pop	{r3, pc}
 615              	.L32:
 131:Src/control.c ****     }else if(yawrate_cnt < y_constant_T + y_accel_T){
 616              		.loc 1 131 0
 617 0064 094A     		ldr	r2, .L35
 618 0066 1249     		ldr	r1, .L35+36
 619 0068 4FF4FA60 		mov	r0, #2000
 620 006c FFF7FEFF 		bl	Calc_Palam
 621              	.LVL51:
 622 0070 DDE7     		b	.L28
 623              	.L33:
 133:Src/control.c ****     }else if(yawrate_cnt < y_decrease_T + y_constant_T + y_accel_T){
 624              		.loc 1 133 0
 625 0072 064A     		ldr	r2, .L35
 626 0074 0E49     		ldr	r1, .L35+36
 627 0076 0020     		movs	r0, #0
 628 0078 FFF7FEFF 		bl	Calc_Palam
 629              	.LVL52:
 630 007c D7E7     		b	.L28
 631              	.L34:
 135:Src/control.c ****     }else{
 632              		.loc 1 135 0
 633 007e 034A     		ldr	r2, .L35
 634 0080 0B49     		ldr	r1, .L35+36
 635 0082 0C48     		ldr	r0, .L35+40
 636 0084 FFF7FEFF 		bl	Calc_Palam
 637              	.LVL53:
 638 0088 D1E7     		b	.L28
 639              	.L36:
 640 008a 00BF     		.align	2
 641              	.L35:
 642 008c 00000000 		.word	yawrate_cnt
 643 0090 00000000 		.word	y_accel_T
 644 0094 00000000 		.word	y_constant_T
 645 0098 00000000 		.word	y_decrease_T
 646 009c 00000000 		.word	calc
 647 00a0 00000000 		.word	flag
 648 00a4 08000000 		.word	gyro+8
 649 00a8 00000000 		.word	0
 650 00ac 00000000 		.word	yawrate_pid
 651 00b0 0C000000 		.word	calc+12
 652 00b4 30F8FFFF 		.word	-2000
 653              		.cfi_endproc
 654              	.LFE164:
 656              		.section	.text.Control_pwm,"ax",%progbits
 657              		.align	1
 658              		.global	Control_pwm
 659              		.syntax unified
 660              		.thumb
 661              		.thumb_func
 662              		.fpu fpv4-sp-d16
 664              	Control_pwm:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 15


 665              	.LFB165:
 142:Src/control.c **** 
 143:Src/control.c **** void Control_pwm(void){
 666              		.loc 1 143 0
 667              		.cfi_startproc
 668              		@ args = 0, pretend = 0, frame = 0
 669              		@ frame_needed = 0, uses_anonymous_args = 0
 670 0000 08B5     		push	{r3, lr}
 671              	.LCFI15:
 672              		.cfi_def_cfa_offset 8
 673              		.cfi_offset 3, -8
 674              		.cfi_offset 14, -4
 675              	.LVL54:
 144:Src/control.c ****     int16_t pwm_l=0,pwm_r=0;
 145:Src/control.c **** 
 146:Src/control.c ****     if(flag.straight==ON){
 676              		.loc 1 146 0
 677 0002 0E4B     		ldr	r3, .L44
 678 0004 B3F90230 		ldrsh	r3, [r3, #2]
 679 0008 012B     		cmp	r3, #1
 680 000a 09D0     		beq	.L42
 144:Src/control.c ****     int16_t pwm_l=0,pwm_r=0;
 681              		.loc 1 144 0
 682 000c 0021     		movs	r1, #0
 683 000e 0846     		mov	r0, r1
 684              	.LVL55:
 685              	.L38:
 147:Src/control.c ****         pwm_l += straight_pid_l;
 148:Src/control.c ****         pwm_r += straight_pid_r;
 149:Src/control.c ****     }
 150:Src/control.c ****     if(flag.yawrate==ON){
 686              		.loc 1 150 0
 687 0010 0A4B     		ldr	r3, .L44
 688 0012 B3F90430 		ldrsh	r3, [r3, #4]
 689 0016 012B     		cmp	r3, #1
 690 0018 09D0     		beq	.L43
 691              	.L39:
 151:Src/control.c ****         pwm_l -= yawrate_pid;
 152:Src/control.c ****         pwm_r += yawrate_pid;
 153:Src/control.c ****     }
 154:Src/control.c ****     Motor_pwm(pwm_l,pwm_r);
 692              		.loc 1 154 0
 693 001a FFF7FEFF 		bl	Motor_pwm
 694              	.LVL56:
 155:Src/control.c **** }
 695              		.loc 1 155 0
 696 001e 08BD     		pop	{r3, pc}
 697              	.LVL57:
 698              	.L42:
 147:Src/control.c ****         pwm_l += straight_pid_l;
 699              		.loc 1 147 0
 700 0020 074B     		ldr	r3, .L44+4
 701 0022 B3F90000 		ldrsh	r0, [r3]
 702              	.LVL58:
 148:Src/control.c ****     }
 703              		.loc 1 148 0
 704 0026 074B     		ldr	r3, .L44+8
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 16


 705 0028 B3F90010 		ldrsh	r1, [r3]
 706              	.LVL59:
 707 002c F0E7     		b	.L38
 708              	.L43:
 151:Src/control.c ****         pwm_l -= yawrate_pid;
 709              		.loc 1 151 0
 710 002e 064B     		ldr	r3, .L44+12
 711 0030 1B88     		ldrh	r3, [r3]
 712 0032 C01A     		subs	r0, r0, r3
 713              	.LVL60:
 714 0034 00B2     		sxth	r0, r0
 715              	.LVL61:
 152:Src/control.c ****     }
 716              		.loc 1 152 0
 717 0036 1944     		add	r1, r1, r3
 718              	.LVL62:
 719 0038 09B2     		sxth	r1, r1
 720              	.LVL63:
 721 003a EEE7     		b	.L39
 722              	.L45:
 723              		.align	2
 724              	.L44:
 725 003c 00000000 		.word	flag
 726 0040 00000000 		.word	straight_pid_l
 727 0044 00000000 		.word	straight_pid_r
 728 0048 00000000 		.word	yawrate_pid
 729              		.cfi_endproc
 730              	.LFE165:
 732              		.section	.text.Output_Buzzer,"ax",%progbits
 733              		.align	1
 734              		.global	Output_Buzzer
 735              		.syntax unified
 736              		.thumb
 737              		.thumb_func
 738              		.fpu fpv4-sp-d16
 740              	Output_Buzzer:
 741              	.LFB166:
 156:Src/control.c **** /****************************************************************************************
 157:Src/control.c ****  * outline  : turn on buzzer 0.3sec
 158:Src/control.c ****  * argument : Hz
 159:Src/control.c ****  * return   : void
 160:Src/control.c **** ********************************************************************************************/
 161:Src/control.c **** void Output_Buzzer(uint8_t Hz){
 742              		.loc 1 161 0
 743              		.cfi_startproc
 744              		@ args = 0, pretend = 0, frame = 0
 745              		@ frame_needed = 0, uses_anonymous_args = 0
 746              	.LVL64:
 747 0000 08B5     		push	{r3, lr}
 748              	.LCFI16:
 749              		.cfi_def_cfa_offset 8
 750              		.cfi_offset 3, -8
 751              		.cfi_offset 14, -4
 162:Src/control.c ****     Buzzer_pwm(Hz,300);
 752              		.loc 1 162 0
 753 0002 4FF49671 		mov	r1, #300
 754 0006 FFF7FEFF 		bl	Buzzer_pwm
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 17


 755              	.LVL65:
 163:Src/control.c ****     HAL_Delay(300);
 756              		.loc 1 163 0
 757 000a 4FF49670 		mov	r0, #300
 758 000e FFF7FEFF 		bl	HAL_Delay
 759              	.LVL66:
 164:Src/control.c ****     Buzzer_pwm(HZ_NORMAL,0);
 760              		.loc 1 164 0
 761 0012 0021     		movs	r1, #0
 762 0014 0A20     		movs	r0, #10
 763 0016 FFF7FEFF 		bl	Buzzer_pwm
 764              	.LVL67:
 165:Src/control.c **** }
 765              		.loc 1 165 0
 766 001a 08BD     		pop	{r3, pc}
 767              		.cfi_endproc
 768              	.LFE166:
 770              		.section	.text.Sensor_Check,"ax",%progbits
 771              		.align	1
 772              		.global	Sensor_Check
 773              		.syntax unified
 774              		.thumb
 775              		.thumb_func
 776              		.fpu fpv4-sp-d16
 778              	Sensor_Check:
 779              	.LFB167:
 166:Src/control.c **** 
 167:Src/control.c **** 
 168:Src/control.c **** /****************************************************************************************
 169:Src/control.c ****  * outline  : sensor check
 170:Src/control.c ****  * argument : void
 171:Src/control.c ****  * return   : void
 172:Src/control.c **** ********************************************************************************************/
 173:Src/control.c **** void Sensor_Check(void){
 780              		.loc 1 173 0
 781              		.cfi_startproc
 782              		@ args = 0, pretend = 0, frame = 0
 783              		@ frame_needed = 0, uses_anonymous_args = 0
 784 0000 08B5     		push	{r3, lr}
 785              	.LCFI17:
 786              		.cfi_def_cfa_offset 8
 787              		.cfi_offset 3, -8
 788              		.cfi_offset 14, -4
 174:Src/control.c ****     if(sensor.wall[0]==true){
 789              		.loc 1 174 0
 790 0002 214B     		ldr	r3, .L62
 791 0004 1B7E     		ldrb	r3, [r3, #24]	@ zero_extendqisi2
 792 0006 012B     		cmp	r3, #1
 793 0008 23D0     		beq	.L58
 175:Src/control.c ****         HAL_GPIO_WritePin(led0_GPIO_Port,led0_Pin,GPIO_PIN_RESET);
 176:Src/control.c ****     }else{
 177:Src/control.c ****         HAL_GPIO_WritePin(led0_GPIO_Port,led0_Pin,GPIO_PIN_SET);
 794              		.loc 1 177 0
 795 000a 0122     		movs	r2, #1
 796 000c 4FF40051 		mov	r1, #8192
 797 0010 1E48     		ldr	r0, .L62+4
 798 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 18


 799              	.LVL68:
 800              	.L50:
 178:Src/control.c ****     }
 179:Src/control.c ****     if(sensor.wall[1]==true){
 801              		.loc 1 179 0
 802 0016 1C4B     		ldr	r3, .L62
 803 0018 5B7E     		ldrb	r3, [r3, #25]	@ zero_extendqisi2
 804 001a 012B     		cmp	r3, #1
 805 001c 20D0     		beq	.L59
 180:Src/control.c ****         HAL_GPIO_WritePin(led3_GPIO_Port,led3_Pin,GPIO_PIN_RESET);
 181:Src/control.c ****     }else{
 182:Src/control.c ****         HAL_GPIO_WritePin(led3_GPIO_Port,led3_Pin,GPIO_PIN_SET);
 806              		.loc 1 182 0
 807 001e 0122     		movs	r2, #1
 808 0020 4FF48071 		mov	r1, #256
 809 0024 1948     		ldr	r0, .L62+4
 810 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 811              	.LVL69:
 812              	.L52:
 183:Src/control.c ****     }
 184:Src/control.c ****     if(sensor.wall[2]==true){
 813              		.loc 1 184 0
 814 002a 174B     		ldr	r3, .L62
 815 002c 9B7E     		ldrb	r3, [r3, #26]	@ zero_extendqisi2
 816 002e 012B     		cmp	r3, #1
 817 0030 1DD0     		beq	.L60
 185:Src/control.c ****         HAL_GPIO_WritePin(led2_GPIO_Port,led2_Pin,GPIO_PIN_RESET);
 186:Src/control.c ****     }else{
 187:Src/control.c ****         HAL_GPIO_WritePin(led2_GPIO_Port,led2_Pin,GPIO_PIN_SET);
 818              		.loc 1 187 0
 819 0032 0122     		movs	r2, #1
 820 0034 8021     		movs	r1, #128
 821 0036 1548     		ldr	r0, .L62+4
 822 0038 FFF7FEFF 		bl	HAL_GPIO_WritePin
 823              	.LVL70:
 824              	.L54:
 188:Src/control.c ****     }
 189:Src/control.c ****     if(sensor.wall[3]==true){
 825              		.loc 1 189 0
 826 003c 124B     		ldr	r3, .L62
 827 003e DB7E     		ldrb	r3, [r3, #27]	@ zero_extendqisi2
 828 0040 012B     		cmp	r3, #1
 829 0042 1AD0     		beq	.L61
 190:Src/control.c ****         HAL_GPIO_WritePin(led1_GPIO_Port,led1_Pin,GPIO_PIN_RESET);
 191:Src/control.c ****     }else{
 192:Src/control.c ****         HAL_GPIO_WritePin(led1_GPIO_Port,led1_Pin,GPIO_PIN_SET);
 830              		.loc 1 192 0
 831 0044 0122     		movs	r2, #1
 832 0046 4FF48041 		mov	r1, #16384
 833 004a 1048     		ldr	r0, .L62+4
 834 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 835              	.LVL71:
 836              	.L48:
 193:Src/control.c ****     } 
 194:Src/control.c **** }
 837              		.loc 1 194 0
 838 0050 08BD     		pop	{r3, pc}
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 19


 839              	.L58:
 175:Src/control.c ****     }else{
 840              		.loc 1 175 0
 841 0052 0022     		movs	r2, #0
 842 0054 4FF40051 		mov	r1, #8192
 843 0058 0C48     		ldr	r0, .L62+4
 844 005a FFF7FEFF 		bl	HAL_GPIO_WritePin
 845              	.LVL72:
 846 005e DAE7     		b	.L50
 847              	.L59:
 180:Src/control.c ****     }else{
 848              		.loc 1 180 0
 849 0060 0022     		movs	r2, #0
 850 0062 4FF48071 		mov	r1, #256
 851 0066 0948     		ldr	r0, .L62+4
 852 0068 FFF7FEFF 		bl	HAL_GPIO_WritePin
 853              	.LVL73:
 854 006c DDE7     		b	.L52
 855              	.L60:
 185:Src/control.c ****     }else{
 856              		.loc 1 185 0
 857 006e 0022     		movs	r2, #0
 858 0070 8021     		movs	r1, #128
 859 0072 0648     		ldr	r0, .L62+4
 860 0074 FFF7FEFF 		bl	HAL_GPIO_WritePin
 861              	.LVL74:
 862 0078 E0E7     		b	.L54
 863              	.L61:
 190:Src/control.c ****     }else{
 864              		.loc 1 190 0
 865 007a 0022     		movs	r2, #0
 866 007c 4FF48041 		mov	r1, #16384
 867 0080 0248     		ldr	r0, .L62+4
 868 0082 FFF7FEFF 		bl	HAL_GPIO_WritePin
 869              	.LVL75:
 870 0086 E3E7     		b	.L48
 871              	.L63:
 872              		.align	2
 873              	.L62:
 874 0088 00000000 		.word	sensor
 875 008c 00080240 		.word	1073874944
 876              		.cfi_endproc
 877              	.LFE167:
 879              		.comm	yawrate_pid,2,2
 880              		.comm	straight_pid_r,2,2
 881              		.comm	straight_pid_l,2,2
 882              		.comm	y_sum,4,4
 883              		.comm	s_sum_r,4,4
 884              		.comm	s_sum_l,4,4
 885              		.section	.rodata.Straight_Calc_fb.str1.4,"aMS",%progbits,1
 886              		.align	2
 887              	.LC0:
 888 0000 0A74313A 		.ascii	"\012t1:%f,t2:%f,t3%f\015\012\000"
 888      25662C74 
 888      323A2566 
 888      2C743325 
 888      660D0A00 
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 20


 889              		.text
 890              	.Letext0:
 891              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 892              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 893              		.file 4 "Inc/control.h"
 894              		.file 5 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 895              		.file 6 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 896              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\lib\\gcc\\arm-none-eabi
 897              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 898              		.file 9 "Inc/global.h"
 899              		.file 10 "Drivers/CMSIS/Include/core_cm4.h"
 900              		.file 11 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 901              		.file 12 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 902              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 903              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 904              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 905              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 906              		.file 17 "Inc/tim.h"
 907              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 908              		.file 19 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 909              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 21


DEFINED SYMBOLS
                            *ABS*:00000000 control.c
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:18     .text.PID_value:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:25     .text.PID_value:00000000 PID_value
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:70     .text.PID_value:00000040 $d
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:76     .text.Calc_Palam:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:83     .text.Calc_Palam:00000000 Calc_Palam
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:112    .text.Calc_Palam:00000034 $d
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:118    .text.Straight_Calc_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:125    .text.Straight_Calc_fb:00000000 Straight_Calc_fb
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:248    .text.Straight_Calc_fb:000000d4 $d
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:260    .text.Straight_SysTic_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:267    .text.Straight_SysTic_fb:00000000 Straight_SysTic_fb
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:386    .text.Straight_SysTic_fb:000000d0 $d
                            *COM*:00000004 s_sum_l
                            *COM*:00000002 straight_pid_l
                            *COM*:00000004 s_sum_r
                            *COM*:00000002 straight_pid_r
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:405    .text.Yawrate_Calc_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:412    .text.Yawrate_Calc_fb:00000000 Yawrate_Calc_fb
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:537    .text.Yawrate_Calc_fb:000000e0 $d
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:549    .text.Yawrate_SysTic_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:556    .text.Yawrate_SysTic_fb:00000000 Yawrate_SysTic_fb
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:642    .text.Yawrate_SysTic_fb:0000008c $d
                            *COM*:00000002 yawrate_pid
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:657    .text.Control_pwm:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:664    .text.Control_pwm:00000000 Control_pwm
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:725    .text.Control_pwm:0000003c $d
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:733    .text.Output_Buzzer:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:740    .text.Output_Buzzer:00000000 Output_Buzzer
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:771    .text.Sensor_Check:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:778    .text.Sensor_Check:00000000 Sensor_Check
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:874    .text.Sensor_Check:00000088 $d
                            *COM*:00000004 y_sum
C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s:886    .rodata.Straight_Calc_fb.str1.4:00000000 $d

UNDEFINED SYMBOLS
batt_Vcc
__aeabi_f2d
printf
calc
accel_T
constant_T
decrease_T
straight_cnt
flag
enc
y_accel_T
y_constant_T
y_decrease_T
yawrate_cnt
gyro
Motor_pwm
Buzzer_pwm
HAL_Delay
HAL_GPIO_WritePin
sensor
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccO5XXRS.s 			page 22


