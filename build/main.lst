ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.__io_putchar,"ax",%progbits
  18              		.align	1
  19              		.global	__io_putchar
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	__io_putchar:
  26              	.LFB159:
  27              		.file 1 "Src/main.c"
   1:Src/main.c    **** /**
   2:Src/main.c    ****   ******************************************************************************
   3:Src/main.c    ****   * @file           : main.c
   4:Src/main.c    ****   * @brief          : Main program body
   5:Src/main.c    ****   ******************************************************************************
   6:Src/main.c    ****   ** This notice applies to any and all portions of this file
   7:Src/main.c    ****   * that are not between comment pairs USER CODE BEGIN and
   8:Src/main.c    ****   * USER CODE END. Other portions of this file, whether 
   9:Src/main.c    ****   * inserted by the user or by software development tools
  10:Src/main.c    ****   * are owned by their respective copyright owners.
  11:Src/main.c    ****   *
  12:Src/main.c    ****   * COPYRIGHT(c) 2018 STMicroelectronics
  13:Src/main.c    ****   *
  14:Src/main.c    ****   * Redistribution and use in source and binary forms, with or without modification,
  15:Src/main.c    ****   * are permitted provided that the following conditions are met:
  16:Src/main.c    ****   *   1. Redistributions of source code must retain the above copyright notice,
  17:Src/main.c    ****   *      this list of conditions and the following disclaimer.
  18:Src/main.c    ****   *   2. Redistributions in binary form must reproduce the above copyright notice,
  19:Src/main.c    ****   *      this list of conditions and the following disclaimer in the documentation
  20:Src/main.c    ****   *      and/or other materials provided with the distribution.
  21:Src/main.c    ****   *   3. Neither the name of STMicroelectronics nor the names of its contributors
  22:Src/main.c    ****   *      may be used to endorse or promote products derived from this software
  23:Src/main.c    ****   *      without specific prior written permission.
  24:Src/main.c    ****   *
  25:Src/main.c    ****   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  26:Src/main.c    ****   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  27:Src/main.c    ****   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  28:Src/main.c    ****   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  29:Src/main.c    ****   * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  30:Src/main.c    ****   * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  31:Src/main.c    ****   * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 2


  32:Src/main.c    ****   * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  33:Src/main.c    ****   * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  34:Src/main.c    ****   * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  35:Src/main.c    ****   *
  36:Src/main.c    ****   ******************************************************************************
  37:Src/main.c    ****   */
  38:Src/main.c    **** /* Includes ------------------------------------------------------------------*/
  39:Src/main.c    **** #include "main.h"
  40:Src/main.c    **** #include "stm32f4xx_hal.h"
  41:Src/main.c    **** #include "adc.h"
  42:Src/main.c    **** #include "spi.h"
  43:Src/main.c    **** #include "tim.h"
  44:Src/main.c    **** #include "usart.h"
  45:Src/main.c    **** #include "gpio.h"
  46:Src/main.c    **** 
  47:Src/main.c    **** /* USER CODE BEGIN Includes */
  48:Src/main.c    **** #include "arm_math.h"
  49:Src/main.c    **** #include "global.h"
  50:Src/main.c    **** #include "control.h"
  51:Src/main.c    **** #include "flash.h"
  52:Src/main.c    **** #include "mode.h"
  53:Src/main.c    **** /* USER CODE END Includes */
  54:Src/main.c    **** 
  55:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  56:Src/main.c    **** 
  57:Src/main.c    **** /* USER CODE BEGIN PV */
  58:Src/main.c    **** #ifdef __GNUC__
  59:Src/main.c    **** #define PUTCHAR_PROTOTYPE int __io_putchar(int ch)
  60:Src/main.c    **** #else
  61:Src/main.c    **** #define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)
  62:Src/main.c    **** #endif /* __GNUC__ */
  63:Src/main.c    **** void __io_putchar(uint8_t ch) {
  28              		.loc 1 63 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 00B5     		push	{lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 14, -4
  37 0002 83B0     		sub	sp, sp, #12
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 16
  40 0004 02A9     		add	r1, sp, #8
  41 0006 01F8010D 		strb	r0, [r1, #-1]!
  64:Src/main.c    ****   HAL_UART_Transmit(&huart3, &ch, 1, 1);
  42              		.loc 1 64 0
  43 000a 0123     		movs	r3, #1
  44 000c 1A46     		mov	r2, r3
  45 000e 0348     		ldr	r0, .L3
  46              	.LVL1:
  47 0010 FFF7FEFF 		bl	HAL_UART_Transmit
  48              	.LVL2:
  65:Src/main.c    **** }
  49              		.loc 1 65 0
  50 0014 03B0     		add	sp, sp, #12
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 3


  51              	.LCFI2:
  52              		.cfi_def_cfa_offset 4
  53              		@ sp needed
  54 0016 5DF804FB 		ldr	pc, [sp], #4
  55              	.L4:
  56 001a 00BF     		.align	2
  57              	.L3:
  58 001c 00000000 		.word	huart3
  59              		.cfi_endproc
  60              	.LFE159:
  62              		.global	__aeabi_f2d
  63              		.section	.text.Batt_Check,"ax",%progbits
  64              		.align	1
  65              		.global	Batt_Check
  66              		.syntax unified
  67              		.thumb
  68              		.thumb_func
  69              		.fpu fpv4-sp-d16
  71              	Batt_Check:
  72              	.LFB162:
  66:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  67:Src/main.c    **** 
  68:Src/main.c    **** /* USER CODE END PV */
  69:Src/main.c    **** 
  70:Src/main.c    **** /* Private function prototypes -----------------------------------------------*/
  71:Src/main.c    **** void SystemClock_Config(void);
  72:Src/main.c    **** 
  73:Src/main.c    **** /* USER CODE BEGIN PFP */
  74:Src/main.c    **** /* Private function prototypes -----------------------------------------------*/
  75:Src/main.c    **** void Batt_Check(void);
  76:Src/main.c    **** void Init_Main(void);
  77:Src/main.c    **** /* USER CODE END PFP */
  78:Src/main.c    **** 
  79:Src/main.c    **** /* USER CODE BEGIN 0 */
  80:Src/main.c    **** 
  81:Src/main.c    **** /* USER CODE END 0 */
  82:Src/main.c    **** 
  83:Src/main.c    **** /**
  84:Src/main.c    ****   * @brief  The application entry point.
  85:Src/main.c    ****   *
  86:Src/main.c    ****   * @retval None
  87:Src/main.c    ****   */
  88:Src/main.c    **** int main(void)
  89:Src/main.c    **** {
  90:Src/main.c    ****   /* USER CODE BEGIN 1 */
  91:Src/main.c    **** 
  92:Src/main.c    ****   /* USER CODE END 1 */
  93:Src/main.c    **** 
  94:Src/main.c    ****   /* MCU Configuration----------------------------------------------------------*/
  95:Src/main.c    **** 
  96:Src/main.c    ****   /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  97:Src/main.c    ****   HAL_Init();
  98:Src/main.c    **** 
  99:Src/main.c    ****   /* USER CODE BEGIN Init */
 100:Src/main.c    **** 
 101:Src/main.c    ****   /* USER CODE END Init */
 102:Src/main.c    **** 
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 4


 103:Src/main.c    ****   /* Configure the system clock */
 104:Src/main.c    ****   SystemClock_Config();
 105:Src/main.c    **** 
 106:Src/main.c    ****   /* USER CODE BEGIN SysInit */
 107:Src/main.c    **** 
 108:Src/main.c    ****   /* USER CODE END SysInit */
 109:Src/main.c    **** 
 110:Src/main.c    ****   /* Initialize all configured peripherals */
 111:Src/main.c    ****   MX_GPIO_Init();
 112:Src/main.c    ****   MX_USART3_UART_Init();
 113:Src/main.c    ****   MX_TIM4_Init();
 114:Src/main.c    ****   MX_SPI2_Init();
 115:Src/main.c    ****   MX_TIM3_Init();
 116:Src/main.c    ****   MX_TIM2_Init();
 117:Src/main.c    ****   MX_TIM1_Init();
 118:Src/main.c    ****   MX_TIM5_Init();
 119:Src/main.c    ****   MX_ADC1_Init();
 120:Src/main.c    ****   MX_ADC2_Init();
 121:Src/main.c    ****   MX_ADC3_Init();
 122:Src/main.c    ****   /* USER CODE BEGIN 2 */
 123:Src/main.c    ****   Init_Main();
 124:Src/main.c    ****   
 125:Src/main.c    ****   /* USER CODE END 2 */
 126:Src/main.c    **** 
 127:Src/main.c    ****   /* Infinite loop */
 128:Src/main.c    ****   /* USER CODE BEGIN WHILE */
 129:Src/main.c    ****   while (1)
 130:Src/main.c    ****   {
 131:Src/main.c    ****     Mode_mouse(Mode_select());
 132:Src/main.c    ****   /* USER CODE END WHILE */
 133:Src/main.c    **** 
 134:Src/main.c    ****   /* USER CODE BEGIN 3 */
 135:Src/main.c    **** 
 136:Src/main.c    ****   }
 137:Src/main.c    ****   /* USER CODE END 3 */
 138:Src/main.c    **** 
 139:Src/main.c    **** }
 140:Src/main.c    **** 
 141:Src/main.c    **** /**
 142:Src/main.c    ****   * @brief System Clock Configuration
 143:Src/main.c    ****   * @retval None
 144:Src/main.c    ****   */
 145:Src/main.c    **** void SystemClock_Config(void)
 146:Src/main.c    **** {
 147:Src/main.c    **** 
 148:Src/main.c    ****   RCC_OscInitTypeDef RCC_OscInitStruct;
 149:Src/main.c    ****   RCC_ClkInitTypeDef RCC_ClkInitStruct;
 150:Src/main.c    **** 
 151:Src/main.c    ****     /**Configure the main internal regulator output voltage 
 152:Src/main.c    ****     */
 153:Src/main.c    ****   __HAL_RCC_PWR_CLK_ENABLE();
 154:Src/main.c    **** 
 155:Src/main.c    ****   __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);
 156:Src/main.c    **** 
 157:Src/main.c    ****     /**Initializes the CPU, AHB and APB busses clocks 
 158:Src/main.c    ****     */
 159:Src/main.c    ****   RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 5


 160:Src/main.c    ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 161:Src/main.c    ****   RCC_OscInitStruct.HSICalibrationValue = 16;
 162:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 163:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
 164:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLM = 8;
 165:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLN = 80;
 166:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
 167:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLQ = 4;
 168:Src/main.c    ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 169:Src/main.c    ****   {
 170:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 171:Src/main.c    ****   }
 172:Src/main.c    **** 
 173:Src/main.c    ****     /**Initializes the CPU, AHB and APB busses clocks 
 174:Src/main.c    ****     */
 175:Src/main.c    ****   RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
 176:Src/main.c    ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 177:Src/main.c    ****   RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
 178:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV2;
 179:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;
 180:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 181:Src/main.c    **** 
 182:Src/main.c    ****   if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_1) != HAL_OK)
 183:Src/main.c    ****   {
 184:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 185:Src/main.c    ****   }
 186:Src/main.c    **** 
 187:Src/main.c    ****     /**Configure the Systick interrupt time 
 188:Src/main.c    ****     */
 189:Src/main.c    ****   HAL_SYSTICK_Config(HAL_RCC_GetHCLKFreq()/1000);
 190:Src/main.c    **** 
 191:Src/main.c    ****     /**Configure the Systick 
 192:Src/main.c    ****     */
 193:Src/main.c    ****   HAL_SYSTICK_CLKSourceConfig(SYSTICK_CLKSOURCE_HCLK);
 194:Src/main.c    **** 
 195:Src/main.c    ****   /* SysTick_IRQn interrupt configuration */
 196:Src/main.c    ****   HAL_NVIC_SetPriority(SysTick_IRQn, 0, 0);
 197:Src/main.c    **** }
 198:Src/main.c    **** 
 199:Src/main.c    **** /* USER CODE BEGIN 4 */
 200:Src/main.c    **** 
 201:Src/main.c    **** /****************************************************************************************
 202:Src/main.c    ****  * outline  : normalize battery (12bit -> dec)
 203:Src/main.c    ****  * argument : void
 204:Src/main.c    ****  * return   : void
 205:Src/main.c    **** ********************************************************************************************/
 206:Src/main.c    **** void Batt_Check(void)
 207:Src/main.c    **** {
  73              		.loc 1 207 0
  74              		.cfi_startproc
  75              		@ args = 0, pretend = 0, frame = 0
  76              		@ frame_needed = 0, uses_anonymous_args = 0
  77 0000 08B5     		push	{r3, lr}
  78              	.LCFI3:
  79              		.cfi_def_cfa_offset 8
  80              		.cfi_offset 3, -8
  81              		.cfi_offset 14, -4
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 6


  82              	.LVL3:
  83              	.LBB2:
 208:Src/main.c    ****   float batt=0;
 209:Src/main.c    ****   for(int i=0;i<50;i++){
  84              		.loc 1 209 0
  85 0002 0023     		movs	r3, #0
  86              	.LBE2:
 208:Src/main.c    ****   float batt=0;
  87              		.loc 1 208 0
  88 0004 9FED177A 		vldr.32	s14, .L9
  89              	.LBB3:
  90              		.loc 1 209 0
  91 0008 08E0     		b	.L6
  92              	.LVL4:
  93              	.L7:
 210:Src/main.c    ****     batt += batt_analog;
  94              		.loc 1 210 0 discriminator 3
  95 000a 174A     		ldr	r2, .L9+4
  96 000c 1288     		ldrh	r2, [r2]
  97 000e 07EE902A 		vmov	s15, r2	@ int
  98 0012 F8EEE77A 		vcvt.f32.s32	s15, s15
  99 0016 37EE277A 		vadd.f32	s14, s14, s15
 100              	.LVL5:
 209:Src/main.c    ****     batt += batt_analog;
 101              		.loc 1 209 0 discriminator 3
 102 001a 0133     		adds	r3, r3, #1
 103              	.LVL6:
 104              	.L6:
 209:Src/main.c    ****     batt += batt_analog;
 105              		.loc 1 209 0 is_stmt 0 discriminator 1
 106 001c 312B     		cmp	r3, #49
 107 001e F4DD     		ble	.L7
 108              	.LBE3:
 211:Src/main.c    ****   }
 212:Src/main.c    ****   batt /= 50.0;
 109              		.loc 1 212 0 is_stmt 1
 110 0020 DFED127A 		vldr.32	s15, .L9+8
 111 0024 C7EE276A 		vdiv.f32	s13, s14, s15
 112              	.LVL7:
 213:Src/main.c    ****   batt = batt/4095.0f*133.0f/33.0f*3.3f;
 113              		.loc 1 213 0
 114 0028 DFED117A 		vldr.32	s15, .L9+12
 115 002c 86EEA77A 		vdiv.f32	s14, s13, s15
 116 0030 DFED107A 		vldr.32	s15, .L9+16
 117 0034 27EE277A 		vmul.f32	s14, s14, s15
 118 0038 DFED0F6A 		vldr.32	s13, .L9+20
 119              	.LVL8:
 120 003c C7EE267A 		vdiv.f32	s15, s14, s13
 121 0040 9FED0E7A 		vldr.32	s14, .L9+24
 122 0044 67EE877A 		vmul.f32	s15, s15, s14
 123              	.LVL9:
 214:Src/main.c    ****   batt_Vcc = batt;
 124              		.loc 1 214 0
 125 0048 0D4B     		ldr	r3, .L9+28
 126              	.LVL10:
 127 004a C3ED007A 		vstr.32	s15, [r3]
 215:Src/main.c    ****   printf("\nbatt:%lf\r\n",batt_Vcc);
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 7


 128              		.loc 1 215 0
 129 004e 17EE900A 		vmov	r0, s15
 130 0052 FFF7FEFF 		bl	__aeabi_f2d
 131              	.LVL11:
 132 0056 0246     		mov	r2, r0
 133 0058 0B46     		mov	r3, r1
 134 005a 0A48     		ldr	r0, .L9+32
 135 005c FFF7FEFF 		bl	printf
 136              	.LVL12:
 216:Src/main.c    **** }
 137              		.loc 1 216 0
 138 0060 08BD     		pop	{r3, pc}
 139              	.L10:
 140 0062 00BF     		.align	2
 141              	.L9:
 142 0064 00000000 		.word	0
 143 0068 00000000 		.word	batt_analog
 144 006c 00004842 		.word	1112014848
 145 0070 00F07F45 		.word	1166012416
 146 0074 00000543 		.word	1124401152
 147 0078 00000442 		.word	1107558400
 148 007c 33335340 		.word	1079194419
 149 0080 00000000 		.word	batt_Vcc
 150 0084 00000000 		.word	.LC0
 151              		.cfi_endproc
 152              	.LFE162:
 154              		.section	.text.Init_Main,"ax",%progbits
 155              		.align	1
 156              		.global	Init_Main
 157              		.syntax unified
 158              		.thumb
 159              		.thumb_func
 160              		.fpu fpv4-sp-d16
 162              	Init_Main:
 163              	.LFB163:
 217:Src/main.c    **** 
 218:Src/main.c    **** /****************************************************************************************
 219:Src/main.c    ****  * outline  : init main(setbuf,tim5,3,4,gyro,battery,flag,ms_count)
 220:Src/main.c    ****  * argument : void
 221:Src/main.c    ****  * return   : void
 222:Src/main.c    **** ********************************************************************************************/
 223:Src/main.c    **** void Init_Main(void){
 164              		.loc 1 223 0
 165              		.cfi_startproc
 166              		@ args = 0, pretend = 0, frame = 0
 167              		@ frame_needed = 0, uses_anonymous_args = 0
 168 0000 08B5     		push	{r3, lr}
 169              	.LCFI4:
 170              		.cfi_def_cfa_offset 8
 171              		.cfi_offset 3, -8
 172              		.cfi_offset 14, -4
 224:Src/main.c    ****   setbuf(stdout, NULL);
 173              		.loc 1 224 0
 174 0002 0F4B     		ldr	r3, .L13
 175 0004 1B68     		ldr	r3, [r3]
 176 0006 0021     		movs	r1, #0
 177 0008 9868     		ldr	r0, [r3, #8]
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 8


 178 000a FFF7FEFF 		bl	setbuf
 179              	.LVL13:
 225:Src/main.c    ****   HAL_TIM_Base_Start_IT( &htim5 );
 180              		.loc 1 225 0
 181 000e 0D48     		ldr	r0, .L13+4
 182 0010 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 183              	.LVL14:
 226:Src/main.c    ****   HAL_TIM_Encoder_Start( &htim3, TIM_CHANNEL_ALL );
 184              		.loc 1 226 0
 185 0014 1821     		movs	r1, #24
 186 0016 0C48     		ldr	r0, .L13+8
 187 0018 FFF7FEFF 		bl	HAL_TIM_Encoder_Start
 188              	.LVL15:
 227:Src/main.c    ****   HAL_TIM_Encoder_Start( &htim4, TIM_CHANNEL_ALL );
 189              		.loc 1 227 0
 190 001c 1821     		movs	r1, #24
 191 001e 0B48     		ldr	r0, .L13+12
 192 0020 FFF7FEFF 		bl	HAL_TIM_Encoder_Start
 193              	.LVL16:
 228:Src/main.c    ****   set_mpu6500();
 194              		.loc 1 228 0
 195 0024 FFF7FEFF 		bl	set_mpu6500
 196              	.LVL17:
 229:Src/main.c    ****   Batt_Check();
 197              		.loc 1 229 0
 198 0028 FFF7FEFF 		bl	Batt_Check
 199              	.LVL18:
 230:Src/main.c    ****   flag.ir_led = OFF;
 200              		.loc 1 230 0
 201 002c 084A     		ldr	r2, .L13+16
 202 002e 0023     		movs	r3, #0
 203 0030 D380     		strh	r3, [r2, #6]	@ movhi
 231:Src/main.c    ****   flag.straight = OFF;
 204              		.loc 1 231 0
 205 0032 5380     		strh	r3, [r2, #2]	@ movhi
 232:Src/main.c    ****   flag.yawrate = OFF;
 206              		.loc 1 232 0
 207 0034 9380     		strh	r3, [r2, #4]	@ movhi
 233:Src/main.c    ****   straight_cnt = 0;
 208              		.loc 1 233 0
 209 0036 074A     		ldr	r2, .L13+20
 210 0038 1380     		strh	r3, [r2]	@ movhi
 234:Src/main.c    ****   yawrate_cnt = 0;
 211              		.loc 1 234 0
 212 003a 074A     		ldr	r2, .L13+24
 213 003c 1380     		strh	r3, [r2]	@ movhi
 235:Src/main.c    **** }
 214              		.loc 1 235 0
 215 003e 08BD     		pop	{r3, pc}
 216              	.L14:
 217              		.align	2
 218              	.L13:
 219 0040 00000000 		.word	_impure_ptr
 220 0044 00000000 		.word	htim5
 221 0048 00000000 		.word	htim3
 222 004c 00000000 		.word	htim4
 223 0050 00000000 		.word	flag
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 9


 224 0054 00000000 		.word	straight_cnt
 225 0058 00000000 		.word	yawrate_cnt
 226              		.cfi_endproc
 227              	.LFE163:
 229              		.section	.text._Error_Handler,"ax",%progbits
 230              		.align	1
 231              		.global	_Error_Handler
 232              		.syntax unified
 233              		.thumb
 234              		.thumb_func
 235              		.fpu fpv4-sp-d16
 237              	_Error_Handler:
 238              	.LFB164:
 236:Src/main.c    **** 
 237:Src/main.c    **** /* USER CODE END 4 */
 238:Src/main.c    **** 
 239:Src/main.c    **** /**
 240:Src/main.c    ****   * @brief  This function is executed in case of error occurrence.
 241:Src/main.c    ****   * @param  file: The file name as string.
 242:Src/main.c    ****   * @param  line: The line in file as a number.
 243:Src/main.c    ****   * @retval None
 244:Src/main.c    ****   */
 245:Src/main.c    **** void _Error_Handler(char *file, int line)
 246:Src/main.c    **** {
 239              		.loc 1 246 0
 240              		.cfi_startproc
 241              		@ Volatile: function does not return.
 242              		@ args = 0, pretend = 0, frame = 0
 243              		@ frame_needed = 0, uses_anonymous_args = 0
 244              		@ link register save eliminated.
 245              	.LVL19:
 246              	.L16:
 247 0000 FEE7     		b	.L16
 248              		.cfi_endproc
 249              	.LFE164:
 251              		.section	.text.SystemClock_Config,"ax",%progbits
 252              		.align	1
 253              		.global	SystemClock_Config
 254              		.syntax unified
 255              		.thumb
 256              		.thumb_func
 257              		.fpu fpv4-sp-d16
 259              	SystemClock_Config:
 260              	.LFB161:
 146:Src/main.c    **** 
 261              		.loc 1 146 0
 262              		.cfi_startproc
 263              		@ args = 0, pretend = 0, frame = 80
 264              		@ frame_needed = 0, uses_anonymous_args = 0
 146:Src/main.c    **** 
 265              		.loc 1 146 0
 266 0000 00B5     		push	{lr}
 267              	.LCFI5:
 268              		.cfi_def_cfa_offset 4
 269              		.cfi_offset 14, -4
 270 0002 95B0     		sub	sp, sp, #84
 271              	.LCFI6:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 10


 272              		.cfi_def_cfa_offset 88
 273              	.LBB4:
 153:Src/main.c    **** 
 274              		.loc 1 153 0
 275 0004 0022     		movs	r2, #0
 276 0006 0192     		str	r2, [sp, #4]
 277 0008 294B     		ldr	r3, .L23
 278 000a 196C     		ldr	r1, [r3, #64]
 279 000c 41F08051 		orr	r1, r1, #268435456
 280 0010 1964     		str	r1, [r3, #64]
 281 0012 1B6C     		ldr	r3, [r3, #64]
 282 0014 03F08053 		and	r3, r3, #268435456
 283 0018 0193     		str	r3, [sp, #4]
 284 001a 019B     		ldr	r3, [sp, #4]
 285              	.LBE4:
 286              	.LBB5:
 155:Src/main.c    **** 
 287              		.loc 1 155 0
 288 001c 0292     		str	r2, [sp, #8]
 289 001e 254B     		ldr	r3, .L23+4
 290 0020 1968     		ldr	r1, [r3]
 291 0022 41F48041 		orr	r1, r1, #16384
 292 0026 1960     		str	r1, [r3]
 293 0028 1B68     		ldr	r3, [r3]
 294 002a 03F48043 		and	r3, r3, #16384
 295 002e 0293     		str	r3, [sp, #8]
 296 0030 029B     		ldr	r3, [sp, #8]
 297              	.LBE5:
 159:Src/main.c    ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 298              		.loc 1 159 0
 299 0032 0223     		movs	r3, #2
 300 0034 0893     		str	r3, [sp, #32]
 160:Src/main.c    ****   RCC_OscInitStruct.HSICalibrationValue = 16;
 301              		.loc 1 160 0
 302 0036 0121     		movs	r1, #1
 303 0038 0B91     		str	r1, [sp, #44]
 161:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 304              		.loc 1 161 0
 305 003a 1021     		movs	r1, #16
 306 003c 0C91     		str	r1, [sp, #48]
 162:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
 307              		.loc 1 162 0
 308 003e 0E93     		str	r3, [sp, #56]
 163:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLM = 8;
 309              		.loc 1 163 0
 310 0040 0F92     		str	r2, [sp, #60]
 164:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLN = 80;
 311              		.loc 1 164 0
 312 0042 0822     		movs	r2, #8
 313 0044 1092     		str	r2, [sp, #64]
 165:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
 314              		.loc 1 165 0
 315 0046 5022     		movs	r2, #80
 316 0048 1192     		str	r2, [sp, #68]
 166:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLQ = 4;
 317              		.loc 1 166 0
 318 004a 1293     		str	r3, [sp, #72]
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 11


 167:Src/main.c    ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 319              		.loc 1 167 0
 320 004c 0423     		movs	r3, #4
 321 004e 1393     		str	r3, [sp, #76]
 168:Src/main.c    ****   {
 322              		.loc 1 168 0
 323 0050 08A8     		add	r0, sp, #32
 324 0052 FFF7FEFF 		bl	HAL_RCC_OscConfig
 325              	.LVL20:
 326 0056 18BB     		cbnz	r0, .L21
 175:Src/main.c    ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 327              		.loc 1 175 0
 328 0058 0F23     		movs	r3, #15
 329 005a 0393     		str	r3, [sp, #12]
 177:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV2;
 330              		.loc 1 177 0
 331 005c 0223     		movs	r3, #2
 332 005e 0493     		str	r3, [sp, #16]
 178:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;
 333              		.loc 1 178 0
 334 0060 8023     		movs	r3, #128
 335 0062 0593     		str	r3, [sp, #20]
 179:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 336              		.loc 1 179 0
 337 0064 4FF48053 		mov	r3, #4096
 338 0068 0693     		str	r3, [sp, #24]
 180:Src/main.c    **** 
 339              		.loc 1 180 0
 340 006a 0023     		movs	r3, #0
 341 006c 0793     		str	r3, [sp, #28]
 182:Src/main.c    ****   {
 342              		.loc 1 182 0
 343 006e 0121     		movs	r1, #1
 344 0070 03A8     		add	r0, sp, #12
 345 0072 FFF7FEFF 		bl	HAL_RCC_ClockConfig
 346              	.LVL21:
 347 0076 B8B9     		cbnz	r0, .L22
 189:Src/main.c    **** 
 348              		.loc 1 189 0
 349 0078 FFF7FEFF 		bl	HAL_RCC_GetHCLKFreq
 350              	.LVL22:
 351 007c 0E4B     		ldr	r3, .L23+8
 352 007e A3FB0030 		umull	r3, r0, r3, r0
 353 0082 8009     		lsrs	r0, r0, #6
 354 0084 FFF7FEFF 		bl	HAL_SYSTICK_Config
 355              	.LVL23:
 193:Src/main.c    **** 
 356              		.loc 1 193 0
 357 0088 0420     		movs	r0, #4
 358 008a FFF7FEFF 		bl	HAL_SYSTICK_CLKSourceConfig
 359              	.LVL24:
 196:Src/main.c    **** }
 360              		.loc 1 196 0
 361 008e 0022     		movs	r2, #0
 362 0090 1146     		mov	r1, r2
 363 0092 4FF0FF30 		mov	r0, #-1
 364 0096 FFF7FEFF 		bl	HAL_NVIC_SetPriority
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 12


 365              	.LVL25:
 197:Src/main.c    **** 
 366              		.loc 1 197 0
 367 009a 15B0     		add	sp, sp, #84
 368              	.LCFI7:
 369              		.cfi_remember_state
 370              		.cfi_def_cfa_offset 4
 371              		@ sp needed
 372 009c 5DF804FB 		ldr	pc, [sp], #4
 373              	.L21:
 374              	.LCFI8:
 375              		.cfi_restore_state
 170:Src/main.c    ****   }
 376              		.loc 1 170 0
 377 00a0 AA21     		movs	r1, #170
 378 00a2 0648     		ldr	r0, .L23+12
 379 00a4 FFF7FEFF 		bl	_Error_Handler
 380              	.LVL26:
 381              	.L22:
 184:Src/main.c    ****   }
 382              		.loc 1 184 0
 383 00a8 B821     		movs	r1, #184
 384 00aa 0448     		ldr	r0, .L23+12
 385 00ac FFF7FEFF 		bl	_Error_Handler
 386              	.LVL27:
 387              	.L24:
 388              		.align	2
 389              	.L23:
 390 00b0 00380240 		.word	1073887232
 391 00b4 00700040 		.word	1073770496
 392 00b8 D34D6210 		.word	274877907
 393 00bc 00000000 		.word	.LC1
 394              		.cfi_endproc
 395              	.LFE161:
 397              		.section	.text.main,"ax",%progbits
 398              		.align	1
 399              		.global	main
 400              		.syntax unified
 401              		.thumb
 402              		.thumb_func
 403              		.fpu fpv4-sp-d16
 405              	main:
 406              	.LFB160:
  89:Src/main.c    ****   /* USER CODE BEGIN 1 */
 407              		.loc 1 89 0
 408              		.cfi_startproc
 409              		@ Volatile: function does not return.
 410              		@ args = 0, pretend = 0, frame = 0
 411              		@ frame_needed = 0, uses_anonymous_args = 0
 412 0000 08B5     		push	{r3, lr}
 413              	.LCFI9:
 414              		.cfi_def_cfa_offset 8
 415              		.cfi_offset 3, -8
 416              		.cfi_offset 14, -4
  97:Src/main.c    **** 
 417              		.loc 1 97 0
 418 0002 FFF7FEFF 		bl	HAL_Init
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 13


 419              	.LVL28:
 104:Src/main.c    **** 
 420              		.loc 1 104 0
 421 0006 FFF7FEFF 		bl	SystemClock_Config
 422              	.LVL29:
 111:Src/main.c    ****   MX_USART3_UART_Init();
 423              		.loc 1 111 0
 424 000a FFF7FEFF 		bl	MX_GPIO_Init
 425              	.LVL30:
 112:Src/main.c    ****   MX_TIM4_Init();
 426              		.loc 1 112 0
 427 000e FFF7FEFF 		bl	MX_USART3_UART_Init
 428              	.LVL31:
 113:Src/main.c    ****   MX_SPI2_Init();
 429              		.loc 1 113 0
 430 0012 FFF7FEFF 		bl	MX_TIM4_Init
 431              	.LVL32:
 114:Src/main.c    ****   MX_TIM3_Init();
 432              		.loc 1 114 0
 433 0016 FFF7FEFF 		bl	MX_SPI2_Init
 434              	.LVL33:
 115:Src/main.c    ****   MX_TIM2_Init();
 435              		.loc 1 115 0
 436 001a FFF7FEFF 		bl	MX_TIM3_Init
 437              	.LVL34:
 116:Src/main.c    ****   MX_TIM1_Init();
 438              		.loc 1 116 0
 439 001e FFF7FEFF 		bl	MX_TIM2_Init
 440              	.LVL35:
 117:Src/main.c    ****   MX_TIM5_Init();
 441              		.loc 1 117 0
 442 0022 FFF7FEFF 		bl	MX_TIM1_Init
 443              	.LVL36:
 118:Src/main.c    ****   MX_ADC1_Init();
 444              		.loc 1 118 0
 445 0026 FFF7FEFF 		bl	MX_TIM5_Init
 446              	.LVL37:
 119:Src/main.c    ****   MX_ADC2_Init();
 447              		.loc 1 119 0
 448 002a FFF7FEFF 		bl	MX_ADC1_Init
 449              	.LVL38:
 120:Src/main.c    ****   MX_ADC3_Init();
 450              		.loc 1 120 0
 451 002e FFF7FEFF 		bl	MX_ADC2_Init
 452              	.LVL39:
 121:Src/main.c    ****   /* USER CODE BEGIN 2 */
 453              		.loc 1 121 0
 454 0032 FFF7FEFF 		bl	MX_ADC3_Init
 455              	.LVL40:
 123:Src/main.c    ****   
 456              		.loc 1 123 0
 457 0036 FFF7FEFF 		bl	Init_Main
 458              	.LVL41:
 459              	.L26:
 131:Src/main.c    ****   /* USER CODE END WHILE */
 460              		.loc 1 131 0 discriminator 1
 461 003a FFF7FEFF 		bl	Mode_select
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 14


 462              	.LVL42:
 463 003e FFF7FEFF 		bl	Mode_mouse
 464              	.LVL43:
 465 0042 FAE7     		b	.L26
 466              		.cfi_endproc
 467              	.LFE160:
 469              		.comm	yawrate_pid,2,2
 470              		.comm	straight_pid_r,2,2
 471              		.comm	straight_pid_l,2,2
 472              		.comm	y_sum,4,4
 473              		.comm	s_sum_r,4,4
 474              		.comm	s_sum_l,4,4
 475              		.section	.rodata.Batt_Check.str1.4,"aMS",%progbits,1
 476              		.align	2
 477              	.LC0:
 478 0000 0A626174 		.ascii	"\012batt:%lf\015\012\000"
 478      743A256C 
 478      660D0A00 
 479              		.section	.rodata.SystemClock_Config.str1.4,"aMS",%progbits,1
 480              		.align	2
 481              	.LC1:
 482 0000 5372632F 		.ascii	"Src/main.c\000"
 482      6D61696E 
 482      2E6300
 483              		.text
 484              	.Letext0:
 485              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 486              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 487              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 488              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 489              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 490              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 491              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 492              		.file 9 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\lib\\gcc\\arm-none-eabi
 493              		.file 10 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 494              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 495              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc_ex.h"
 496              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc.h"
 497              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 498              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_adc.h"
 499              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 500              		.file 17 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 501              		.file 18 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 502              		.file 19 "Inc/adc.h"
 503              		.file 20 "Inc/spi.h"
 504              		.file 21 "Inc/tim.h"
 505              		.file 22 "Inc/usart.h"
 506              		.file 23 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 507              		.file 24 "Inc/global.h"
 508              		.file 25 "Inc/control.h"
 509              		.file 26 "Inc/flash.h"
 510              		.file 27 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 511              		.file 28 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_cortex.h"
 512              		.file 29 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 513              		.file 30 "Inc/gpio.h"
 514              		.file 31 "Inc/mode.h"
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 15


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:18     .text.__io_putchar:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:25     .text.__io_putchar:00000000 __io_putchar
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:58     .text.__io_putchar:0000001c $d
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:64     .text.Batt_Check:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:71     .text.Batt_Check:00000000 Batt_Check
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:142    .text.Batt_Check:00000064 $d
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:155    .text.Init_Main:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:162    .text.Init_Main:00000000 Init_Main
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:219    .text.Init_Main:00000040 $d
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:230    .text._Error_Handler:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:237    .text._Error_Handler:00000000 _Error_Handler
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:252    .text.SystemClock_Config:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:259    .text.SystemClock_Config:00000000 SystemClock_Config
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:390    .text.SystemClock_Config:000000b0 $d
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:398    .text.main:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:405    .text.main:00000000 main
                            *COM*:00000002 yawrate_pid
                            *COM*:00000002 straight_pid_r
                            *COM*:00000002 straight_pid_l
                            *COM*:00000004 y_sum
                            *COM*:00000004 s_sum_r
                            *COM*:00000004 s_sum_l
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:476    .rodata.Batt_Check.str1.4:00000000 $d
C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s:480    .rodata.SystemClock_Config.str1.4:00000000 $d

UNDEFINED SYMBOLS
HAL_UART_Transmit
huart3
__aeabi_f2d
printf
batt_analog
batt_Vcc
setbuf
HAL_TIM_Base_Start_IT
HAL_TIM_Encoder_Start
set_mpu6500
_impure_ptr
htim5
htim3
htim4
flag
straight_cnt
yawrate_cnt
HAL_RCC_OscConfig
HAL_RCC_ClockConfig
HAL_RCC_GetHCLKFreq
HAL_SYSTICK_Config
HAL_SYSTICK_CLKSourceConfig
HAL_NVIC_SetPriority
HAL_Init
MX_GPIO_Init
MX_USART3_UART_Init
MX_TIM4_Init
MX_SPI2_Init
MX_TIM3_Init
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\cc1xQrnP.s 			page 16


MX_TIM2_Init
MX_TIM1_Init
MX_TIM5_Init
MX_ADC1_Init
MX_ADC2_Init
MX_ADC3_Init
Mode_select
Mode_mouse
